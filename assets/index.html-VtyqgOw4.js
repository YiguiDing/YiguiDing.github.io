import{_ as i,c as s,o as a,b as n}from"./app-DEzbJ36c.js";const e={},l=n(`<h1 id="alpine-linux-ish-and-utm-配置过程记录" tabindex="-1"><a class="header-anchor" href="#alpine-linux-ish-and-utm-配置过程记录"><span>Alpine Linux(iSH and UTM)配置过程记录</span></a></h1><h2 id="目录" tabindex="-1"><a class="header-anchor" href="#目录"><span>目录</span></a></h2><ul><li><a href="#alpine-linuxish-and-utm%E9%85%8D%E7%BD%AE%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95">Alpine Linux(iSH and UTM)配置过程记录</a><ul><li><a href="#%E7%9B%AE%E5%BD%95">目录</a></li><li><a href="#%E4%B8%80%E6%8D%A2%E6%BA%90%E9%85%8D%E7%BD%AE">一、换源配置</a></li><li><a href="#%E4%BA%8C%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6">二、安装软件</a></li><li><a href="#%E4%B8%89%E9%85%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86openrc">三、配置服务管理openrc</a></li><li><a href="#%E9%85%8D%E7%BD%AE%E5%BC%80%E5%90%AFssh%E6%9C%8D%E5%8A%A1">配置开启ssh服务</a></li><li><a href="#%E5%AE%9E%E7%8E%B0ish%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C%E9%85%8D%E7%BD%AE">实现ish后台运行配置</a></li><li><a href="#%E5%B0%9D%E8%AF%95%E5%AE%89%E8%A3%85vscode%E7%BD%91%E9%A1%B5%E7%89%88">尝试安装vsCode网页版</a><ul><li><a href="#%E5%B0%9D%E8%AF%951%E5%9C%A8ish%E4%B8%AD%E5%B0%9D%E8%AF%95%E9%80%9A%E8%BF%87npm%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%A4%B1%E8%B4%A5">尝试1：在iSH中尝试通过npm安装（配置失败）</a></li><li><a href="#%E5%B0%9D%E8%AF%952%E5%9C%A8ish%E4%B8%AD%E5%B0%9D%E8%AF%95%E9%80%9A%E8%BF%87docker%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%A4%B1%E8%B4%A5">尝试2：在iSH中尝试通过docker安装（配置失败）</a></li><li><a href="#%E5%B0%9D%E8%AF%953%E5%9C%A8utm%E4%B8%AD%E5%AE%89%E8%A3%85alpine3161%E5%86%8D%E5%B0%9D%E8%AF%95%E4%BD%BF%E7%94%A8npm%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%A4%B1%E8%B4%A5">尝试3：在UTM中安装Alpine3.16.1再尝试使用npm安装（配置失败）</a></li><li><a href="#%E5%B0%9D%E8%AF%954%E5%9C%A8utm%E4%B8%AD%E5%AE%89%E8%A3%85alpine3161%E5%86%8D%E5%B0%9D%E8%AF%95%E4%BD%BF%E7%94%A8yarn%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%A4%B1%E8%B4%A5">尝试4：在UTM中安装Alpine3.16.1再尝试使用yarn安装（配置失败）</a></li><li><a href="#%E5%B0%9D%E8%AF%955%E5%9C%A8utm%E4%B8%AD%E5%AE%89%E8%A3%85alpine3161%E5%86%8D%E5%B0%9D%E8%AF%95%E4%BD%BF%E7%94%A8release%E7%89%88%E6%9C%AC%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%A4%B1%E8%B4%A5">尝试5：在UTM中安装Alpine3.16.1再尝试使用release版本安装（配置失败）</a></li><li><a href="#%E5%B0%9D%E8%AF%956%E5%9C%A8utm%E4%B8%AD%E5%AE%89%E8%A3%85alpine3161%E5%B9%B6%E5%BC%80%E5%90%AFjit%E5%86%8D%E5%B0%9D%E8%AF%95%E4%BD%BF%E7%94%A8release%E7%89%88%E6%9C%AC%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F">尝试6：在UTM中安装Alpine3.16.1并开启JIT再尝试使用release版本安装（成功）</a></li></ul></li></ul></li></ul><h2 id="一、换源配置" tabindex="-1"><a class="header-anchor" href="#一、换源配置"><span>一、换源配置</span></a></h2><p><strong>1.编辑文件</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">vi</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> /etc/apk/repositories</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>2.添加内容 注意版本号要和原来的一致</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 任选一组</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 阿里云源 实测可以使用</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">http://mirrors.aliyun.com/alpine/v3.12/main</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">http://mirrors.aliyun.com/alpine/v3.12/community</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 中科大源 实测可以使用</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">http://mirrors.ustc.edu.cn/alpine/v3.12/main</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">http://mirrors.ustc.edu.cn/alpine/v3.12/community</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 清华源 实测可以使用</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">http://mirrors.tuna.tsinghua.edu.cn/alpine/v3.12/main</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">http://mirrors.tuna.tsinghua.edu.cn/alpine/v3.12/community</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3.更新</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">apk</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> update</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>4.另一种一步到位的方法</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 配置</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">cat</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &gt;&gt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> .profile</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#E6E6E6;"> EOF</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">echo &#39;http://mirrors.tuna.tsinghua.edu.cn/alpine/v3.14/main&#39; &gt; /etc/apk/repositories</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">echo &#39;http://mirrors.tuna.tsinghua.edu.cn/alpine/v3.14/community&#39; &gt;&gt; /etc/apk/repositories</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#E6E6E6;">EOF</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 执行</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">source</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> .profile</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 应用修改</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">apk</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> update</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="二、安装软件" tabindex="-1"><a class="header-anchor" href="#二、安装软件"><span>二、安装软件</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">apk</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> add</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> openrc</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">apk</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> add</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> curl</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">apk</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> add</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> npm</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">apk</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> add</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> git</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">apk</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> add</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> nss</span><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> #for https</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">apk</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> add</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> openssh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="三、配置服务管理openrc" tabindex="-1"><a class="header-anchor" href="#三、配置服务管理openrc"><span>三、配置服务管理openrc</span></a></h2><p><strong>1.安装openrc</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">apk</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> add</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> openrc</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 注意 要先安装openrc 再安装要启动的服务比如docker 否则提示服务不存在</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2.编辑/etc/inittab 将<code>::sysinit:/sbin/openrc sysinit</code>中的<code>sysinit</code>删除</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">vi</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> /etc/inittab</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>3.重启ish</strong></p><p><strong>4.添加服务</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">rc-update</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> add</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> sshd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>5.删除服务</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">rc-update</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> del</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> sshd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>6.启动服务</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">rc-service</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> sshd</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> start</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>7.暂停服务</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">rc-service</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> sshd</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> stop</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>8.查询服务状态</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">rc-status</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> -a</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="配置开启ssh服务" tabindex="-1"><a class="header-anchor" href="#配置开启ssh服务"><span>配置开启ssh服务</span></a></h2><p><strong>1. 安装ssh</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">apk</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> add</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> openssh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>2.为本机生成SSH主机秘钥</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">ssh-keygen</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> -A</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>3.临时启动守护进程</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">/usr/sbin/sshd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>4.将守护进程添加到开机启动</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">rc-update</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> add</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> sshd</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 移除开机自启服务：rc-update del sshd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>5.启动服务</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">rc-service</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> sshd</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> start</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 暂停服务：rc-service sshd stop</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>6.配置sshd</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">cat</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &gt;&gt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> /etc/ssh/sshd_config</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">  &lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#E6E6E6;"> EOF</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"># 允许root登录 禁止密码登录</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"># PermitRootLogin prohibit-password</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"># 允许root登录</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">PermitRootLogin yes</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"># 允许公钥登录</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">PubkeyAuthentication yes</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"># 允许密码登录</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">PasswordAuthentication yes                                       </span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"># 不允许空密码</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">PermitEmptyPasswords no</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#E6E6E6;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="实现ish后台运行配置" tabindex="-1"><a class="header-anchor" href="#实现ish后台运行配置"><span>实现ish后台运行配置</span></a></h2><p><strong>1.关键代码</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 说明：ish是ios系统上的应用程序，为使iSH进程能够支持长期后台运行而不被杀死，需要不断获取手机位置信息</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">cat</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> /dev/location</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &gt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> /dev/null</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> &amp;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2.配置</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">echo</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &#39;cat /dev/location &gt; /dev/null &amp;&#39;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &gt;&gt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> .profile</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">cat</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> .profile</span><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> # 检查配置是否成功</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="尝试安装vscode网页版" tabindex="-1"><a class="header-anchor" href="#尝试安装vscode网页版"><span>尝试安装vsCode网页版</span></a></h2><h3 id="尝试1-在ish中尝试通过npm安装-配置失败" tabindex="-1"><a class="header-anchor" href="#尝试1-在ish中尝试通过npm安装-配置失败"><span>尝试1：在iSH中尝试通过npm安装（配置失败）</span></a></h3><p><strong>先要安装<code>npm</code>和<code>nodejs</code></strong><br> 但由于npm软件最新版使用了一些ish没有实现的指令 导致运行npm会提示非法指令 所以只能安装低版本</p><p><strong>1.修改 /etc/apk/repositories 将版本改为3.12版本</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 修改</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">cat</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &gt;&gt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> .profile</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#E6E6E6;"> EOF</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">echo &#39;http://mirrors.tuna.tsinghua.edu.cn/alpine/v3.12/main&#39; &gt; /etc/apk/repositories</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">echo &#39;http://mirrors.tuna.tsinghua.edu.cn/alpine/v3.12/community&#39; &gt;&gt; /etc/apk/repositories</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#E6E6E6;">EOF</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 更新</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">apk</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> update</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2.安装</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">apk</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> add</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> nodejs=12.22.12-r0</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> npm=12.22.12-r0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>3.npm换为国内源</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">npm</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> config</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> set</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> registry</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> https://registry.npmmirror.com</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 或者安装yarn: npm install -g yarn</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>4.然后安装code-server</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">npm</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> install</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> -g</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> code-server</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> --unsafe-perm</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 然后在这一步卡死了</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># ish1.2.3（build298） 卡在了yarn</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="尝试2-在ish中尝试通过docker安装-配置失败" tabindex="-1"><a class="header-anchor" href="#尝试2-在ish中尝试通过docker安装-配置失败"><span>尝试2：在iSH中尝试通过docker安装（配置失败）</span></a></h3><p><strong>1.安装docker和compose</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">apk</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> add</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> docker</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">apk</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> add</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> docker-compose</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># compose可以根据yml文件中的配置来启动docker</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2.下载coder</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">git</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> clone</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> https://github.com/coder/coder.git</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> --depth=1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>3.临时启动守护进程测试</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">rc-service</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> docker</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> start</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 报错并卡死：</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 原因：ish没有实现filesystems文件</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 报错提示：grep: /proc/filesystems: No such file</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 如果直接执行： rc-update add sshd 会导致卡死</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>4.启动</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">CODER_ACCESS_URL</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">http://localhost:7080</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">docker-compose</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> up</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="尝试3-在utm中安装alpine3-16-1再尝试使用npm安装-配置失败" tabindex="-1"><a class="header-anchor" href="#尝试3-在utm中安装alpine3-16-1再尝试使用npm安装-配置失败"><span>尝试3：在UTM中安装Alpine3.16.1再尝试使用npm安装（配置失败）</span></a></h3><p>安装UTM 在UTM中安装Alpine3.16.1</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 安装时最好设置好密码</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 并且在提示：# PermitRootLogin prohibit-password ？</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 输入yes</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>安装nodejs npm</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 安装过程依赖python</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">apk</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> add</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> python3</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># code-server要求node16 ： code-server@4.5.1: wanted: {&quot;node&quot;:&quot;16&quot;} (current: {&quot;node&quot;:&quot;12.22.12&quot;,&quot;npm&quot;:&quot;6.14.16&quot;})</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">apk</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> add</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> nodejs=16.16.0-r0</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> npm</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">npm</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> install</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> -g</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> code-server</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> --unsafe-perm</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 依旧报错 ：  gyp: Undefined variable module_name in binding.gyp while trying to load binding.gyp</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 还是argon2的问题</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>尝试1、3出错原因和这个类似：<a href="https://github.com/coder/code-server/issues/5184" target="_blank" rel="noopener noreferrer">#5184</a></p><h3 id="尝试4-在utm中安装alpine3-16-1再尝试使用yarn安装-配置失败" tabindex="-1"><a class="header-anchor" href="#尝试4-在utm中安装alpine3-16-1再尝试使用yarn安装-配置失败"><span>尝试4：在UTM中安装Alpine3.16.1再尝试使用yarn安装（配置失败）</span></a></h3><p>该方法根据自issue：<a href="https://github.com/coder/code-server/issues/5174" target="_blank" rel="noopener noreferrer">#5174</a></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">npm</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> install</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> -g</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> yarn</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">sudo</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> yarn</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> global</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> add</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> code-server</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>绷不住了！！！ 报错超时，好像是虚拟机的问题！！！</strong></p><div class="language-txt line-numbers-mode" data-highlighter="shiki" data-ext="txt" data-title="txt" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span>ipad:~# npm install yarn -g</span></span>
<span class="line"><span>added 1 package in 1m</span></span>
<span class="line"><span>ipad:~# sudo yarn global add code-server</span></span>
<span class="line"><span>-ash: sudo: not found</span></span>
<span class="line"><span>ipad:~# yarn global add code-server</span></span>
<span class="line"><span>yarn global v1.22.19</span></span>
<span class="line"><span>[1/4] Resolving packages...</span></span>
<span class="line"><span>[2/4] Fetching packages...</span></span>
<span class="line"><span>[3/4] Linking dependencies...</span></span>
<span class="line"><span>warning &quot;code-server &gt; @coder/logger@1.1.16&quot; has unmet peer dependency &quot;@google-cloud/logging@^4.5.2&quot;.</span></span>
<span class="line"><span>[4/4] Building fresh packages...</span></span>
<span class="line"><span>success Installed &quot;code-server@4.5.1&quot; with binaries:</span></span>
<span class="line"><span>      - code-server</span></span>
<span class="line"><span>Done in 893.96s.</span></span>
<span class="line"><span>ipad:~# code-server </span></span>
<span class="line"><span>[2022-08-06T18:56:50.068Z] info  Wrote default config file to ~/.config/code-server/config.yaml</span></span>
<span class="line"><span>[2022-08-06T18:57:00.929Z] error timed out</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="尝试5-在utm中安装alpine3-16-1再尝试使用release版本安装-配置失败" tabindex="-1"><a class="header-anchor" href="#尝试5-在utm中安装alpine3-16-1再尝试使用release版本安装-配置失败"><span>尝试5：在UTM中安装Alpine3.16.1再尝试使用release版本安装（配置失败）</span></a></h3><p>既然在UTM安装的是64bit版本的系统 为什么不直接使用release版本？？？</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 下载</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">wget</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> https://github.com/coder/code-server/releases/download/v4.5.1/code-server-4.5.1-linux-amd64.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 解压</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">tar</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> -xvf</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> ./code-server-4.5.1-linux-amd64</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">cd</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> ./code-server-4.5.1-linux-amd64</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 执行，报错：./lib/node not fond</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">./code-server</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 安装node</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">apk</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> add</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> node</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> </span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 查看安装目录</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">which</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> node</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 建立软连接</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">ln</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> -s</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> /usr/bin/node</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> ./lib/node</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 再次执行</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">./code-server</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 依旧报错</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># [2022-08-06T18:57:00.929Z] error timed out</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 查文档得知要求：glibc &gt;= 2.17 and glibcxx &gt;= v3.4.18</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 而</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">#alpine linux追求系统小，默认使用了uclibc，但用glibc编译的程序无法直接在上面运行了。</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">#需要自行安装第三方的alpine glibc，然后就可以无障碍运行其他机器编译的依赖glibc的程序了。</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 查了issue #1706 发现code-server 对于glibc glibcxx已经静态编译了 不需要系统自带静态链接库了</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="尝试6-在utm中安装alpine3-16-1并开启jit再尝试使用release版本安装-成功" tabindex="-1"><a class="header-anchor" href="#尝试6-在utm中安装alpine3-16-1并开启jit再尝试使用release版本安装-成功"><span>尝试6：在UTM中安装Alpine3.16.1并开启JIT再尝试使用release版本安装（成功）</span></a></h3><p>方法同上，UTM使用JIT（jitterbug）启动，终于可以了！！！原来是运行速度的问题</p><p>完整过程：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 下载</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">wget</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> https://github.com/coder/code-server/releases/download/v4.5.1/code-server-4.5.1-linux-amd64.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 解压</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">tar</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> -xvf</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> ./code-server-4.5.1-linux-amd64</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 递归创建文件夹</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">mkdir</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> -p</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> ~/.local/lib</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> ~/.local/bin</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 移动并改名</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">mv</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> ./code-server-4.5.1-linux-amd64</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> ~/.local/lib/code-server-4.5.1/</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 建立软连接</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">ln</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> -s</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> ~/.local/lib/code-server-4.5.1/bin/code-server</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> ~/.local/bin/code-server</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 添加到环境变量</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">PATH</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;/root/.local/bin:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">$PATH</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 运行</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">code-server</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 如果提示-ash: node: not found 则为node添加软连接</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">ln</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> -s</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> /usr/bin/node</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> ~/.local/lib/code-server-4.5.1/lib/node</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 原因：</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 使用命令：ldd ~/.local/lib/code-server-4.5.1/lib/node</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 可以发现缺少一些动态链接库，因为alpine是阉割版的linux</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 所以直接apk add nodejs</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 然后删除原文件</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># rm ~/.local/lib/code-server-4.5.1/lib/node</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># which node 查看刚安装的node的所在目录</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 然后添加软连接</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">ln</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> -s</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> /usr/bin/node</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> ~/.local/lib/code-server-4.5.1/lib/node</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>编辑配置文件修改密码</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">cat</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &gt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> ~/.config/code-server/config.yaml</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#E6E6E6;">EOF</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">bind-addr: 0.0.0.0:80</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">auth: password</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">password: *****数字加英文*****</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">cert: false</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#E6E6E6;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>配置自动添加环境变量</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span>vi .profile</span></span>
<span class="line"><span>PATH=&quot;/root/.local/bin:$PATH&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>配置开机自启服务（暂时没有解决输出重定向的问题）</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">vim</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> /etc/init.d/vscode</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#EA76CB;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">#!/sbin/openrc-run</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">name</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;vscode&quot;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">command</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;/root/.local/bin/code-server &gt; /dev/null &amp; &quot;</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">#command_background=&quot;yes&quot;</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">depend</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">        need</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> net</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">        after</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> sshd</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#9CA0B0;--shiki-dark:#6A9955;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"># 修改权限 否则提示* rc-service: Permission denied</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">chmod</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 755</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> /etc/init.d/vscode</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">管理服务</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">列出所有可用服务</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">rc-service</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> --list</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> |</span><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> grep</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> vscode</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">启动/停止/重启</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> 已有服务</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">rc-service</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> 服务名</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> start/stop/restart</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">或</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">/etc/init.d/服务名</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> start/stop/restart</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">添加到开机自启动</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#DCDCAA;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">rc-update</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> add</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> vscode</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,95),t=[l];function h(k,d){return a(),s("div",null,t)}const p=i(e,[["render",h],["__file","index.html.vue"]]),c=JSON.parse('{"path":"/%E5%90%8E%E7%AB%AF/Alpine%20Linux(iSH%20and%20UTM)%E9%85%8D%E7%BD%AE%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/","title":"Alpine Linux(iSH and UTM)配置过程记录","lang":"zh-CN","frontmatter":{"title":"Alpine Linux(iSH and UTM)配置过程记录","date":"2022-08-04T09:59:00.000Z","cover":"./cover/default_cover.jpg","tag":["iSH","Alpine","Linux"],"category":"笔记","description":"Alpine Linux(iSH and UTM)配置过程记录 目录 Alpine Linux(iSH and UTM)配置过程记录 目录 一、换源配置 二、安装软件 三、配置服务管理openrc 配置开启ssh服务 实现ish后台运行配置 尝试安装vsCode网页版 尝试1：在iSH中尝试通过npm安装（配置失败） 尝试2：在iSH中尝试通过dock...","head":[["meta",{"property":"og:url","content":"https://dingdingdang.online/%E5%90%8E%E7%AB%AF/Alpine%20Linux(iSH%20and%20UTM)%E9%85%8D%E7%BD%AE%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/"}],["meta",{"property":"og:site_name","content":"YiguiDing的Blog小站"}],["meta",{"property":"og:title","content":"Alpine Linux(iSH and UTM)配置过程记录"}],["meta",{"property":"og:description","content":"Alpine Linux(iSH and UTM)配置过程记录 目录 Alpine Linux(iSH and UTM)配置过程记录 目录 一、换源配置 二、安装软件 三、配置服务管理openrc 配置开启ssh服务 实现ish后台运行配置 尝试安装vsCode网页版 尝试1：在iSH中尝试通过npm安装（配置失败） 尝试2：在iSH中尝试通过dock..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-11-17T13:06:31.000Z"}],["meta",{"property":"article:author","content":"丁毅桂"}],["meta",{"property":"article:tag","content":"iSH"}],["meta",{"property":"article:tag","content":"Alpine"}],["meta",{"property":"article:tag","content":"Linux"}],["meta",{"property":"article:published_time","content":"2022-08-04T09:59:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-11-17T13:06:31.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Alpine Linux(iSH and UTM)配置过程记录\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-08-04T09:59:00.000Z\\",\\"dateModified\\":\\"2023-11-17T13:06:31.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"丁毅桂\\",\\"email\\":\\"2449695354@qq.com\\"}]}"],["meta",{"name":"baidu-site-verification","content":"codeva-PwE9Ts6nMl"}]]},"headers":[{"level":2,"title":"目录","slug":"目录","link":"#目录","children":[]},{"level":2,"title":"一、换源配置","slug":"一、换源配置","link":"#一、换源配置","children":[]},{"level":2,"title":"二、安装软件","slug":"二、安装软件","link":"#二、安装软件","children":[]},{"level":2,"title":"三、配置服务管理openrc","slug":"三、配置服务管理openrc","link":"#三、配置服务管理openrc","children":[]},{"level":2,"title":"配置开启ssh服务","slug":"配置开启ssh服务","link":"#配置开启ssh服务","children":[]},{"level":2,"title":"实现ish后台运行配置","slug":"实现ish后台运行配置","link":"#实现ish后台运行配置","children":[]},{"level":2,"title":"尝试安装vsCode网页版","slug":"尝试安装vscode网页版","link":"#尝试安装vscode网页版","children":[{"level":3,"title":"尝试1：在iSH中尝试通过npm安装（配置失败）","slug":"尝试1-在ish中尝试通过npm安装-配置失败","link":"#尝试1-在ish中尝试通过npm安装-配置失败","children":[]},{"level":3,"title":"尝试2：在iSH中尝试通过docker安装（配置失败）","slug":"尝试2-在ish中尝试通过docker安装-配置失败","link":"#尝试2-在ish中尝试通过docker安装-配置失败","children":[]},{"level":3,"title":"尝试3：在UTM中安装Alpine3.16.1再尝试使用npm安装（配置失败）","slug":"尝试3-在utm中安装alpine3-16-1再尝试使用npm安装-配置失败","link":"#尝试3-在utm中安装alpine3-16-1再尝试使用npm安装-配置失败","children":[]},{"level":3,"title":"尝试4：在UTM中安装Alpine3.16.1再尝试使用yarn安装（配置失败）","slug":"尝试4-在utm中安装alpine3-16-1再尝试使用yarn安装-配置失败","link":"#尝试4-在utm中安装alpine3-16-1再尝试使用yarn安装-配置失败","children":[]},{"level":3,"title":"尝试5：在UTM中安装Alpine3.16.1再尝试使用release版本安装（配置失败）","slug":"尝试5-在utm中安装alpine3-16-1再尝试使用release版本安装-配置失败","link":"#尝试5-在utm中安装alpine3-16-1再尝试使用release版本安装-配置失败","children":[]},{"level":3,"title":"尝试6：在UTM中安装Alpine3.16.1并开启JIT再尝试使用release版本安装（成功）","slug":"尝试6-在utm中安装alpine3-16-1并开启jit再尝试使用release版本安装-成功","link":"#尝试6-在utm中安装alpine3-16-1并开启jit再尝试使用release版本安装-成功","children":[]}]}],"git":{"createdTime":1700226391000,"updatedTime":1700226391000,"contributors":[{"name":"YiguiDing","email":"2449695354@qq.com","commits":1}]},"readingTime":{"minutes":6.96,"words":2087},"filePathRelative":"后端/Alpine Linux(iSH and UTM)配置过程记录/index.md","localizedDate":"2022年8月4日","excerpt":"","autoDesc":true}');export{p as comp,c as data};
