var m=Object.defineProperty;var d=s=>{throw TypeError(s)};var y=(s,t,i)=>t in s?m(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i;var c=(s,t,i)=>y(s,typeof t!="symbol"?t+"":t,i),h=(s,t,i)=>t.has(s)||d("Cannot "+i);var e=(s,t,i)=>(h(s,t,"read from private field"),i?i.call(s):t.get(s)),l=(s,t,i)=>t.has(s)?d("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,i),g=(s,t,i,o)=>(h(s,t,"write to private field"),o?o.call(s,i):t.set(s,i),i),u=(s,t,i)=>(h(s,t,"access private method"),i);import{w,l as p,j as A,h as M,A as P,g as O}from"./app-XtR3JOoW.js";var r,a,f,b;class W{constructor(t){l(this,a);l(this,r);c(this,"src",w(""));c(this,"referrerPolicy",null);g(this,r,t),t.setAttribute("frameBorder","0"),t.setAttribute("aria-hidden","true"),t.setAttribute("allow","autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope"),this.referrerPolicy!==null&&t.setAttribute("referrerpolicy",this.referrerPolicy)}get iframe(){return e(this,r)}setup(){p(window,"message",u(this,a,b).bind(this)),p(e(this,r),"load",this.onLoad.bind(this)),A(u(this,a,f).bind(this))}postMessage(t,i){e(this,r).contentWindow?.postMessage(JSON.stringify(t),i??"*")}}r=new WeakMap,a=new WeakSet,f=function(){const t=this.src();if(!t.length){e(this,r).setAttribute("src","");return}const i=M(()=>this.buildParams());e(this,r).setAttribute("src",P(t,i))},b=function(t){const i=this.getOrigin();if((t.source===null||t.source===e(this,r)?.contentWindow)&&(!O(i)||i===t.origin)){try{const n=JSON.parse(t.data);n&&this.onMessage(n,t);return}catch{}t.data&&this.onMessage(t.data,t)}};export{W as E};
