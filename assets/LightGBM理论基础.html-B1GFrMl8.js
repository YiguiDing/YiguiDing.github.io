import{_ as s,c as a,a as l,o as t}from"./app-B7CD2T1r.js";const n="/assets/image-BRCKbsif.png",h="/assets/image-1-CMwZ4gbc.png",e="/assets/image-2-C1tCdG4o.png",k="/assets/image-3-CuDR11jG.png",p="/assets/image-4-CKNsovbC.png",r="/assets/image-5-CAU0ks0a.png",E={};function g(d,i){return t(),a("div",null,i[0]||(i[0]=[l('<h2 id="lightgbm学习笔记" tabindex="-1"><a class="header-anchor" href="#lightgbm学习笔记"><span>lightGBM学习笔记</span></a></h2><h3 id="决策树" tabindex="-1"><a class="header-anchor" href="#决策树"><span>决策树</span></a></h3><p><strong>决策树算法简介</strong></p><ul><li>很多集成学习算法，如随机森林、XGBOOST、lightGBM底层实现都是决策树算法。</li><li>类似于流程图的树形结构</li><li>树的结点代表对特征的测试评估</li><li>树的分支代表对特征的测试评估结果</li><li>树的叶子节点代表类别</li><li>树的最高层是根节点</li><li>案例 <ul><li>银行信贷资质评估</li><li><img src="'+n+'" alt="alt text"></li><li>购买游戏决策过程</li><li><img src="'+h+'" alt="alt text"></li></ul></li></ul><p><strong>决策树分类</strong></p><ul><li>分类树：分类标签值</li><li>回归树：预测实数值</li></ul><p><strong>决策树特点</strong></p><ul><li>从根节点开始走向叶节点。所有数据最终都会落到叶子节点，既可以做分类也可以做回归。</li><li>非参数的递归学习、可解释性强</li><li>决策树的生成是递归过程</li></ul><h3 id="gbdt" tabindex="-1"><a class="header-anchor" href="#gbdt"><span>GBDT</span></a></h3><p><strong>GBDT概念</strong></p><ul><li>GBDT(Gradient Boosting Decision Tree)梯度提升决策树</li><li>通过加法模型（基函数线性组合），不断减少训练过程产生的**残差（误差）**来达到数据分类或回归的算法</li><li><img src="'+e+'" alt="alt text"></li></ul><p><strong>为什么GBDT选择决策树作为基学习器？</strong></p><ul><li>决策树可看作是if-then的规则集合，<strong>好理解、可解释</strong></li><li>决策树相比其他算法需要更少的特征工程。 <ul><li><strong>不需要特征标准化、归一化</strong>！</li><li>可以很好的处理字段缺失的数据</li><li>不用关心特征间的相互依赖</li></ul></li><li>决策树能自动组合多个特征</li></ul><p><strong>GBDT优点</strong></p><ul><li>可灵活处理各种数据类型、连续或离散</li><li>较少的调参时间就能获得较高的准确率</li><li>使用的损失函数健壮、对异常值鲁棒性强。</li></ul><p><strong>GBDT缺点</strong></p><ul><li>弱学习器间存在依赖关系、难以并行训练数据</li><li>但可通过自采样SGBT达到部分并行</li></ul><h3 id="lightgbm" tabindex="-1"><a class="header-anchor" href="#lightgbm"><span>LightGBM</span></a></h3><p><strong>概述</strong></p><ul><li>LightGBM是微软推出的梯度boosting框架</li><li>使用基于学习算法的决策树、与XGBoost有相同特征 <ul><li>都基于分布式学习框架</li><li>都支持大规模数据处理和计算</li><li>都有更高的准确率</li></ul></li></ul><p><strong>算法原理（简要版）</strong></p><ul><li>1 对所有特征按照特征的数值预排序</li><li>2 在遍历分割点的时候用O(#Data)的代价找到特征上最好的分割点</li><li>3 将数据分割成左右子节点、</li><li>4 不断循环</li></ul><p><strong>算法核心</strong></p><ul><li>基于Histogram（直方图）的决策树算法</li><li>直方图做差加速</li><li>带深度限制的leaf-wise的叶子生长策略 <ul><li>XGBoost是level-wise</li><li>LightGBM是leaf-wise</li></ul></li><li>单边梯度采样GOSS(gradient-based One-Side Sampling)</li><li>互斥特征绑定EFB（Exclusive Feature Bundling）</li><li>支持类别特征Categorical Feature</li><li>多线程优化</li></ul><h4 id="基于histogram-直方图-的决策树算法" tabindex="-1"><a class="header-anchor" href="#基于histogram-直方图-的决策树算法"><span>基于Histogram（直方图）的决策树算法</span></a></h4><p><strong>原理</strong></p><ul><li>将连续的浮点特征离散成K个整数，</li><li>并构造宽度为K的Histogram(直方图)，</li><li>然后遍历训练数据，统计每个离散值在直方图中的累计统计量。</li><li>在进行特征选择时，只需要根据直方图的离散值，遍历寻找最优分割点。</li><li><img src="'+k+`" alt="alt text"></li><li>如<div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#E6E6E6;--shiki-dark-font-style:inherit;">features</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#B5CEA8;--shiki-dark-font-style:inherit;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1.0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 2.0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 3.0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 4.0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 5.0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 6.0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> ...</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 100.0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span></span>
<span class="line"><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#E6E6E6;--shiki-dark-font-style:inherit;">hist</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#B5CEA8;--shiki-dark-font-style:inherit;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">  &#39;1~10&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">10</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">  &#39;11~20&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">10</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">  ......</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">  &#39;范围&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;频次&#39;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>优点</strong></p><ul><li>占用内存更低，数据分割的复杂度更低。</li><li>用8位整型存储，内存消耗为原来的1/8</li><li>时间开销由原来的O(data<em>features)降到O(k</em>features)</li></ul><h4 id="直方图做差加速" tabindex="-1"><a class="header-anchor" href="#直方图做差加速"><span>直方图做差加速</span></a></h4><p><strong>原理</strong></p><ul><li>一个叶子节点的Histogram可以直接由父节点的Histogram和兄弟节点的Histogram做差得到。</li><li><img src="`+p+`" alt="alt text"></li><li>如<div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#E6E6E6;--shiki-dark-font-style:inherit;">features</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;</span><span style="--shiki-light:#40A02B;--shiki-light-font-style:italic;--shiki-dark:#CE9178;--shiki-dark-font-style:inherit;">age</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 2</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 3</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 4</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 5</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 6</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> ...</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 100</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span></span>
<span class="line"><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#E6E6E6;--shiki-dark-font-style:inherit;">hist</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;</span><span style="--shiki-light:#40A02B;--shiki-light-font-style:italic;--shiki-dark:#CE9178;--shiki-dark-font-style:inherit;">age</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">    &#39;1~10&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">10</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">    &#39;11~20&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">10</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    ......</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">    &#39;范围&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;频次&#39;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"># 做差快速计算！</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"># [50~100]岁频次 = [1~100]岁频次 - [1~50]岁频次 </span></span>
<span class="line"><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#E6E6E6;--shiki-dark-font-style:inherit;">hist</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;</span><span style="--shiki-light:#40A02B;--shiki-light-font-style:italic;--shiki-dark:#CE9178;--shiki-dark-font-style:inherit;">age</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">][</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;50~100&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#E6E6E6;--shiki-dark-font-style:inherit;"> hist</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;</span><span style="--shiki-light:#40A02B;--shiki-light-font-style:italic;--shiki-dark:#CE9178;--shiki-dark-font-style:inherit;">age</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">][</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;1~100&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> -</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#E6E6E6;--shiki-dark-font-style:inherit;"> hist</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;</span><span style="--shiki-light:#40A02B;--shiki-light-font-style:italic;--shiki-dark:#CE9178;--shiki-dark-font-style:inherit;">age</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">][</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;1~50&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>通常构造直方图需要遍历该叶子上的所有数据，但直方图做差仅需遍历直方图的k个桶。</li></ul><h4 id="带深度限制的leaf-wiise的叶子生长策略" tabindex="-1"><a class="header-anchor" href="#带深度限制的leaf-wiise的叶子生长策略"><span>带深度限制的leaf-wiise的叶子生长策略</span></a></h4><p><strong>原理</strong></p><ul><li>每次从当前所有叶子节点中找到分裂增益（信息增益）最大的一个节点（特征）分裂成叶子、如此循环</li><li><img src="`+r+'" alt="alt text"></li></ul><p><strong>优点</strong></p><ul><li>在分裂次数相同的情况下，leaf-wiise相比level-wise可以降低更多误差，得到更好的精度。</li></ul><p><strong>缺点</strong></p><ul><li>可能会长出较深的决策树，导致过拟合。</li></ul>',39)]))}const y=s(E,[["render",g]]),c=JSON.parse('{"path":"/%E4%BA%A4%E6%98%93/lightGBM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/LightGBM%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80.html","title":"","lang":"zh-CN","frontmatter":{"description":"lightGBM学习笔记 决策树 决策树算法简介 很多集成学习算法，如随机森林、XGBOOST、lightGBM底层实现都是决策树算法。 类似于流程图的树形结构 树的结点代表对特征的测试评估 树的分支代表对特征的测试评估结果 树的叶子节点代表类别 树的最高层是根节点 案例 银行信贷资质评估 alt text 购买游戏决策过程 alt text 决策树分...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-08-24T20:42:22.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"丁毅桂\\",\\"email\\":\\"2449695354@qq.com\\"}]}"],["meta",{"property":"og:url","content":"https://dingdingdang.online/%E4%BA%A4%E6%98%93/lightGBM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/LightGBM%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80.html"}],["meta",{"property":"og:site_name","content":"YiguiDing的Blog小站"}],["meta",{"property":"og:description","content":"lightGBM学习笔记 决策树 决策树算法简介 很多集成学习算法，如随机森林、XGBOOST、lightGBM底层实现都是决策树算法。 类似于流程图的树形结构 树的结点代表对特征的测试评估 树的分支代表对特征的测试评估结果 树的叶子节点代表类别 树的最高层是根节点 案例 银行信贷资质评估 alt text 购买游戏决策过程 alt text 决策树分..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-24T20:42:22.000Z"}],["meta",{"property":"article:modified_time","content":"2025-08-24T20:42:22.000Z"}],["meta",{"name":"baidu-site-verification","content":"codeva-PwE9Ts6nMl"}]]},"git":{"createdTime":1756068142000,"updatedTime":1756068142000,"contributors":[{"name":"YiguiDing","username":"YiguiDing","email":"2449695354@qq.com","commits":1,"url":"https://github.com/YiguiDing"}]},"readingTime":{"minutes":3.68,"words":1103},"filePathRelative":"交易/lightGBM学习笔记/LightGBM理论基础.md","excerpt":"","autoDesc":true}');export{y as comp,c as data};
