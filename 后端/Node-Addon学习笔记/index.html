<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.24" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.94" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Node-Addonså­¦ä¹ ç¬”è®°","image":[""],"datePublished":"2024-04-15T20:03:00.000Z","dateModified":"2024-07-23T22:25:18.000Z","author":[{"@type":"Person","name":"ä¸æ¯…æ¡‚","email":"2449695354@qq.com"}]}</script><meta property="og:url" content="https://dingdingdang.online/%E5%90%8E%E7%AB%AF/Node-Addon%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><meta property="og:site_name" content="YiguiDingçš„Blogå°ç«™"><meta property="og:title" content="Node-Addonså­¦ä¹ ç¬”è®°"><meta property="og:description" content="Node-Addonså­¦ä¹ ç¬”è®° ç›®å½• Node-Addonså­¦ä¹ ç¬”è®° ç›®å½• C++ addons Node-API node-addon-api getting-started å®‰è£…ä¾èµ– ç¼–å†™binding.gypæ–‡ä»¶ ç¼–å†™æ’ä»¶ ç¼–å†™buildè„šæœ¬ å®‰è£…ç¼–è¯‘ç¯å¢ƒ é…ç½®vscodeå®ç°ä»£ç æç¤º ç¼–è¯‘æ’ä»¶ ç¼–å†™index.js æµ‹è¯• é¢„æ„å»º å¯¹è±¡ç»§æ‰¿å…³ç³»å›¾..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-07-23T22:25:18.000Z"><meta property="article:published_time" content="2024-04-15T20:03:00.000Z"><meta property="article:modified_time" content="2024-07-23T22:25:18.000Z"><meta name="baidu-site-verification" content="codeva-PwE9Ts6nMl"><link rel="alternate" type="application/rss+xml" href="https://dingdingdang.online/rss.xml" title="YiguiDingçš„Blogå°ç«™ RSS Feed"><link rel="icon" href="/images/favicon_icon.jpg"><title>Node-Addonså­¦ä¹ ç¬”è®° | YiguiDingçš„Blogå°ç«™</title><meta name="description" content="Node-Addonså­¦ä¹ ç¬”è®° ç›®å½• Node-Addonså­¦ä¹ ç¬”è®° ç›®å½• C++ addons Node-API node-addon-api getting-started å®‰è£…ä¾èµ– ç¼–å†™binding.gypæ–‡ä»¶ ç¼–å†™æ’ä»¶ ç¼–å†™buildè„šæœ¬ å®‰è£…ç¼–è¯‘ç¯å¢ƒ é…ç½®vscodeå®ç°ä»£ç æç¤º ç¼–è¯‘æ’ä»¶ ç¼–å†™index.js æµ‹è¯• é¢„æ„å»º å¯¹è±¡ç»§æ‰¿å…³ç³»å›¾...">
    <link rel="preload" href="/assets/style-BUxT4UJq.css" as="style"><link rel="stylesheet" href="/assets/style-BUxT4UJq.css">
    <link rel="modulepreload" href="/assets/app-CeJzBNtn.js"><link rel="modulepreload" href="/assets/index.html-yTY4hBWH.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="å¸¦æˆ‘å›å®¶"><!----><!----><span class="vp-site-name">YiguiDingçš„Blogå°ç«™</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><!--]--></div><div class="vp-navbar-end"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="ä¸»é¡µ"><!--[--><i class="vp-icon fas fa-house-chimney" sizing="height"></i><!--]-->ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="ç¬”è®°"><!--[--><i class="vp-icon fas fa-pen-to-square" sizing="height"></i>ç¬”è®°<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF/" aria-label="å‰ç«¯"><!--[--><i class="vp-icon fas fa-code fa-fw" sizing="both"></i><!--]-->å‰ç«¯<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/%E5%90%8E%E7%AB%AF/" aria-label="åç«¯"><!--[--><i class="vp-icon fas fa-server fa-fw" sizing="both"></i><!--]-->åç«¯<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E7%AE%97%E6%B3%95/" aria-label="ç®—æ³•"><!--[--><i class="vp-icon fas fa-diagram-project fa-fw" sizing="both"></i><!--]-->ç®—æ³•<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E7%94%B5%E5%AD%90/" aria-label="ç”µå­"><!--[--><i class="vp-icon fas fa-bolt fa-fw" sizing="both"></i><!--]-->ç”µå­<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E6%BA%90%E7%A0%81/" aria-label="æºç "><!--[--><i class="vp-icon fas fa-code-fork fa-fw" sizing="both"></i><!--]-->æºç <!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E7%90%86%E8%AE%BA/" aria-label="ç†è®º"><!--[--><i class="vp-icon fas fa-book-bookmark fa-fw" sizing="both"></i><!--]-->ç†è®º<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E5%B7%A5%E5%85%B7/" aria-label="å·¥å…·"><!--[--><i class="vp-icon fas fa-screwdriver-wrench fa-fw" sizing="both"></i><!--]-->å·¥å…·<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E4%BA%A4%E6%98%93/" aria-label="æŠ•èµ„"><!--[--><i class="vp-icon fas fa-right-left fa-fw" sizing="both"></i><!--]-->æŠ•èµ„<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/%E9%9A%8F%E7%AC%94/" aria-label="éšç¬”"><!--[--><i class="vp-icon fas fa-note-sticky" sizing="height"></i><!--]-->éšç¬”<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/%E9%A1%B9%E7%9B%AE/" aria-label="é¡¹ç›®"><!--[--><i class="vp-icon fas fa-box" sizing="height"></i><!--]-->é¡¹ç›®<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/%E7%BD%91%E7%AB%99/%E5%8F%8B%E9%93%BE.html" aria-label="å‹é“¾"><!--[--><i class="vp-icon fas fa-user-group" sizing="height"></i><!--]-->å‹é“¾<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/%E7%BD%91%E7%AB%99/%E5%85%B3%E4%BA%8E.html" aria-label="å…³äº"><!--[--><i class="vp-icon fas fa-address-card" sizing="height"></i><!--]-->å…³äº<!----></a></div></nav><!----><!----><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-appearance-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-appearance-dropdown"><!----></div></button></div><!--[--><button type="button" class="slimsearch-button" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="slimsearch-placeholder">æœç´¢</div><div class="slimsearch-key-hints"><kbd class="slimsearch-key">Ctrl</kbd><kbd class="slimsearch-key">K</kbd></div></button><!--]--><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Alpine Linux(i SH and UTM)é…ç½®è¿‡ç¨‹è®°å½•</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Alpineå®‰è£…code Serverè¿‡ç¨‹è®°å½•</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Expresså­¦ä¹ ç¬”è®°</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Expressé…ç½®å­åŸŸåå’Œhttpsè¯ä¹¦</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Java Webå­¦ä¹ ç¬”è®°</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Javaå­¦ä¹ ç¬”è®°</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Linuxå¤‡å¿˜ç¬”è®°</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">LInuxå¤ä¹ ç¬”è®°</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Mkcertç”Ÿæˆè‡ªç­¾httpsè¯ä¹¦è¿‡ç¨‹è®°å½•</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Mysqlç¬”è®°</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Nginxæœ€ç®€å¯ç”¨é…ç½®è®°å½•</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Nginxå®ç°åå‘ä»£ç†å¹¶å¯ç”¨sslçš„æœ€ç®€é…ç½®</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Node Addonå­¦ä¹ ç¬”è®°</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/%E5%90%8E%E7%AB%AF/Node-Addon%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" aria-label="Node-Addonså­¦ä¹ ç¬”è®°"><!---->Node-Addonså­¦ä¹ ç¬”è®°<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Nodejs Npmå¤‡å¿˜ç¬”è®°</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Nodejså­¦ä¹ ç¬”è®°</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Nodejsçš„mysqlæ¨¡å—å­¦ä¹ ç¬”è®°</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Spring Boot2å­¦ä¹ ç¬”è®°</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">SQLå­¦ä¹ ç¬”è®°</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">SSMæ¡†æ¶å­¦ä¹ </span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ubuntu22.04é…ç½®è¿‡ç¨‹å‘½ä»¤è®°å½•</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ubuntu23.10ç›¸å…³é…ç½®è¿‡ç¨‹è®°å½•</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ubuntuä¸‹é…ç½®x RDPè¿‡ç¨‹è®°å½•</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ubuntué…ç½®code Serverè¿‡ç¨‹è®°å½•</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Web Rtcå­¦ä¹ ç¬”è®°</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Win10å°†exeé…ç½®æˆæœåŠ¡è¿‡ç¨‹è®°å½•</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ä½¿ç”¨letsencryptè‡ªåŠ¨æ›´æ–°httpsè¯ä¹¦</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">æ ‘è“æ´¾linuxé…ç½®</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Node-Addonså­¦ä¹ ç¬”è®°</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">ä¸æ¯…æ¡‚</span></span><span property="author" content="ä¸æ¯…æ¡‚"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2024/4/15</span><meta property="datePublished" content="2024-04-15T20:03:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 35 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT35M"></span><!----><!----></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="node-addonså­¦ä¹ ç¬”è®°" tabindex="-1"><a class="header-anchor" href="#node-addonså­¦ä¹ ç¬”è®°"><span>Node-Addonså­¦ä¹ ç¬”è®°</span></a></h1><h2 id="ç›®å½•" tabindex="-1"><a class="header-anchor" href="#ç›®å½•"><span>ç›®å½•</span></a></h2><ul><li><a href="#node-addons%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">Node-Addonså­¦ä¹ ç¬”è®°</a><ul><li><a href="#%E7%9B%AE%E5%BD%95">ç›®å½•</a></li><li><a href="#c-addons">C++ addons</a></li><li><a href="#node-api">Node-API</a></li><li><a href="#node-addon-api">node-addon-api</a></li><li><a href="#getting-started">getting-started</a><ul><li><a href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96">å®‰è£…ä¾èµ–</a></li><li><a href="#%E7%BC%96%E5%86%99bindinggyp%E6%96%87%E4%BB%B6">ç¼–å†™binding.gypæ–‡ä»¶</a></li><li><a href="#%E7%BC%96%E5%86%99%E6%8F%92%E4%BB%B6">ç¼–å†™æ’ä»¶</a></li><li><a href="#%E7%BC%96%E5%86%99build%E8%84%9A%E6%9C%AC">ç¼–å†™buildè„šæœ¬</a></li><li><a href="#%E5%AE%89%E8%A3%85%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83">å®‰è£…ç¼–è¯‘ç¯å¢ƒ</a></li><li><a href="#%E9%85%8D%E7%BD%AEvscode%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81%E6%8F%90%E7%A4%BA">é…ç½®vscodeå®ç°ä»£ç æç¤º</a></li><li><a href="#%E7%BC%96%E8%AF%91%E6%8F%92%E4%BB%B6">ç¼–è¯‘æ’ä»¶</a></li><li><a href="#%E7%BC%96%E5%86%99indexjs">ç¼–å†™index.js</a></li><li><a href="#%E6%B5%8B%E8%AF%95">æµ‹è¯•</a></li><li><a href="#%E9%A2%84%E6%9E%84%E5%BB%BA">é¢„æ„å»º</a></li></ul></li><li><a href="#%E5%AF%B9%E8%B1%A1%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%E5%9B%BE">å¯¹è±¡ç»§æ‰¿å…³ç³»å›¾</a></li><li><a href="#addon%E6%8F%92%E4%BB%B6%E7%B1%BB">addonæ’ä»¶ç±»</a></li><li><a href="#function%E5%87%BD%E6%95%B0">functionå‡½æ•°</a><ul><li><a href="#%E7%A4%BA%E4%BE%8B">ç¤ºä¾‹</a></li><li><a href="#%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89">ç±»å‹å®šä¹‰</a><ul><li><a href="#napifunctionvoidcallback">Napi<i class="vp-icon fas fa-Function" sizing="height"></i>VoidCallback</a></li><li><a href="#napifunctioncallback">Napi<i class="vp-icon fas fa-Function" sizing="height"></i>Callback</a></li></ul></li><li><a href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">æ„é€ å‡½æ•°</a></li><li><a href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0-1">æ„é€ å‡½æ•°</a></li><li><a href="#new">New</a></li><li><a href="#new%E5%8F%82%E6%95%B0%E6%9C%80%E5%A4%9A%E7%9A%84%E9%87%8D%E8%BD%BD">Newï¼ˆå‚æ•°æœ€å¤šçš„é‡è½½ï¼‰</a></li><li><a href="#call">Call</a></li><li><a href="#call-1">Call</a></li><li><a href="#makecallback%E5%BC%82%E6%AD%A5%E5%9B%9E%E8%B0%83%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0">MakeCallbackå¼‚æ­¥å›è°ƒæ‰§è¡Œå‡½æ•°</a></li><li><a href="#operator%E6%93%8D%E4%BD%9C%E7%AC%A6%E9%87%8D%E8%BD%BD">operatoræ“ä½œç¬¦é‡è½½</a></li><li><a href="#%E6%A1%88%E4%BE%8Bfunction_example">æ¡ˆä¾‹ï¼šfunction_example</a></li><li><a href="#%E6%A1%88%E4%BE%8Bfunction_arguments%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0">æ¡ˆä¾‹ï¼šfunction_argumentså‡½æ•°å‚æ•°</a></li><li><a href="#%E6%A1%88%E4%BE%8Bcallback_%E5%87%BD%E6%95%B0%E5%9B%9E%E8%B0%83">æ¡ˆä¾‹ï¼šcallback_å‡½æ•°å›è°ƒ</a></li><li><a href="#%E6%A1%88%E4%BE%8Bfactory_of_function">æ¡ˆä¾‹ï¼šFactory_Of_function</a></li></ul></li><li><a href="#object%E5%AF%B9%E8%B1%A1">Objectå¯¹è±¡</a><ul><li><a href="#%E7%A4%BA%E4%BE%8B-1">ç¤ºä¾‹</a></li><li><a href="#%E6%96%B9%E6%B3%95">æ–¹æ³•</a><ul><li><a href="#%E7%A9%BA%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">ç©ºæ„é€ å‡½æ•°</a></li><li><a href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0-2">æ„é€ å‡½æ•°</a></li><li><a href="#new-1">New()</a></li><li><a href="#set">Set()</a></li><li><a href="#delete">Delete()</a></li><li><a href="#get">Get()</a></li><li><a href="#has">Has()</a></li><li><a href="#instanceof">InstanceOf()</a></li><li><a href="#addfinalizer">AddFinalizer()</a></li><li><a href="#addfinalizer-1">AddFinalizer()</a></li><li><a href="#getpropertynames">GetPropertyNames()</a></li><li><a href="#hasownproperty">HasOwnProperty()</a></li><li><a href="#defineproperty">DefineProperty()</a></li><li><a href="#defineproperties">DefineProperties()</a></li><li><a href="#freeze">Freeze()</a></li><li><a href="#seal">Seal()</a></li><li><a href="#operator">operator</a></li><li><a href="#begin">begin()</a></li><li><a href="#end">end()</a></li></ul></li><li><a href="#%E8%BF%AD%E4%BB%A3%E5%99%A8">è¿­ä»£å™¨</a></li><li><a href="#%E5%B8%B8%E9%87%8F%E8%BF%AD%E4%BB%A3%E5%99%A8">å¸¸é‡è¿­ä»£å™¨</a><ul><li><a href="#operator-1"><code>operator++()</code></a></li><li><a href="#operator-2"><code>operator==</code></a></li><li><a href="#operator-3"><code>operator!=</code></a></li><li><a href="#operator-4"><code>operator*()</code></a></li><li><a href="#%E7%A4%BA%E4%BE%8B-2">ç¤ºä¾‹</a></li></ul></li><li><a href="#%E9%9D%9E%E5%B8%B8%E9%87%8F%E8%BF%AD%E4%BB%A3%E5%99%A8">éå¸¸é‡è¿­ä»£å™¨</a><ul><li><a href="#operator-5"><code>operator++()</code></a></li><li><a href="#operator-6"><code>operator==</code></a></li><li><a href="#operator-7"><code>operator!=</code></a></li><li><a href="#operator-8"><code>operator*()</code></a></li><li><a href="#%E7%A4%BA%E4%BE%8B-3">ç¤ºä¾‹</a></li></ul></li><li><a href="#%E6%A1%88%E4%BE%8Bfactory_of_object">æ¡ˆä¾‹ï¼šFactory_Of_Object</a></li></ul></li><li><a href="#objectwrap">ObjectWrap</a><ul><li><a href="#%E6%A1%88%E4%BE%8Bobjectwrap">æ¡ˆä¾‹ï¼šobjectWrap</a></li><li><a href="#%E6%A1%88%E4%BE%8Bfactory_of_objectwrap">æ¡ˆä¾‹ï¼šfactory_of_objectWrap</a></li><li><a href="#%E6%A1%88%E4%BE%8Bpassing_wrapped_obj_to_native">æ¡ˆä¾‹ï¼špassing_wrapped_obj_to_native</a></li></ul></li><li><a href="#arraybuffer">ArrayBuffer</a><ul><li><a href="#new%E5%AD%97%E8%8A%82%E9%95%BF%E5%BA%A6"><code>New(å­—èŠ‚é•¿åº¦)</code></a></li><li><a href="#new%E5%A4%96%E9%83%A8%E6%95%B0%E6%8D%AE"><code>New(å¤–éƒ¨æ•°æ®)</code></a></li><li><a href="#new%E5%B8%A6%E6%9E%90%E6%9E%84%E5%9B%9E%E8%B0%83"><code>Newï¼ˆå¸¦ææ„å›è°ƒï¼‰</code></a></li><li><a href="#new%E5%B8%A6%E6%9E%90%E6%9E%84%E5%9B%9E%E8%B0%83%E5%92%8C%E6%8F%90%E7%A4%BA"><code>Newï¼ˆå¸¦ææ„å›è°ƒå’Œæç¤ºï¼‰</code></a></li><li><a href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0-3"><code>æ„é€ å‡½æ•°()</code></a></li><li><a href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0envarraybuffer"><code>æ„é€ å‡½æ•°(env,arrayBuffer)</code></a></li><li><a href="#bytelength"><code>ByteLength()</code></a></li><li><a href="#void-data"><code>void* Data()</code></a></li><li><a href="#void-detach"><code>void Detach()</code></a></li><li><a href="#bool-isdetached"><code>bool IsDetached()</code></a></li><li><a href="#%E6%A1%88%E4%BE%8Bpassing_array_buffer_to_native">æ¡ˆä¾‹ï¼špassing_array_buffer_to_native</a></li></ul></li><li><a href="#typedarray">TypedArray</a><ul><li><a href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0-4"><code>æ„é€ å‡½æ•°()</code></a></li><li><a href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0envtypedarray"><code>æ„é€ å‡½æ•°(env,typedArray)</code></a></li><li><a href="#napi_typedarray_type-typedarraytype"><code>napi_typedarray_type TypedArrayType()</code></a></li><li><a href="#arraybuffer-1"><code>ArrayBuffer()</code></a></li><li><a href="#uint8_t-elementsize"><code>uint8_t ElementSize()</code></a></li><li><a href="#size_t-elementlength"><code>size_t ElementLength()</code></a></li><li><a href="#size_t-byteoffset"><code>size_t ByteOffset()</code></a></li><li><a href="#size_t-bytelength"><code>size_t ByteLength()</code></a></li><li><a href="#%E6%A1%88%E4%BE%8Bpassing_typed_array_to_native">æ¡ˆä¾‹ï¼špassing_typed_array_to_native</a></li></ul></li><li><a href="#reference">Reference</a><ul><li><a href="#functionreference">FunctionReference</a><ul><li><a href="#%E6%A1%88%E4%BE%8Bfunction_reference">æ¡ˆä¾‹ï¼šfunction_reference</a></li></ul></li></ul></li><li><a href="#asyncworker">AsyncWorker</a><ul><li><a href="#%E4%BD%9C%E7%94%A8">ä½œç”¨</a></li><li><a href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">ä½¿ç”¨åœºæ™¯</a></li><li><a href="#queue-%E6%96%B9%E6%B3%95"><code>Queue</code> æ–¹æ³•</a></li><li><a href="#execute-%E5%92%8C-onok-%E7%9A%84%E9%87%8D%E5%86%99"><code>Execute</code> å’Œ <code>OnOK</code> çš„é‡å†™</a></li><li><a href="#%E7%BA%BF%E7%A8%8B%E6%89%A7%E8%A1%8C%E7%8E%AF%E5%A2%83">çº¿ç¨‹æ‰§è¡Œç¯å¢ƒ</a></li><li><a href="#%E5%A6%82%E4%BD%95%E5%AE%89%E5%85%A8%E8%B0%83%E7%94%A8-javascript-%E5%87%BD%E6%95%B0">å¦‚ä½•å®‰å…¨è°ƒç”¨ JavaScript å‡½æ•°</a></li><li><a href="#%E5%B7%A5%E4%BD%9C%E7%BA%BF%E7%A8%8B%E6%B1%A0">å·¥ä½œçº¿ç¨‹æ± </a></li><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88-execute-%E6%96%B9%E6%B3%95%E4%B8%8D%E4%BC%9A%E4%BA%92%E7%9B%B8%E9%98%BB%E5%A1%9E">ä¸ºä»€ä¹ˆ <code>Execute</code> æ–¹æ³•ä¸ä¼šäº’ç›¸é˜»å¡</a></li><li><a href="#%E6%A1%88%E4%BE%8Bmy_async_worker">æ¡ˆä¾‹ï¼šmy_async_worker</a></li><li><a href="#%E6%A1%88%E4%BE%8Basync_worker_call_js_function">æ¡ˆä¾‹ï¼šasync_worker_call_js_function</a></li><li><a href="#%E6%A1%88%E4%BE%8Basync_worker_promise">æ¡ˆä¾‹ï¼šasync_worker_promise</a></li></ul></li><li><a href="#%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E5%87%BD%E6%95%B0threadsafe_function">çº¿ç¨‹å®‰å…¨å‡½æ•°threadsafe_function</a><ul><li><a href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0-5"><code>æ„é€ å‡½æ•°()</code></a></li><li><a href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0tsfn"><code>æ„é€ å‡½æ•°(tsfn)</code></a></li><li><a href="#new-2"><code>New(...)</code></a></li><li><a href="#napi_status-acquire"><code>napi_status Acquire()</code></a></li><li><a href="#napi_status-release"><code>napi_status Release()</code></a></li><li><a href="#napi_status-abort"><code>napi_status Abort()</code></a></li><li><a href="#napi_status-blockingcallnonblockingcall"><code>napi_status BlockingCall()/NonBlockingCall()</code></a></li><li><a href="#%E6%A1%88%E4%BE%8Bthread_safe_function_demo">æ¡ˆä¾‹ï¼šthread_safe_function_demo</a></li></ul></li></ul></li></ul><h2 id="c-addons" tabindex="-1"><a class="header-anchor" href="#c-addons"><span>C++ addons</span></a></h2><p><strong>C++æ’ä»¶(C++ addons)</strong></p><ul><li><code>C++æ’ä»¶(C++ addons)</code>æ˜¯ç”¨C++å†™çš„åŠ¨æ€é“¾æ¥åº“ã€‚</li><li>å¯ä»¥ä½¿ç”¨<code>require()</code>å‡½æ•°ï¼ŒåƒåŠ è½½æ™®é€š<code>nodejs modules</code>ä¸€æ ·å¯ä»¥åŠ è½½<code>C++æ’ä»¶</code>.</li><li>æ’ä»¶(Addons)æä¾›äº†JavaScript å’Œ C/C++ ä¹‹é—´çš„æ¥å£.</li></ul><p><strong>æ’ä»¶ï¼ˆaddonsï¼‰çš„ä¸‰ç§å®ç°æ–¹å¼</strong></p><ul><li><code>Node-API</code>(æ¨èçš„æ–¹å¼)</li><li><code>nan</code>ï¼ˆæ—§æ¥å£ï¼‰</li><li>ç›´æ¥ä½¿ç”¨å†…éƒ¨ V8ã€libuv å’Œ <code>Node.js libraries</code></li></ul><h2 id="node-api" tabindex="-1"><a class="header-anchor" href="#node-api"><span>Node-API</span></a></h2><p><strong>Node-APIç®€ä»‹</strong></p><ul><li>ä»¥å‰ç§°ä¸º <code>N-API</code></li><li>æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºnodejsåŸç”Ÿæ’ä»¶çš„æ¥å£ï¼ˆan API for building native Addons.ï¼‰</li><li>ç‹¬ç«‹äºåº•å±‚ JavaScript è¿è¡Œæ—¶ï¼ˆä¾‹å¦‚ V8ï¼‰ï¼Œå¹¶ä½œä¸º Node.js æœ¬èº«çš„ä¸€éƒ¨åˆ†è¿›è¡Œç»´æŠ¤ã€‚</li><li>è¯¥ API å°†åœ¨ Node.js ç‰ˆæœ¬ä¹‹é—´ä¿æŒç¨³å®š <ul><li>æ’ä»¶ä¸åº•å±‚ JavaScript å¼•æ“çš„æ›´æ”¹éš”ç¦»å¼€æ¥</li><li>å…è®¸ä¸ºä¸€ä¸ªä¸»è¦ç‰ˆæœ¬ç¼–è¯‘çš„æ¨¡å—å¯ä»¥åœ¨ Node.js çš„æ›´é«˜ä¸»è¦ç‰ˆæœ¬ä¸Šè¿è¡Œï¼Œè€Œæ— éœ€é‡æ–°ç¼–è¯‘ã€‚</li></ul></li></ul><p><strong>Node-APIç‰¹ç‚¹</strong></p><ul><li><code>Node-API</code> å…¬å¼€çš„ API é€šå¸¸ç”¨äº<strong>åˆ›å»ºå’Œæ“ä½œ JavaScript å€¼</strong>ã€‚</li><li>æ‰€æœ‰ <code>Node-API</code> è°ƒç”¨éƒ½ä¼š<strong>è¿”å›ç±»å‹ä¸ºnapi_statusçš„çŠ¶æ€ç </strong>ã€‚è¡¨ç¤ºè°ƒç”¨æˆåŠŸæˆ–å¤±è´¥ã€‚</li><li>API çš„<strong>è¿”å›å€¼</strong>é€šè¿‡<strong>ä¼ é€’è¾“å‡ºå‚æ•°è·å–</strong></li><li>æ‰€æœ‰ JavaScript å€¼éƒ½è¢«æŠ½è±¡ä¸ºåä¸º<code>napi_value</code>çš„ä¸é€æ˜ç±»å‹ã€‚</li><li>å¦‚æœå‡ºç°é”™è¯¯çŠ¶æ€ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨<code>napi_get_last_error_info()</code>è·å–é™„åŠ ä¿¡æ¯ã€‚</li></ul><h2 id="node-addon-api" tabindex="-1"><a class="header-anchor" href="#node-addon-api"><span>node-addon-api</span></a></h2><p><strong><code>node-addon-api</code>å’Œ<code>Node-API</code>çš„å…³è”</strong></p><ul><li><code>Node-API</code> æ˜¯ä¸€ç§ <code>C API</code>ï¼Œå¯ç¡®ä¿è·¨ä¸åŒ<code>Node.js</code>ç‰ˆæœ¬å’Œä¸åŒç¼–è¯‘å™¨çº§åˆ«çš„ ABI(åº”ç”¨ç¨‹åºäºŒè¿›åˆ¶æ¥å£) ç¨³å®šæ€§ã€‚</li><li><code>node-addon-api</code> æ˜¯ <code>Node-API</code> çš„<code>C++</code>å°è£…ï¼ˆwrapper moduleï¼‰ å› ä¸º<code>C++</code>APIæ›´å®¹æ˜“ä½¿ç”¨ã€‚</li><li><code>node-addon-api</code> æ˜¯ç¼–å†™è°ƒç”¨ <code>Node-API</code> çš„ä»£ç çš„æ›´æœ‰æ•ˆæ–¹æ³•ã€‚</li><li>è¯¥å°è£…æä¾›äº†<strong>å¯å†…è”</strong>çš„ C++ API <ul><li><strong>å¯å†…è”(inlinable)</strong>: å†…è”å±•å¼€æ˜¯ç¼–è¯‘å™¨çš„ä¸€ä¸ªä¼˜åŒ–æŠ€æœ¯ï¼Œå…¶ä¸­å‡½æ•°ä½“è¢«ç›´æ¥æ’å…¥åˆ°æ¯ä¸€ä¸ªè°ƒç”¨è¯¥å‡½æ•°çš„åœ°æ–¹ï¼Œè€Œä¸æ˜¯è¿›è¡Œå¸¸è§„çš„å‡½æ•°è°ƒç”¨ã€‚è¿™æ ·åšå¯ä»¥æ¶ˆé™¤å‡½æ•°è°ƒç”¨çš„å¼€é”€ï¼Œå¹¶å¯èƒ½æ”¹å–„æ‰§è¡Œé€Ÿåº¦ï¼Œç‰¹åˆ«æ˜¯å½“å‡½æ•°ä½“å¾ˆå°å¹¶ä¸”é¢‘ç¹è¢«è°ƒç”¨æ—¶ã€‚<br> ä½¿ç”¨ <code>node-addon-api</code> ç¼–è¯‘æ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶å°†å–å†³äº Node.js å¯¼å‡ºçš„åŸºäº Node-API C çš„å‡½æ•°çš„ç¬¦å·ã€‚</li></ul></li></ul><p><strong><code>node-addon-api</code>å’Œ<code>Node-API</code>çš„æ¡ˆä¾‹ä»£ç </strong></p><p>ä½¿ç”¨<code>node-addon-api</code>ï¼ˆc++æ¥å£ï¼‰åˆ›å»ºå¯¹è±¡</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object obj </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;foo&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;bar&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨<code>Node-API</code>ï¼ˆcæ¥å£ï¼‰åˆ›å»ºå¯¹è±¡</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-c"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">napi_status status</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">napi_value object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">status </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> napi_create_object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">status </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">!=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> napi_ok</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">  napi_throw_error</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> ...</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">status </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> napi_create_string_utf8</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;bar&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> NAPI_AUTO_LENGTH</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">status </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">!=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> napi_ok</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">  napi_throw_error</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> ...</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">status </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> napi_set_named_property</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;foo&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">status </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">!=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> napi_ok</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">  napi_throw_error</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> ...</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="getting-started" tabindex="-1"><a class="header-anchor" href="#getting-started"><span>getting-started</span></a></h2><h3 id="å®‰è£…ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#å®‰è£…ä¾èµ–"><span>å®‰è£…ä¾èµ–</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"># åˆå§‹åŒ–é¡¹ç›®</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">npm</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> init</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> -y</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"># å®‰è£…</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">npm</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> i</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> node-addon-api</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> bindings</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"># å…¨å±€å®‰è£…æ„å»ºå·¥å…·</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">npm</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> i</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> node-gyp</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> -g</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç¼–å†™binding-gypæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#ç¼–å†™binding-gypæ–‡ä»¶"><span>ç¼–å†™binding.gypæ–‡ä»¶</span></a></h3><ul><li>node-gypæ˜¯ç¼–å†™Node.jsæ’ä»¶çš„é»˜è®¤æ ‡å‡†æ„å»ºå·¥å…·ã€‚</li><li>åŸºäºGoogleçš„gypæ„å»ºå·¥å…·ï¼Œè¯¥å·¥å…·æŠ½è±¡äº†è®¸å¤šä¸è·¨å¹³å°æ„å»ºç›¸å…³çš„ç¹çé—®é¢˜ã€‚</li><li>node-gypä½¿ç”¨ä¸€ä¸ªåä¸º<code>binding.gyp</code>çš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä½äºæ’ä»¶é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ã€‚</li><li><code>binding.gyp</code>æ–‡ä»¶åŒ…å«æ‰€æœ‰æ„å»ºé…ç½®ï¼Œä½¿ç”¨ç±»ä¼¼JSONçš„è¯­æ³•è¿›è¡Œç»„ç»‡ã€‚</li><li>å¦‚ä½•ç¼–å†™ï¼Ÿ <ul><li>æŒ‡å®šæºæ–‡ä»¶ <ul><li>target_name å¿…é¡»è®¾ç½®ä¸ºä¸æ’ä»¶åˆå§‹åŒ–ä»£ç ä¸­çš„å€¼ç›¸åŒ</li><li>sources æºæ–‡ä»¶</li></ul></li><li>å°†node-addon-apiä½œä¸ºä¾èµ–é¡¹å¼•ç”¨ï¼Œæœ‰ä¸‰ç§å†™æ³• <ol><li><code>node_addon_api</code>å…³é—­ C++ å¼‚å¸¸å¤„ç†åŠŸèƒ½</li><li><code>node_addon_api_except</code>å¯ç”¨ C++ å¼‚å¸¸å¤„ç†åŠŸèƒ½</li><li><code>node_addon_api_maybe</code> ä¸å¯ç”¨C++å¼‚å¸¸å¤„ç†åŠŸèƒ½ï¼Œä½†å¯ç”¨node-addon-apiçš„å®‰å…¨APIç±»å‹ä¿æŠ¤ï¼Œä»¥ç¡®ä¿æ­£ç¡®çš„å¼‚å¸¸å¤„ç†æ¨¡å¼</li></ol><ul><li>è¯´æ˜ï¼š <ul><li>åº•å±‚çš„ABIç¨³å®šçš„C-API å¹¶ä¸æŠ›å‡ºæˆ–å¤„ç† C++ å¼‚å¸¸ï¼Œ</li><li>ä½† Node-API çš„ C++ åŒ…è£…å™¨ç±»å¯ä»¥é€‰æ‹©æ€§åœ°é›†æˆ C++ å’Œ JavaScript å¼‚å¸¸å¤„ç†ã€‚</li></ul></li></ul></li></ul></li></ul><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-json"><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">// binding.gyp</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">  &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#9CDCFE;">targets</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> [</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">      &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#9CDCFE;">target_name</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;hello_world&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">      &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#9CDCFE;">sources</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> [</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;src/hello_world.cc&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">],</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">      &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#9CDCFE;">include_dirs</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> [</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">        // å¯ä»¥ä¸å†™</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">        // &quot;&lt;!@(node -p \&quot;require(&#39;node-addon-api&#39;).include\&quot;)&quot;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">      ],</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">      &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#9CDCFE;">dependencies</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> [</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">       // å…³é—­ C++ å¼‚å¸¸å¤„ç†åŠŸèƒ½</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">       &quot;&lt;!(node -p </span><span style="--shiki-light:#EA76CB;--shiki-dark:#D7BA7D;">\&quot;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">require(&#39;node-addon-api&#39;).targets</span><span style="--shiki-light:#EA76CB;--shiki-dark:#D7BA7D;">\&quot;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">):node_addon_api&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">       // æˆ– å¯ç”¨ C++ å¼‚å¸¸å¤„ç†åŠŸèƒ½</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">       &quot;&lt;!(node -p </span><span style="--shiki-light:#EA76CB;--shiki-dark:#D7BA7D;">\&quot;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">require(&#39;node-addon-api&#39;).targets</span><span style="--shiki-light:#EA76CB;--shiki-dark:#D7BA7D;">\&quot;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">):node_addon_api_except&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">       // æˆ– ä¸å¯ç”¨ C++ å¼‚å¸¸,ä½†å¯ç”¨ node-addon-api çš„å®‰å…¨ API ç±»å‹å®ˆå«ï¼Œä»¥ç¡®ä¿æ­£ç¡®çš„å¼‚å¸¸å¤„ç†æ¨¡å¼ã€‚</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">       &quot;&lt;!(node -p </span><span style="--shiki-light:#EA76CB;--shiki-dark:#D7BA7D;">\&quot;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">require(&#39;node-addon-api&#39;).targets</span><span style="--shiki-light:#EA76CB;--shiki-dark:#D7BA7D;">\&quot;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">):node_addon_api_maybe&quot;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">     ]</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  ],</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ï¼Œ<code>node -p &quot;require(&#39;node-addon-api&#39;).targets&quot;</code> æ˜¯ä¸€ä¸ª Node.js å‘½ä»¤è¡Œè¡¨è¾¾å¼ï¼Œç”¨äºä» node-addon-api æ¨¡å—ä¸­è·å–æ­£ç¡®çš„ç›®æ ‡ä¾èµ–åç§°ã€‚</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"># æ‰§è¡Œ:</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">$</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> node</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> -p</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;require(&#39;node-addon-api&#39;).targets&quot;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"># è¾“å‡ºï¼š</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">node_modules\node-addon-api\node_addon_api.gyp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¯¹macOSï¼ˆOSXï¼‰æ”¯æŒ</strong></p><div class="language-gyp line-numbers-mode" data-highlighter="shiki" data-ext="gyp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-gyp"><span class="line"><span>&#39;conditions&#39;: [</span></span>
<span class="line"><span>  [&#39;OS==&quot;mac&quot;&#39;, {</span></span>
<span class="line"><span>      &#39;cflags+&#39;: [&#39;-fvisibility=hidden&#39;],</span></span>
<span class="line"><span>      &#39;xcode_settings&#39;: {</span></span>
<span class="line"><span>        &#39;GCC_SYMBOLS_PRIVATE_EXTERN&#39;: &#39;YES&#39;, # -fvisibility=hidden</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>  }]</span></span>
<span class="line"><span>]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç¼–å†™æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#ç¼–å†™æ’ä»¶"><span>ç¼–å†™æ’ä»¶</span></a></h3><ol><li>åŒ…å«<code>napi.h</code><ul><li>åœ¨åŸç”Ÿæ¨¡å—ä»£ç ä¸­åŒ…å« <code>napi.h</code> æ˜¯ä½¿ç”¨ <code>Node-API</code> çš„å…³é”®æ­¥éª¤ã€‚</li><li>ä¸ºäº†ç¡®ä¿ä»…ä½¿ç”¨ ABIï¼ˆåº”ç”¨ç¨‹åºäºŒè¿›åˆ¶æ¥å£ï¼‰ç¨³å®šçš„ APIï¼Œæ‚¨ä¸åº”åŒ…å« <code>node.h</code>ã€<code>nan.h</code> æˆ– <code>v8.h</code>ï¼Œ</li><li>å› ä¸ºè¿™äº›å¤´æ–‡ä»¶å¯èƒ½åŒ…å«éç¨³å®šçš„ V8 æˆ– Node.js ç‰¹å®š APIã€‚</li></ul></li><li>ç¼–å†™å…¥å£ <ul><li>ç¼–å†™<strong>ä»£ç å…¥å£ç‚¹</strong>ï¼ˆentry-pointï¼‰</li><li>å®šä¹‰<strong>æ’ä»¶å…¥å£ç‚¹</strong>ï¼ˆdefines the entry-point for the Node addonï¼‰</li></ul></li></ol><p><code>src/hello_world.cc</code></p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">// å®šä¹‰å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">// function hello(){ return &quot;world&quot; }</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">String</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> hello</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(),</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;world&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">/**</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  ä»£ç å…¥å£ç‚¹ã€‚</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  è¿™é‡Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œ</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    + ç¬¬ä¸€ä¸ªæ˜¯è¡¨ç¤º JavaScript è¿è¡Œæ—¶çš„ä¸€ä¸ªç‹¬ç«‹å®ä¾‹çš„ç¯å¢ƒï¼Œ</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    + ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯¼å‡ºå¯¹è±¡ï¼Œå’Œjsæ–‡ä»¶ä¸­çš„module.exportsä½œç”¨ç›¸åŒã€‚</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">        + å¯ä»¥å‘ä¼ å…¥çš„exportså¯¹è±¡æ·»åŠ å±æ€§ï¼Œæˆ–è€…åˆ›å»ºä½ è‡ªå·±çš„exportså¯¹è±¡ã€‚</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">        + æ— è®ºå“ªç§æƒ…å†µï¼Œä½ éƒ½å¿…é¡»è¿”å›è¿™ä¸ªå¯¹è±¡ï¼Œè¿™æ ·å½“ä»Initå‡½æ•°è¿”å›æ—¶ï¼Œè¿™ä¸ªå¯¹è±¡å°†è¢«ç”¨ä½œæ¨¡å—çš„å¯¼å‡ºã€‚</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">*/</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // exports[&#39;hello&#39;] = hello</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">  exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Set</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;hello&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> hello</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">/**</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  Nodeæ’ä»¶å…¥å£ç‚¹ï¼Œå‘Šè¯‰Nodeä¸€æ—¦åº“è¢«åŠ è½½åˆ°æ´»åŠ¨å†…å­˜ä¸­ååº”è¯¥å»å“ªé‡Œã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»ä¸æˆ‘ä»¬åœ¨binding.gypä¸­å®šä¹‰çš„â€œtargetâ€ç›¸ä¸€è‡´ã€‚</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    + ä½¿ç”¨`NODE_GYP_MODULE_NAME`å¯ä»¥ç¡®ä¿å‚æ•°æ­£ç¡®ï¼Œ</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    + åªè¦æ¨¡å—æ˜¯ä½¿ç”¨node-gypæ„å»ºçš„ï¼ˆè¿™æ˜¯æ„å»ºæ¨¡å—çš„å¸¸ç”¨æ–¹å¼ï¼‰ã€‚</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  ç¬¬äºŒä¸ªå‚æ•°æŒ‡å‘è¦è°ƒç”¨çš„å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°ä¸èƒ½æ˜¯å‘½åç©ºé—´å†…çš„ã€‚</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">*/</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NODE_API_MODULE</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">NODE_GYP_MODULE_NAME</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç¼–å†™buildè„šæœ¬" tabindex="-1"><a class="header-anchor" href="#ç¼–å†™buildè„šæœ¬"><span>ç¼–å†™buildè„šæœ¬</span></a></h3><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-json"><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">// package.json</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">  &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#9CDCFE;">main</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;index.js&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">  &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#9CDCFE;">scripts</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#9CDCFE;">build</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;node-gyp configure &amp;&amp; node-gyp build&quot;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  },</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">  &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#9CDCFE;">dependencies</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#9CDCFE;">bindings</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;^1.5.0&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">    &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#9CDCFE;">node-addon-api</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;*&quot;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®‰è£…ç¼–è¯‘ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#å®‰è£…ç¼–è¯‘ç¯å¢ƒ"><span>å®‰è£…ç¼–è¯‘ç¯å¢ƒ</span></a></h3><p><strong>å®‰è£…Python</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"># 1.è§£å‹å®‰è£…miniConda</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"># 2.ç„¶ååœ¨bashä¸­æ‰§è¡Œï¼š</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">$</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> /d/app/miniconda3/Scripts/conda</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> init</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> bash</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å®‰è£…VS</strong></p><ul><li><img src="/assets/image-DbP2oxL4.png" alt="Alt text"></li><li><img src="/assets/image-1-BwzsEEIh.png" alt="Alt text"></li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"># å¦åˆ™æŠ¥é”™</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">gyp</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> ERR!</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> find</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> VS</span><span style="--shiki-light:#4C4F69;--shiki-dark:#569CD6;"> **************************************************************</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">gyp</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> ERR!</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> find</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> VS</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> You</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> need</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> to</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> install</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> the</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> latest</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> version</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> of</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> Visual</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> Studio</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">gyp</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> ERR!</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> find</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> VS</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> including</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> the</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;Desktop development with C++&quot;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> workload.</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">gyp</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> ERR!</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> find</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> VS</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> For</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> more</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> information</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> consult</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> the</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> documentation</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> at:</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">gyp</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> ERR!</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> find</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> VS</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> https://github.com/nodejs/node-gyp#on-windows</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">gyp</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> ERR!</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> find</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> VS</span><span style="--shiki-light:#4C4F69;--shiki-dark:#569CD6;"> **************************************************************</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é…ç½®vscodeå®ç°ä»£ç æç¤º" tabindex="-1"><a class="header-anchor" href="#é…ç½®vscodeå®ç°ä»£ç æç¤º"><span>é…ç½®vscodeå®ç°ä»£ç æç¤º</span></a></h3><ol><li>å®‰è£…<code>c\c++</code>æ’ä»¶</li><li>ç¼–å†™<code>.vscode/c_cpp_properties.json</code>ï¼Œä¸ºäº†åœ¨vscodeæ”¯æŒä»£ç æç¤º</li></ol><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-json"><span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;configurations&quot;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">: </span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">   &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#9CDCFE;">name</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;Win32&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">   &quot;</span><span style="--shiki-light:#1E66F5;--shiki-dark:#9CDCFE;">includePath</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9CDCFE;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> [</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">      // for source code</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">      &quot;${workspaceFolder}/src/**&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">      // for napi.h</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">      &quot;${workspaceFolder}/node_modules/node-addon-api/**&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">      // for node_api.h</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">      &quot;${HOME}/AppData/Local/node-gyp/**&quot;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">   ],</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç¼–è¯‘æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#ç¼–è¯‘æ’ä»¶"><span>ç¼–è¯‘æ’ä»¶</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">npm</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> run</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> build</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="ç¼–å†™index-js" tabindex="-1"><a class="header-anchor" href="#ç¼–å†™index-js"><span>ç¼–å†™index.js</span></a></h3><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-js"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">let</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> addon</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;bindings&#39;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">)(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;hello_world&#39;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#179299;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">addon</span><span style="--shiki-light:#179299;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">hello</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">())</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // &#39;world&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•"><span>æµ‹è¯•</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">$</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> node</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> index.js</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">world</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é¢„æ„å»º" tabindex="-1"><a class="header-anchor" href="#é¢„æ„å»º"><span>é¢„æ„å»º</span></a></h3><p>é¢„æ„å»ºå·¥å…·</p><ul><li>åŸç”Ÿæ’ä»¶çš„åˆ†å‘ä¸å…¶å®ç°åŒæ ·é‡è¦ã€‚</li><li>ä¸ºäº†å®‰è£…ä¸€ä¸ªåŸç”Ÿæ’ä»¶ï¼Œç¡®ä¿æ‰€æœ‰å¿…è¦çš„ä¾èµ–é¡¹éƒ½å·²å®‰è£…å¹¶é…ç½®æ­£ç¡®è‡³å…³é‡è¦ã€‚</li><li>å½“ç»ˆç«¯ç”¨æˆ·é€šè¿‡ npm install å‘½ä»¤å®‰è£…æ’ä»¶æ—¶ï¼Œä»–ä»¬éœ€è¦ç¼–è¯‘è¿™ä¸ªæ’ä»¶ï¼Œè€Œè¿™åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ã€‚</li><li>ä¸ºäº†é¿å…ç¼–è¯‘è¿‡ç¨‹ï¼Œå¯ä»¥ä¸ºä¸åŒçš„å¹³å°å’Œæ¶æ„åˆ†å‘é¢„æ„å»ºçš„åŸç”Ÿæ’ä»¶ã€‚</li><li>é¢„æ„å»ºå·¥å…·å¯ä»¥å¸®åŠ©åˆ›å»ºå’Œåˆ†å‘åŸç”Ÿæ’ä»¶çš„é¢„æ„å»ºå½¢å¼ã€‚</li></ul><p>ä»¥ä¸‹åˆ—å‡ºäº†ä¸ Node-API å…¼å®¹çš„å·²çŸ¥å·¥å…·ï¼š</p><ul><li>node-pre-gyp</li><li>prebuild</li><li>prebuildify</li></ul><p>è¿™äº›å·¥å…·å…è®¸å¼€å‘è€…ä¸ºå¤šç§å¹³å°å’Œæ¶æ„é¢„å…ˆæ„å»ºä»–ä»¬çš„åŸç”Ÿæ’ä»¶ï¼Œå¹¶å°†å®ƒä»¬ä¸ npm åŒ…ä¸€èµ·åˆ†å‘ã€‚<br> è¿™æ ·ï¼Œç»ˆç«¯ç”¨æˆ·åœ¨å®‰è£…æ’ä»¶æ—¶å°±ä¸éœ€è¦ç¼–è¯‘ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨é¢„æ„å»ºçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚<br> è¿™å¯¹äºç®€åŒ–æ’ä»¶çš„åˆ†å‘å’Œå®‰è£…è¿‡ç¨‹éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯å¯¹äºé‚£äº›æ²¡æœ‰ç¼–è¯‘ç¯å¢ƒæˆ–ä¸æƒ³å¤„ç†ç¼–è¯‘é—®é¢˜çš„ç”¨æˆ·ã€‚</p><h2 id="å¯¹è±¡ç»§æ‰¿å…³ç³»å›¾" tabindex="-1"><a class="header-anchor" href="#å¯¹è±¡ç»§æ‰¿å…³ç³»å›¾"><span>å¯¹è±¡ç»§æ‰¿å…³ç³»å›¾</span></a></h2><blockquote><p><a href="https://github.com/nodejs/node-addon-api/blob/main/doc/hierarchy.md" target="_blank" rel="noopener noreferrer">https://github.com/nodejs/node-addon-api/blob/main/doc/hierarchy.md</a></p></blockquote><table><thead><tr><th>Class</th><th>Parent Class(es)</th></tr></thead><tbody><tr><td><code>Napi::Addon</code></td><td><code>Napi::InstanceWrap</code></td></tr><tr><td><code>Napi::Array</code></td><td><code>Napi::Object</code></td></tr><tr><td><code>Napi::ArrayBuffer</code></td><td><code>Napi::Object</code></td></tr><tr><td><code>Napi::AsyncContext</code></td><td></td></tr><tr><td><code>Napi::AsyncProgressQueueWorker</code></td><td><code>Napi::AsyncProgressWorkerBase</code></td></tr><tr><td><code>Napi::AsyncProgressWorker</code></td><td><code>Napi::AsyncProgressWorkerBase</code></td></tr><tr><td><code>Napi::AsyncWorker</code></td><td></td></tr><tr><td><code>Napi::BigInt</code></td><td><code>Napi::Value</code></td></tr><tr><td><code>Napi::Boolean</code></td><td><code>Napi::Value</code></td></tr><tr><td><code>Napi::Buffer</code></td><td><code>Napi::Uint8Array</code></td></tr><tr><td><code>Napi::CallbackInfo</code></td><td></td></tr><tr><td><code>Napi::CallbackScope</code></td><td></td></tr><tr><td><code>Napi::ClassPropertyDescriptor</code></td><td></td></tr><tr><td><code>Napi::DataView</code></td><td><code>Napi::Object</code></td></tr><tr><td><code>Napi::Date</code></td><td><code>Napi::Value</code></td></tr><tr><td><code>Napi::Env</code></td><td></td></tr><tr><td><code>Napi::Error</code></td><td><code>Napi::ObjectReference</code>, <code>std::exception</code></td></tr><tr><td><code>Napi::EscapableHandleScope</code></td><td></td></tr><tr><td><code>Napi::External</code></td><td><code>Napi::TypeTaggable</code></td></tr><tr><td><code>Napi::Function</code></td><td><code>Napi::Object</code></td></tr><tr><td><code>Napi::FunctionReference</code></td><td><code>Napi::Reference&lt;Napi::Function&gt;</code></td></tr><tr><td><code>Napi::HandleScope</code></td><td></td></tr><tr><td><code>Napi::InstanceWrap</code></td><td></td></tr><tr><td><code>Napi::MemoryManagement</code></td><td></td></tr><tr><td><code>Napi::Name</code></td><td><code>Napi::Value</code></td></tr><tr><td><code>Napi::Number</code></td><td><code>Napi::Value</code></td></tr><tr><td><code>Napi::Object</code></td><td><code>Napi::TypeTaggable</code></td></tr><tr><td><code>Napi::ObjectReference</code></td><td><code>Napi::Reference&lt;Napi::Object&gt;</code></td></tr><tr><td><code>Napi::ObjectWrap</code></td><td><code>Napi::InstanceWrap</code>, <code>Napi::Reference&lt;Napi::Object&gt;</code></td></tr><tr><td><code>Napi::Promise</code></td><td><code>Napi::Object</code></td></tr><tr><td><code>Napi::PropertyDescriptor</code></td><td></td></tr><tr><td><code>Napi::RangeError</code></td><td><code>Napi::Error</code></td></tr><tr><td><code>Napi::Reference</code></td><td></td></tr><tr><td><code>Napi::String</code></td><td><code>Napi::Name</code></td></tr><tr><td><code>Napi::Symbol</code></td><td><code>Napi::Name</code></td></tr><tr><td><code>Napi::SyntaxError</code></td><td><code>Napi::Error</code></td></tr><tr><td><code>Napi::ThreadSafeFunction</code></td><td></td></tr><tr><td><code>Napi::TypeTaggable</code></td><td><code>Napi::Value</code></td></tr><tr><td><code>Napi::TypeError</code></td><td><code>Napi::Error</code></td></tr><tr><td><code>Napi::TypedArray</code></td><td><code>Napi::Object</code></td></tr><tr><td><code>Napi::TypedArrayOf</code></td><td><code>Napi::TypedArray</code></td></tr><tr><td><code>Napi::Value</code></td><td></td></tr><tr><td><code>Napi::VersionManagement</code></td><td></td></tr></tbody></table><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div style="display:flex;align-items:center;justify-content:center;height:96px;" class="mermaid-loading"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!--]--><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div style="display:flex;align-items:center;justify-content:center;height:96px;" class="mermaid-loading"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!--]--><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div style="display:flex;align-items:center;justify-content:center;height:96px;" class="mermaid-loading"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!--]--><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div style="display:flex;align-items:center;justify-content:center;height:96px;" class="mermaid-loading"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!--]--><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div style="display:flex;align-items:center;justify-content:center;height:96px;" class="mermaid-loading"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!--]--><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div style="display:flex;align-items:center;justify-content:center;height:96px;" class="mermaid-loading"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!--]--><h2 id="addonæ’ä»¶ç±»" tabindex="-1"><a class="header-anchor" href="#addonæ’ä»¶ç±»"><span>addonæ’ä»¶ç±»</span></a></h2><p><strong>çº¿ç¨‹å®‰å…¨é—®é¢˜</strong></p><ul><li>å…¨å±€æ•°æ®å­˜å‚¨åœ¨c++é™æ€å˜é‡ä¸­å¹¶ä¸å®‰å…¨</li><li>å› ä¸ºè¿™æ ·åšæ²¡æœ‰è€ƒè™‘åˆ°æ’ä»¶å¯èƒ½ä¼šåŠ è½½åˆ°å¤šä¸ªçº¿ç¨‹ä¸­ï¼Œ</li><li>ä¹Ÿæ²¡æœ‰è€ƒè™‘åˆ°æ’ä»¶å¯èƒ½ä¼šå¤šæ¬¡åŠ è½½åˆ°å•ä¸ªçº¿ç¨‹ä¸­ã€‚</li></ul><p><code>Napi::Addon&lt;T&gt;</code>çš„ä½œç”¨</p><ul><li>å¯ä»¥ç”¨äºå®šä¹‰æ•´ä¸ªæ’ä»¶ã€‚</li><li>å…¶å­ç±»ç”± Node.js å®‰å…¨åœ°å­˜å‚¨åœ¨å…¶<strong>å„ä¸ªçº¿ç¨‹</strong>ä¸Šå¹¶å­˜å‚¨åˆ°å…¶<strong>å„ä¸ªä¸Šä¸‹æ–‡</strong>ä¸­ã€‚</li></ul><p><code>Napi::Addon&lt;T&gt;::InstanceMethod</code>å’Œ<code>Napi::Addon&lt;T&gt;::DefineAddon</code></p><ul><li>å¯ä»¥å°†<code>Napi::Addon</code>å­ç±»çš„å®ä¾‹æ–¹æ³•æš´éœ²ç»™JavaScript</li><li>è¢«æš´éœ²ç»™JavaScriptçš„è¿™äº›å®ä¾‹æ–¹æ³•å¯ä»¥è®¿é—®å­˜å‚¨åœ¨å®ä¾‹ä¸Šçš„æ•°æ®ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">class</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> ExampleAddon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> :</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> public</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">ExampleAddon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> public</span><span style="--shiki-light:#7C7F93;--shiki-dark:#569CD6;">:</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">  ExampleAddon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">    DefineAddon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">      // å°†æ’ä»¶çš„å®ä¾‹æ–¹æ³•æš´éœ²ç»™js</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">      InstanceMethod</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;increment&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &amp;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">ExampleAddon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Increment</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    }</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Napi::Addon&lt;T&gt;::DefineProperties</code></p><ul><li>å¯ç”¨äºå°†<code>Napi::Addon&lt;T&gt;</code>å­ç±»çš„å®ä¾‹æ–¹æ³•é™„åŠ åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸Šã€‚</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">class</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> ExampleAddon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> :</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> public</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">ExampleAddon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> public</span><span style="--shiki-light:#7C7F93;--shiki-dark:#569CD6;">:</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">  ExampleAddon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">    DefineAddon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">      exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">      // å°†ä¸€ä¸ªå¯¹è±¡æš´éœ²åˆ°exportsä¸Šï¼Œå¹¶æŠŠæ’ä»¶å®ä¾‹æ–¹æ³•ä½œä¸ºè¯¥å¯¹è±¡çš„å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">      InstanceValue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">        &quot;subObject&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> </span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">        DefineProperties</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">          Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">          {</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">            InstanceMethod</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;decrement&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &amp;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">ExampleAddon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Decrement</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">          }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">        ),</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">        napi_enumerable</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">      )</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    }</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>NODE_API_ADDON()</code>æˆ–<code>NODE_API_NAMED_ADDON()</code></p><ul><li>å¯ä»¥ç”¨æ¥å®šä¹‰æ’ä»¶</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NODE_API_ADDON</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">ExampleAddon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">// NODE_API_NAMED_ADDON(NODE_GYP_MODULE_NAME,ExampleAddon)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¡ˆä¾‹</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-6" aria-selected="true"><code>src/hello_world.cc</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-7" aria-selected="false"><code>index.js</code></button></div><!--[--><div class="vp-code-tab active" id="v-6" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title"><code>src/hello_world.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">// using namespace Napi;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">class</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> HelloAddon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> :</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> public</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">HelloAddon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">public</span><span style="--shiki-light:#7C7F93;--shiki-dark:#569CD6;">:</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">  HelloAddon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // exports={&quot;hello&quot;:hello}</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // napi_enumerable å¯æšä¸¾å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // DefineAddonå’ŒInstanceMethodéƒ½æ˜¯çˆ¶ç±»ä¸Šçš„å®ä¾‹æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">    DefineAddon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> {</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">InstanceMethod</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;hello&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &amp;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">HelloAddon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">hello</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> napi_enumerable</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">}</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">private</span><span style="--shiki-light:#7C7F93;--shiki-dark:#569CD6;">:</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // function hello(){return &quot;world&quot;}</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> hello</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  {</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(),</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;world&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">// NODE_API_NAMED_ADDON(NODE_GYP_MODULE_NAME, HelloAddon)</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NODE_API_ADDON</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">HelloAddon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-7" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>index.js</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">var addon </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;bindings&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;hello_world&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">hello</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">());</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // &#39;world&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h2 id="functionå‡½æ•°" tabindex="-1"><a class="header-anchor" href="#functionå‡½æ•°"><span>functionå‡½æ•°</span></a></h2><p><code>Napi::Function</code> ç±»æä¾›äº†ä¸€ç³»åˆ—æ–¹æ³•ï¼Œç”¨äºåœ¨åŸç”Ÿä»£ç ä¸­åˆ›å»ºå‡½æ•°å¯¹è±¡ï¼Œè¿™äº›å‡½æ•°ç¨åå¯ä»JavaScriptè°ƒç”¨ã€‚æ‰€åˆ›å»ºçš„å‡½æ•°å¹¶ä¸ä¼šè‡ªåŠ¨å¯¹JavaScriptå¯è§ï¼Œè€Œæ˜¯éœ€è¦ä½œä¸ºæ’ä»¶æ¨¡å—çš„å¯¼å‡ºå†…å®¹æˆ–ç”±æ¨¡å—çš„å¯¼å‡ºå‡½æ•°è¿”å›ã€‚</p><p>æ­¤å¤–ï¼Œ<code>Napi::Function</code> ç±»è¿˜æä¾›äº†å¯ç”¨äºè°ƒç”¨åœ¨JavaScriptä¸­åˆ›å»ºå¹¶ä¼ é€’ç»™åŸç”Ÿæ’ä»¶çš„å‡½æ•°çš„æ–¹æ³•ã€‚</p><p><code>Napi::Function</code> ç±»ç»§æ‰¿äº† <code>Napi::Object</code> ç±»çš„è¡Œä¸º</p><blockquote><p>å¯¹äºå°†åœ¨éJavaScriptçº¿ç¨‹ä¸­é€šè¿‡å¼‚æ­¥äº‹ä»¶è°ƒç”¨çš„å›è°ƒï¼Œè¯·å‚è€ƒ<code>Napi::ThreadSafeFunction</code></p></blockquote><h3 id="ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹"><span>ç¤ºä¾‹</span></a></h3><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">using</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> namespace</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Fn</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">  Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;Hello World&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">  exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Set</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;fn&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Fn</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NODE_API_MODULE</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">NODE_GYP_MODULE_NAME</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°ä»£ç å¯ä»JavaScriptè¿™æ ·ä½¿ç”¨ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-js"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> addon</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;./addon&#39;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">addon</span><span style="--shiki-light:#179299;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">fn</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨ <code>Napi::Function</code> ç±»ï¼Œå¯ä»¥åœ¨åŸç”Ÿæ’ä»¶ä¸­ä»¥ä¸¤ç§ä¸åŒçš„æ–¹æ³•è°ƒç”¨JavaScriptå‡½æ•°å¯¹è±¡ï¼š<code>Call</code> å’Œ <code>MakeCallback</code>ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•çš„APIéå¸¸ç›¸ä¼¼ï¼Œä½†å®ƒä»¬é€‚ç”¨äºä¸åŒçš„åœºæ™¯ã€‚<code>MakeCallback</code> æ–¹æ³•ç”¨äºåœ¨ä»<code>[å¼‚æ­¥æ“ä½œ](async_operations.md)</code>è¿”å›åï¼Œæˆ–é€šå¸¸åœ¨æ²¡æœ‰ç°æœ‰JavaScriptå‡½æ•°åœ¨è°ƒç”¨æ ˆä¸Šæ—¶ï¼Œä»åŸç”Ÿä»£ç å›è°ƒåˆ°JavaScriptã€‚è€Œ <code>Call</code> æ–¹æ³•åˆ™åœ¨å·²ç»æœ‰JavaScriptå‡½æ•°åœ¨è°ƒç”¨æ ˆä¸Šæ—¶ä½¿ç”¨ï¼ˆä¾‹å¦‚ï¼Œåœ¨ä»JavaScriptè°ƒç”¨çš„åŸç”Ÿæ–¹æ³•æ‰§è¡ŒæœŸé—´ï¼‰ã€‚</p><h3 id="ç±»å‹å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#ç±»å‹å®šä¹‰"><span>ç±»å‹å®šä¹‰</span></a></h3><h4 id="napivoidcallback" tabindex="-1"><a class="header-anchor" href="#napivoidcallback"><span>Napi<i class="vp-icon fas fa-Function" sizing="height"></i>VoidCallback</span></a></h4><p>æè¿°ä¸€ä¸ªä»JavaScriptè°ƒç”¨ã€è¿”å›<code>void</code>çš„å›è°ƒå‡½æ•°ç±»å‹ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">using</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> VoidCallback</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> void</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">*</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&amp;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="napicallback" tabindex="-1"><a class="header-anchor" href="#napicallback"><span>Napi<i class="vp-icon fas fa-Function" sizing="height"></i>Callback</span></a></h4><p>æè¿°ä¸€ä¸ªä»JavaScriptè°ƒç”¨ã€è¿”å›å€¼çš„å›è°ƒå‡½æ•°ç±»å‹ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">using</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> Callback</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">*</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&amp;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="æ„é€ å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#æ„é€ å‡½æ•°"><span>æ„é€ å‡½æ•°</span></a></h3><p>åˆ›å»ºä¸€ä¸ªæ–°çš„ç©º <code>Napi::Function</code> å®ä¾‹ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="æ„é€ å‡½æ•°-1" tabindex="-1"><a class="header-anchor" href="#æ„é€ å‡½æ•°-1"><span>æ„é€ å‡½æ•°</span></a></h3><p>åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Napi::Function</code> å¯¹è±¡å®ä¾‹ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">napi_env env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> napi_value value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] env</code>: æ„é€  <code>Napi::Function</code> å¯¹è±¡çš„ <code>napi_env</code> ç¯å¢ƒã€‚</li><li><code>[in] value</code>: è¡¨ç¤ºJavaScriptå‡½æ•°çš„ <code>napi_value</code>å¥æŸ„ã€‚</li></ul><p>è¿”å›ä¸€ä¸ªéç©ºçš„ <code>Napi::Function</code> å®ä¾‹ã€‚</p><h3 id="new" tabindex="-1"><a class="header-anchor" href="#new"><span>New</span></a></h3><p>åˆ›å»º <code>Napi::Function</code> å¯¹è±¡çš„å®ä¾‹ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">template</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> &lt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">VoidCallback</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> cb</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">static</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Function</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">                          const</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> char*</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> utf8name</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D20F39;--shiki-dark:#569CD6;"> nullptr</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">                          void*</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> data</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D20F39;--shiki-dark:#569CD6;"> nullptr</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>[in] env</code>: ç”¨äºæ„å»º <code>Napi::Function</code> å¯¹è±¡çš„ <code>napi_env</code> ç¯å¢ƒã€‚</li><li><code>[in] utf8name</code>: ç”¨ä½œå‡½æ•°åç§°çš„å­—ç¬¦ä¸²ã€‚</li><li><code>[in] data</code>: ç”¨æˆ·æä¾›çš„æ•°æ®ä¸Šä¸‹æ–‡ã€‚å½“åç»­è°ƒç”¨å‡½æ•°æ—¶ï¼Œæ­¤æ•°æ®ä¼šè¢«ä¼ å›ã€‚<br> è¿”å›ä¸€ä¸ª <code>Napi::Function</code> å¯¹è±¡çš„å®ä¾‹ã€‚</li></ul><h3 id="new-å‚æ•°æœ€å¤šçš„é‡è½½" tabindex="-1"><a class="header-anchor" href="#new-å‚æ•°æœ€å¤šçš„é‡è½½"><span>Newï¼ˆå‚æ•°æœ€å¤šçš„é‡è½½ï¼‰</span></a></h3><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">template</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> &lt;</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">typename</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> Callable</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">static</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Function</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> Callable</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> cb</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">string</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> utf8name</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> void*</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> data</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D20F39;--shiki-dark:#569CD6;"> nullptr</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>[in] env</code>: ç”¨äºæ„å»º <code>Napi::Function</code> å¯¹è±¡çš„ <code>napi_env</code> ç¯å¢ƒã€‚</li><li><code>[in] cb</code>: å®ç° <code>Callable</code> æ¥å£çš„å¯¹è±¡ã€‚</li><li><code>[in] utf8name</code>: ç”¨ä½œå‡½æ•°åç§°çš„å­—ç¬¦ä¸²ã€‚</li><li><code>[in] data</code>: ç”¨æˆ·æä¾›çš„æ•°æ®ä¸Šä¸‹æ–‡ã€‚å½“åç»­è°ƒç”¨å‡½æ•°æ—¶ï¼Œæ­¤æ•°æ®ä¼šè¢«ä¼ å›ã€‚</li></ul><p>è¿”å›ä¸€ä¸ª <code>Napi::Function</code> å¯¹è±¡çš„å®ä¾‹ã€‚</p><h3 id="call" tabindex="-1"><a class="header-anchor" href="#call"><span>Call</span></a></h3><p>ä»åŸç”Ÿæ‰©å±•è°ƒç”¨JavaScriptå‡½æ•°ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Call</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">vector</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> args</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] args</code>: ä½œä¸º <code>napi_value</code> çš„JavaScriptå€¼å‘é‡ï¼Œè¡¨ç¤ºå‡½æ•°çš„å‚æ•°ã€‚</li></ul><p>è¿”å›ä¸€ä¸ª <code>Napi::Value</code>ï¼Œä»£è¡¨å‡½æ•°è¿”å›çš„JavaScriptå€¼ã€‚</p><h3 id="call-1" tabindex="-1"><a class="header-anchor" href="#call-1"><span>Call</span></a></h3><p>ä»åŸç”Ÿæ‰©å±•è°ƒç”¨JavaScriptå‡½æ•°ï¼ŒæŒ‡å®šæ¥æ”¶è€…å¯¹è±¡ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Call</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_value</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> recv</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">vector</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> args</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] recv</code>: ä¼ é€’ç»™è¢«è°ƒç”¨å‡½æ•°çš„ <code>this</code> å¯¹è±¡ã€‚</li><li><code>[in] args</code>: ä½œä¸º <code>napi_value</code> çš„JavaScriptå€¼å‘é‡ï¼Œè¡¨ç¤ºå‡½æ•°çš„å‚æ•°ã€‚</li></ul><p>è¿”å›ä¸€ä¸ª <code>Napi::Value</code>ï¼Œä»£è¡¨å‡½æ•°è¿”å›çš„JavaScriptå€¼ã€‚</p><h3 id="makecallbackå¼‚æ­¥å›è°ƒæ‰§è¡Œå‡½æ•°" tabindex="-1"><a class="header-anchor" href="#makecallbackå¼‚æ­¥å›è°ƒæ‰§è¡Œå‡½æ•°"><span>MakeCallbackå¼‚æ­¥å›è°ƒæ‰§è¡Œå‡½æ•°</span></a></h3><p>åœ¨å¼‚æ­¥æ“ä½œåï¼Œä»åŸç”Ÿæ‰©å±•è°ƒç”¨JavaScriptå‡½æ•°ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">MakeCallback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_value</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> recv</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">vector</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> args</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> napi_async_context</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> context</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#D20F39;--shiki-dark:#569CD6;"> nullptr</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] recv</code>: ä¼ é€’ç»™è¢«è°ƒç”¨å‡½æ•°çš„ <code>this</code> å¯¹è±¡ã€‚</li><li><code>[in] args</code>: ä½œä¸ºå‡½æ•°å‚æ•°çš„ <code>napi_value</code> å½¢å¼çš„JavaScriptå€¼åˆ—è¡¨ã€‚</li><li><code>[in] context</code>: è§¦å‘å›è°ƒçš„å¼‚æ­¥æ“ä½œçš„ä¸Šä¸‹æ–‡ã€‚é€šå¸¸åº”ä¸ºä¹‹å‰ä»<code>[Napi::AsyncContext](async_context.md)</code>è·å–çš„å€¼ã€‚å…è®¸ä½¿ç”¨<code>nullptr</code>ï¼Œè¿™è¡¨ç¤ºä½¿ç”¨å½“å‰å¼‚æ­¥ä¸Šä¸‹æ–‡ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰æ¥æ‰§è¡Œå›è°ƒã€‚</li></ul><p>è¿”å›ä»£è¡¨å‡½æ•°è¿”å›çš„JavaScriptå€¼çš„ <code>Napi::Value</code>ã€‚</p><h3 id="operatoræ“ä½œç¬¦é‡è½½" tabindex="-1"><a class="header-anchor" href="#operatoræ“ä½œç¬¦é‡è½½"><span>operatoræ“ä½œç¬¦é‡è½½</span></a></h3><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">operator</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">initializer_list</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> args</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] args</code>: ä½œä¸º <code>napi_value</code> çš„åˆå§‹åŒ–å™¨åˆ—è¡¨ï¼Œè¡¨ç¤ºJavaScriptå€¼ã€‚</li></ul><p>è¿”å›ä»£è¡¨å‡½æ•°è¿”å›çš„JavaScriptå€¼çš„ <code>Napi::Value</code>ã€‚</p><h3 id="æ¡ˆä¾‹-function-example" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-function-example"><span>æ¡ˆä¾‹ï¼šfunction_example</span></a></h3><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-8" aria-selected="true"><code>src/hello_world.cc</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-9" aria-selected="false"><code>index.js</code></button></div><!--[--><div class="vp-code-tab active" id="v-8" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title"><code>src/hello_world.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">// function hello(){ return &quot;world&quot; }</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">String</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> hello</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(),</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;world&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // exports[&#39;hello&#39;] = hello</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">  exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Set</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;hello&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> hello</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NODE_API_MODULE</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">NODE_GYP_MODULE_NAME</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-9" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>index.js</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">var addon </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;bindings&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;hello_world&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">hello</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">());</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // &#39;world&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="æ¡ˆä¾‹-function-argumentså‡½æ•°å‚æ•°" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-function-argumentså‡½æ•°å‚æ•°"><span>æ¡ˆä¾‹ï¼šfunction_argumentså‡½æ•°å‚æ•°</span></a></h3><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-10" aria-selected="true"><code>src/hello_world.cc</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-11" aria-selected="false"><code>index.js</code></button></div><!--[--><div class="vp-code-tab active" id="v-10" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title"><code>src/hello_world.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">// function hello(a,b){ return a+b }</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> add</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Length</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 2</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // throw new TypeError(&quot;Wring number of arguments.&quot;);</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">TypeError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;Wrong number of arguments.&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">).</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ThrowAsJavaScriptException</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Null</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">IsNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">IsNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // throw new TypeError(&quot;Wrong type of arguments.&quot;);</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">TypeError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;Wrong type of arguments.&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">).</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ThrowAsJavaScriptException</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Null</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  double</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> arg0 </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Number</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">DoubleValue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  double</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> arg1 </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Number</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">DoubleValue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  double</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> result </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> arg0 </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">+</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> arg1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Number</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> result</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // exports[&#39;add&#39;] = add</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">  exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Set</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;add&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> add</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NODE_API_MODULE</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">NODE_GYP_MODULE_NAME</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-11" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>index.js</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">var addon </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;bindings&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;hello_world&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">add</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">());</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // TypeError: Wring number of arguments.</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">add</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // TypeError: Wring number of arguments.</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">add</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;111&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;222&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // TypeError: Wrong type of arguments.</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">add</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 2</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // 3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="æ¡ˆä¾‹-callback-å‡½æ•°å›è°ƒ" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-callback-å‡½æ•°å›è°ƒ"><span>æ¡ˆä¾‹ï¼šcallback_å‡½æ•°å›è°ƒ</span></a></h3><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-12" aria-selected="true"><code>src/hello_world.cc</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-13" aria-selected="false"><code>index.js</code></button></div><!--[--><div class="vp-code-tab active" id="v-12" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title"><code>src/hello_world.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">// function hello(callback){ callback(&quot;hello_world&quot;); }</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> call</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function callbaack </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String arg0 </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;hello_world&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">  callbaack</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Call</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">{arg0}</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // exports[&#39;call&#39;] = call</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">  exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Set</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;call&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> call</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NODE_API_MODULE</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">NODE_GYP_MODULE_NAME</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-13" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>index.js</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">var addon </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;bindings&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;hello_world&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">call</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">    function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">msg</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">        console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">msg</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // &quot;hello_world&quot;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="æ¡ˆä¾‹-factory-of-function" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-factory-of-function"><span>æ¡ˆä¾‹ï¼šFactory_Of_function</span></a></h3><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-14" aria-selected="true"><code>src/hello_world.cc</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-15" aria-selected="false"><code>index.js</code></button></div><!--[--><div class="vp-code-tab active" id="v-14" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title"><code>src/hello_world.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">/*</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  function hello_world(){</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    return &quot;hello_world&quot;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">*/</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">String</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> hello_world</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;hello_world&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">/*</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  function creatFunction(){</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    return function hello_world(){</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">      return &quot;hello_world&quot;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">*/</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Function</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> createFunction</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  /*</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    return function hello_world(){</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">      return &quot;hello_world&quot;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  */</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> hello_world</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;hello_world&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // exports[&#39;creatFunction&#39;] = creatFunction</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">  exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Set</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;createFunction&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> createFunction</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NODE_API_MODULE</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">NODE_GYP_MODULE_NAME</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-15" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>index.js</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">#</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> node</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">var addon </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;bindings&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;hello_world&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let fun </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">createFunction</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">dir</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">fun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">toString</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // &#39;function hello_world() { [native code] }&#39;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">fun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // &#39;hello_world&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h2 id="objectå¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#objectå¯¹è±¡"><span>Objectå¯¹è±¡</span></a></h2><blockquote><p><a href="https://github.com/nodejs/node-addon-api/blob/main/doc/object.md" target="_blank" rel="noopener noreferrer">https://github.com/nodejs/node-addon-api/blob/main/doc/object.md</a></p></blockquote><p><code>Napi::Object</code> ç±»ç»§æ‰¿è‡ªç±» [<code>Napi::TypeTaggable</code>][]ã€‚</p><p><code>Napi::Object</code> ç±»å¯¹åº”äºä¸€ä¸ªJavaScriptå¯¹è±¡ã€‚å½“å¤„ç†æ›´å…·ä½“ç±»å‹æ—¶ï¼Œè¯¥ç±»è¢«ä»¥ä¸‹node-addon-apiç±»æ‰©å±•ï¼Œä½ å¯èƒ½ä¼šåœ¨å¼€å‘ä¸­ä½¿ç”¨å®ƒä»¬ï¼š</p><ul><li>[Napi::Array]</li><li>[Napi::ArrayBuffer]</li><li>[<code>Napi::Buffer&lt;T&gt;</code>]</li><li>[Napi::Function]</li><li>[Napi::TypedArray]</li></ul><p>æ­¤ç±»æä¾›äº†è®¸å¤šä¾¿åˆ©æ–¹æ³•ï¼Œä¸»è¦ç”¨äºåœ¨JavaScriptå¯¹è±¡ä¸Šè®¾ç½®æˆ–è·å–å±æ€§ã€‚ä¾‹å¦‚ï¼ŒSet() å’Œ Get() æ–¹æ³•ã€‚</p><h3 id="ç¤ºä¾‹-1" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1"><span>ç¤ºä¾‹</span></a></h3><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">using</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> namespace</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">  Object obj </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // åˆ†é…å±æ€§å€¼</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">  obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Set</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;hello&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;world&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">  obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Set</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">uint32_t</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">42</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;ç”Ÿå‘½ã€å®‡å®™åŠä¸€åˆ‡çš„ç­”æ¡ˆ&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">  obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Set</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;é“æ ¼æ‹‰æ–¯Â·äºšå½“æ–¯&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // è·å–å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">  Value val1 </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Get</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;hello&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">  Value val2 </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Get</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">uint32_t</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">42</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">  Value val3 </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Get</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;é“æ ¼æ‹‰æ–¯Â·äºšå½“æ–¯&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // æ£€æŸ¥å¯¹è±¡æ˜¯å¦æœ‰æŒ‡å®šå±æ€§</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  bool</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> hasHello </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Has</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;hello&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // true</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  bool</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> hasWorld </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Has</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;world&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // false</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#æ–¹æ³•"><span>æ–¹æ³•</span></a></h3><h4 id="ç©ºæ„é€ å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#ç©ºæ„é€ å‡½æ•°"><span>ç©ºæ„é€ å‡½æ•°</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>åˆ›å»ºä¸€ä¸ªæ–°çš„ç©º <code>Object</code> å®ä¾‹ã€‚</p><h4 id="æ„é€ å‡½æ•°-2" tabindex="-1"><a class="header-anchor" href="#æ„é€ å‡½æ•°-2"><span>æ„é€ å‡½æ•°</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">napi_env env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> napi_value value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] env</code>: æ„é€  <code>Value</code> å¯¹è±¡çš„ <code>napi_env</code> ç¯å¢ƒã€‚</li><li><code>[in] value</code>: è¡¨ç¤ºJavaScriptå¯¹è±¡çš„ <code>napi_value</code>ã€‚</li></ul><p>åˆ›å»ºä¸€ä¸ªéç©ºçš„ <code>Napi::Object</code> å®ä¾‹ã€‚</p><h4 id="new-1" tabindex="-1"><a class="header-anchor" href="#new-1"><span>New()</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] env</code>: ç”¨äºæ„é€  <code>Napi::Value</code> å¯¹è±¡çš„ <code>napi_env</code> ç¯å¢ƒã€‚</li></ul><p>åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Napi::Object</code> å€¼ã€‚</p><h4 id="set" tabindex="-1"><a class="header-anchor" href="#set"><span>Set()</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">bool</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Set</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">____</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> ____</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] key</code>: è¢«èµ‹å€¼å±æ€§çš„åç§°ã€‚</li><li><code>[in] value</code>: è¢«èµ‹äºˆå±æ€§çš„å€¼ã€‚</li></ul><p>å‘å¯¹è±¡æ·»åŠ æŒ‡å®šé”®å’Œå€¼çš„å±æ€§ã€‚</p><p>é”®å¯ä»¥æ˜¯ä»¥ä¸‹ç±»å‹ä¹‹ä¸€ï¼š</p><ul><li><code>napi_value</code></li><li>[<code>Napi::Value</code>]</li><li><code>const char*</code></li><li><code>const std::string&amp;</code></li><li><code>uint32_t</code></li></ul><p><code>value</code> å¯ä»¥æ˜¯ä»»ä½•è¢« [<code>Napi::Value::From</code>][] æ¥å—çš„ç±»å‹ã€‚</p><h4 id="delete" tabindex="-1"><a class="header-anchor" href="#delete"><span>Delete()</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">bool</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Delete</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">____</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] key</code>: è¦åˆ é™¤çš„å±æ€§çš„åç§°ã€‚</li></ul><p>åˆ é™¤ä¸ç»™å®šé”®å…³è”çš„å±æ€§ã€‚å¦‚æœå±æ€§è¢«åˆ é™¤ï¼Œåˆ™è¿”å› <code>true</code>ã€‚</p><p><code>key</code> å¯ä»¥æ˜¯ä»¥ä¸‹ç±»å‹ä¹‹ä¸€ï¼š</p><ul><li><code>napi_value</code></li><li>[<code>Napi::Value</code>]</li><li><code>const char *</code></li><li><code>const std::string &amp;</code></li><li><code>uint32_t</code></li></ul><h4 id="get" tabindex="-1"><a class="header-anchor" href="#get"><span>Get()</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Get</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">____</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] key</code>: è¦æ£€ç´¢å…¶å€¼çš„å±æ€§çš„åç§°ã€‚</li></ul><p>è¿”å›ä¸é”®å±æ€§å…³è”çš„ ã€Napi::Valueã€‘ã€‚å¦‚æœé”®ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›å€¼â€œæœªå®šä¹‰â€ã€‚</p><p><code>key</code> å¯ä»¥æ˜¯ä»¥ä¸‹ç±»å‹ä¹‹ä¸€ï¼š</p><ul><li><code>napi_value</code></li><li>[<code>Napi::Value</code>]</li><li><code>const char *</code></li><li><code>const std::string &amp;</code></li><li><code>uint32_t</code></li></ul><h4 id="has" tabindex="-1"><a class="header-anchor" href="#has"><span>Has()</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">bool</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Has</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">____</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] key</code>: è¦æ£€æŸ¥çš„å±æ€§åç§°ã€‚</li></ul><p>å¦‚æœå¯¹è±¡æœ‰åä¸º <code>key</code> çš„å±æ€§åˆ™è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚</p><h4 id="instanceof" tabindex="-1"><a class="header-anchor" href="#instanceof"><span>InstanceOf()</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">bool</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">InstanceOf</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> Function</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> constructor</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] constructor</code>: ç”¨äºæ¯”è¾ƒå¯¹è±¡çš„æ„é€ å‡½æ•°ã€Napi::Functionã€‘ã€‚</li></ul><p>å¦‚æœ <code>Napi::Object</code> æ˜¯ç”± <code>constructor</code> åˆ›å»ºçš„å®ä¾‹ï¼Œåˆ™è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚</p><p>æ³¨æ„ï¼šè¿™ç­‰åŒäºJavaScriptä¸­çš„ <code>instanceof</code> è¿ç®—ç¬¦ã€‚</p><h4 id="addfinalizer" tabindex="-1"><a class="header-anchor" href="#addfinalizer"><span>AddFinalizer()</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">template</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> &lt;</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">typename</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> Finalizer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> typename</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> T</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">inline</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> AddFinalizer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Finalizer</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> finalizeCallback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> T</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">*</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>[in] finalizeCallback</code>: å½“å¯¹è±¡è¢«åƒåœ¾å›æ”¶æ—¶è°ƒç”¨çš„å‡½æ•°ã€‚</li><li><code>[in] data</code>: ä¸å¯¹è±¡å…³è”çš„æ•°æ®ã€‚</li></ul><p>å°† <code>data</code> ä¸å¯¹è±¡å…³è”ï¼Œå¹¶åœ¨å¯¹è±¡è¢«åƒåœ¾å›æ”¶æ—¶è°ƒç”¨ <code>finalizeCallback</code>ã€‚<code>finalizeCallback</code> çš„ç­¾åå¦‚ä¸‹ï¼š</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> finalizeCallback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> T</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">*</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å…¶ä¸­ <code>data</code> æ˜¯ä¼ é€’ç»™ <code>AddFinalizer()</code> è°ƒç”¨çš„æŒ‡é’ˆã€‚</p><h4 id="addfinalizer-1" tabindex="-1"><a class="header-anchor" href="#addfinalizer-1"><span>AddFinalizer()</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">template</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> &lt;</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">typename</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> Finalizer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> typename</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> T</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> typename</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> Hint</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">inline</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> AddFinalizer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Finalizer</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> finalizeCallback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">                         T</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">*</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">                         Hint</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">*</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> finalizeHint</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>[in] data</code>: ä¸å¯¹è±¡å…³è”çš„æ•°æ®ã€‚</li><li><code>[in] finalizeCallback</code>: å½“å¯¹è±¡è¢«åƒåœ¾å›æ”¶æ—¶è°ƒç”¨çš„å‡½æ•°ã€‚</li></ul><p>å°† <code>data</code> ä¸å¯¹è±¡å…³è”ï¼Œå¹¶åœ¨å¯¹è±¡è¢«åƒåœ¾å›æ”¶æ—¶è°ƒç”¨ <code>finalizeCallback</code>ã€‚å¯ä»¥æä¾›ä¸€ä¸ªé¢å¤–çš„æç¤ºï¼Œä¹Ÿä¼šä¼ é€’ç»™ <code>finalizeCallback</code>ï¼Œå…¶ç­¾åå¦‚ä¸‹ï¼š</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> finalizeCallback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> T</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">*</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> Hint</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">*</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> hint</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å…¶ä¸­ <code>data</code> å’Œ <code>hint</code> æ˜¯ä¼ é€’ç»™ <code>AddFinalizer()</code> è°ƒç”¨çš„æŒ‡é’ˆã€‚</p><h4 id="getpropertynames" tabindex="-1"><a class="header-anchor" href="#getpropertynames"><span>GetPropertyNames()</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Array</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">GetPropertyNames</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿”å›å¯¹è±¡å¯æšä¸¾å±æ€§çš„åç§°ä½œä¸ºå­—ç¬¦ä¸²çš„ã€Napi::Arrayã€‘æ•°ç»„ã€‚ä»¥ <code>Symbol</code> ä¸ºé”®çš„å±æ€§ä¸ä¼šè¢«åŒ…å«åœ¨å†…ã€‚</p><h4 id="hasownproperty" tabindex="-1"><a class="header-anchor" href="#hasownproperty"><span>HasOwnProperty()</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">bool</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">HasOwnProperty</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">____</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> key</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] key</code>: è¦æ£€æŸ¥çš„å±æ€§åç§°ã€‚</li></ul><p>å¦‚æœå¯¹è±¡æœ‰ä¸€ä¸ªåä¸º <code>key</code> çš„è‡ªæœ‰å±æ€§ï¼Œåˆ™è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚</p><h4 id="defineproperty" tabindex="-1"><a class="header-anchor" href="#defineproperty"><span>DefineProperty()</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">bool</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">DefineProperty</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">PropertyDescriptor</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> property</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] property</code>: ä¸€ä¸ª ã€Napi::PropertyDescriptorã€‘ã€‚</li></ul><p>åœ¨å¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªå±æ€§ã€‚</p><h4 id="defineproperties" tabindex="-1"><a class="header-anchor" href="#defineproperties"><span>DefineProperties()</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">bool</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">DefineProperties</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">____</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> properties</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] properties</code>: ä¸€ä¸ªã€Napi::PropertyDescriptorã€‘åˆ—è¡¨ã€‚å¯ä»¥æ˜¯ä»¥ä¸‹ç±»å‹ä¹‹ä¸€ï¼š <ul><li><code>const std::initializer_list&lt;Napi::PropertyDescriptor&gt;&amp;</code></li><li><code>const std::vector&lt;Napi::PropertyDescriptor&gt;&amp;</code></li></ul></li></ul><p>åœ¨å¯¹è±¡ä¸Šå®šä¹‰å±æ€§ã€‚</p><h4 id="freeze" tabindex="-1"><a class="header-anchor" href="#freeze"><span>Freeze()</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Freeze</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>Napi::Object::Freeze()</code> æ–¹æ³•å†»ç»“ä¸€ä¸ªå¯¹è±¡ã€‚å†»ç»“åçš„å¯¹è±¡ä¸èƒ½å†è¢«æ›´æ”¹ã€‚å†»ç»“å¯¹è±¡ä¼šé˜»æ­¢æ–°å±æ€§è¢«æ·»åŠ ï¼Œç°æœ‰å±æ€§è¢«åˆ é™¤ï¼Œé˜»æ­¢ç°æœ‰å±æ€§çš„å¯æšä¸¾æ€§ã€å¯é…ç½®æ€§å’Œå¯å†™æ€§è¢«æ”¹å˜ï¼ŒåŒæ—¶ä¹Ÿé˜»æ­¢ç°æœ‰å±æ€§çš„å€¼è¢«æ”¹å˜ã€‚æ­¤å¤–ï¼Œå†»ç»“å¯¹è±¡è¿˜ä¼šé˜»æ­¢å…¶åŸå‹è¢«æ”¹å˜ã€‚</p><h4 id="seal" tabindex="-1"><a class="header-anchor" href="#seal"><span>Seal()</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Seal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>Napi::Object::Seal()</code> æ–¹æ³•å¯†å°ä¸€ä¸ªå¯¹è±¡ï¼Œé˜»æ­¢æ–°å±æ€§è¢«æ·»åŠ ï¼Œå¹¶æ ‡è®°æ‰€æœ‰ç°æœ‰å±æ€§ä¸ºä¸å¯é…ç½®ã€‚ç°æœ‰å±æ€§çš„å€¼åªè¦å¯å†™ä»ç„¶å¯ä»¥è¢«æ›´æ”¹ã€‚</p><h4 id="operator" tabindex="-1"><a class="header-anchor" href="#operator"><span>operator<a href=""></a></span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">PropertyLValue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">operator</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">[]</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> char*</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> utf8name</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] utf8name</code>: UTF-8ç¼–ç çš„å±æ€§åç§°çš„ç©ºç»ˆæ­¢ç¬¦ã€‚</li></ul><p>è¿”å›ä½œä¸ºå‘½åå±æ€§çš„ã€Napi<i class="vp-icon fas fa-Object" sizing="height"></i>PropertyLValueã€‘æˆ–è®¾ç½®å‘½åå±æ€§ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">PropertyLValue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">operator</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">[]</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">string</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> utf8name</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] utf8name</code>: UTF-8ç¼–ç çš„å±æ€§åç§°ã€‚</li></ul><p>è¿”å›ä½œä¸ºå‘½åå±æ€§çš„ã€Napi<i class="vp-icon fas fa-Object" sizing="height"></i>PropertyLValueã€‘æˆ–è®¾ç½®å‘½åå±æ€§ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">PropertyLValue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">uint32_t</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">operator</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">[]</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">uint32_t</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> index</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] index</code>: å…ƒç´ ç´¢å¼•ã€‚</li></ul><p>è¿”å›ä½œä¸ºç´¢å¼•å±æ€§æˆ–æ•°ç»„å…ƒç´ çš„ã€Napi<i class="vp-icon fas fa-Object" sizing="height"></i>PropertyLValueã€‘æˆ–è®¾ç½®ç´¢å¼•å±æ€§æˆ–æ•°ç»„å…ƒç´ ã€‚</p><h4 id="begin" tabindex="-1"><a class="header-anchor" href="#begin"><span>begin()</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">iterator</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">begin</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿”å›å¯¹è±¡å¸¸é‡è¿­ä»£å™¨çš„èµ·å§‹ä½ç½®ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">iterator</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">begin</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿”å›å¯¹è±¡éå¸¸é‡è¿­ä»£å™¨çš„èµ·å§‹ä½ç½®ã€‚</p><h4 id="end" tabindex="-1"><a class="header-anchor" href="#end"><span>end()</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">iterator</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">end</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿”å›å¯¹è±¡å¸¸é‡è¿­ä»£å™¨çš„ç»“æŸä½ç½®ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">iterator</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">end</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿”å›å¯¹è±¡éå¸¸é‡è¿­ä»£å™¨çš„ç»“æŸä½ç½®ã€‚</p><h3 id="è¿­ä»£å™¨" tabindex="-1"><a class="header-anchor" href="#è¿­ä»£å™¨"><span>è¿­ä»£å™¨</span></a></h3><p>è¿­ä»£å™¨æš´éœ²ä¸€ä¸ª <code>std::pair&lt;...&gt;</code>ï¼Œå…¶ä¸­ <code>first</code> å±æ€§æ˜¯ä¸€ä¸ªæŒæœ‰å½“å‰è¿­ä»£é”®çš„ ã€Napi<i class="vp-icon fas fa-Valueã€‘ï¼Œè€Œ fa-`second` fa-å±æ€§æ˜¯ä¸€ä¸ªæŒæœ‰å½“å‰è¿­ä»£å€¼çš„ fa-ã€Napi" sizing="height"></i>Object::PropertyLValueã€‘ã€‚è¿­ä»£å™¨ä»…åœ¨å¯ç”¨C++å¼‚å¸¸ï¼ˆé€šè¿‡æ„å»ºæ—¶å®šä¹‰ <code>NAPI_CPP_EXCEPTIONS</code>ï¼‰æ—¶å¯ç”¨ã€‚</p><h3 id="å¸¸é‡è¿­ä»£å™¨" tabindex="-1"><a class="header-anchor" href="#å¸¸é‡è¿­ä»£å™¨"><span>å¸¸é‡è¿­ä»£å™¨</span></a></h3><p>åœ¨å¸¸é‡è¿­ä»£å™¨ä¸­ï¼Œè¿­ä»£çš„å€¼æ˜¯ä¸å¯å˜çš„ã€‚</p><h4 id="operator-1" tabindex="-1"><a class="header-anchor" href="#operator-1"><span><code>operator++()</code></span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">inline</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">const_iterator</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">const_iterator</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">operator</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">++</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä½¿è¿­ä»£å™¨å‘å‰ç§»åŠ¨ä¸€ä½ï¼Œå³éå†åˆ°ä¸‹ä¸€ä¸ªå±æ€§ã€‚</p><h4 id="operator-2" tabindex="-1"><a class="header-anchor" href="#operator-2"><span><code>operator==</code></span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">inline</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> bool</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">const_iterator</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">operator</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">==</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">const_iterator</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> other</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] other</code>: å¦ä¸€ä¸ªè¦ä¸æ­¤è¿­ä»£å™¨è¿›è¡Œæ¯”è¾ƒçš„è¿­ä»£å™¨ã€‚</li></ul><p>å¦‚æœä¸¤ä¸ªè¿­ä»£å™¨æŒ‡å‘ç›¸åŒçš„ç´¢å¼•ä½ç½®ï¼Œåˆ™è¿”å› <code>true</code>ã€‚</p><h4 id="operator-3" tabindex="-1"><a class="header-anchor" href="#operator-3"><span><code>operator!=</code></span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">inline</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> bool</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">const_iterator</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">operator</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">!=</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">const_iterator</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> other</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] other</code>: å¦ä¸€ä¸ªè¦ä¸æ­¤è¿­ä»£å™¨è¿›è¡Œæ¯”è¾ƒçš„è¿­ä»£å™¨ã€‚</li></ul><p>å¦‚æœä¸¤ä¸ªè¿­ä»£å™¨æŒ‡å‘ä¸åŒçš„ç´¢å¼•ä½ç½®ï¼Œåˆ™è¿”å› <code>true</code>ã€‚</p><h4 id="operator-4" tabindex="-1"><a class="header-anchor" href="#operator-4"><span><code>operator*()</code></span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">inline</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">pair</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">PropertyLValue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">const_iterator</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">operator</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">*</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿”å›å½“å‰è¿­ä»£çš„å±æ€§é”®å€¼å¯¹ï¼Œé”®ä¸º <code>Napi::Value</code> ç±»å‹ï¼Œå€¼ä¸ºä¸å¯ä¿®æ”¹çš„ <code>Napi::Object::PropertyLValue</code> å¯¹è±¡ã€‚</p><h4 id="ç¤ºä¾‹-2" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2"><span>ç¤ºä¾‹</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Sum</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">  Object object </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  int64_t</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> sum </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  for</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> auto</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&amp;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> e </span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    sum </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">+=</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> static_cast</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Value</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">e</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">second</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">).</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Number</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Int64Value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Number</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(),</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> sum</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="éå¸¸é‡è¿­ä»£å™¨" tabindex="-1"><a class="header-anchor" href="#éå¸¸é‡è¿­ä»£å™¨"><span>éå¸¸é‡è¿­ä»£å™¨</span></a></h3><p>åœ¨éå¸¸é‡è¿­ä»£å™¨ä¸­ï¼Œè¿­ä»£çš„å€¼æ˜¯å¯ä»¥ä¿®æ”¹çš„ã€‚</p><h4 id="operator-5" tabindex="-1"><a class="header-anchor" href="#operator-5"><span><code>operator++()</code></span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">inline</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">iterator</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">iterator</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">operator</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">++</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä½¿è¿­ä»£å™¨å‘å‰ç§»åŠ¨ä¸€ä½ï¼Œè¿›è¡Œä¸‹ä¸€é¡¹å±æ€§çš„è¿­ä»£ã€‚</p><h4 id="operator-6" tabindex="-1"><a class="header-anchor" href="#operator-6"><span><code>operator==</code></span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">inline</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> bool</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">iterator</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">operator</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">==</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">iterator</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> other</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] other</code>: ç”¨äºä¸å½“å‰è¿­ä»£å™¨è¿›è¡Œæ¯”è¾ƒçš„å¦ä¸€ä¸ªè¿­ä»£å™¨ã€‚</li></ul><p>å¦‚æœä¸¤ä¸ªè¿­ä»£å™¨ä½äºåŒä¸€ç´¢å¼•ï¼Œåˆ™è¿”å› <code>true</code>ã€‚</p><h4 id="operator-7" tabindex="-1"><a class="header-anchor" href="#operator-7"><span><code>operator!=</code></span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">inline</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> bool</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">iterator</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">operator</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">!=</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">iterator</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> other</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] other</code>: ç”¨äºä¸å½“å‰è¿­ä»£å™¨è¿›è¡Œæ¯”è¾ƒçš„å¦ä¸€ä¸ªè¿­ä»£å™¨ã€‚</li></ul><p>å¦‚æœä¸¤ä¸ªè¿­ä»£å™¨ä½äºä¸åŒç´¢å¼•ï¼Œåˆ™è¿”å› <code>true</code>ã€‚</p><h4 id="operator-8" tabindex="-1"><a class="header-anchor" href="#operator-8"><span><code>operator*()</code></span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">inline</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">pair</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">PropertyLValue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">iterator</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">operator</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">*</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿”å›å½“å‰è¿­ä»£çš„å±æ€§é”®å€¼å¯¹ï¼Œé”®ä¸º <code>Napi::Value</code> ç±»å‹ï¼Œå€¼ä¸ºå¯ä¿®æ”¹çš„ <code>Napi::Object::PropertyLValue</code> å¯¹è±¡ã€‚</p><h4 id="ç¤ºä¾‹-3" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-3"><span>ç¤ºä¾‹</span></a></h4><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Increment</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;">&amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">  Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">  Object object </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  for</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">auto</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> e </span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    int64_t</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> value </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> static_cast</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Value</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">e</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">second</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">).</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Number</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Int64Value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">    ++</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    e</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">second</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Number</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ¡ˆä¾‹-factory-of-object" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-factory-of-object"><span>æ¡ˆä¾‹ï¼šFactory_Of_Object</span></a></h3><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-16" aria-selected="true"><code>src/hello_world.cc</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-17" aria-selected="false"><code>index.js</code></button></div><!--[--><div class="vp-code-tab active" id="v-16" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title"><code>src/hello_world.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">// function creatObj(){ return {&quot;hello&quot;:&quot;world&quot;} }</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> creatObj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // obj = {}</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object obj </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // obj[&quot;hello&quot;] = &quot;world&quot;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">  obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Set</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;hello&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;world&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // exports[&#39;creatObj&#39;] = creatObj</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">  exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Set</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;creatObj&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> creatObj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NODE_API_MODULE</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">NODE_GYP_MODULE_NAME</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-17" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>index.js</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">var addon </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;bindings&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;hello_world&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let obj </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">creatObj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // { hello: &#39;world&#39; }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h2 id="objectwrap" tabindex="-1"><a class="header-anchor" href="#objectwrap"><span>ObjectWrap</span></a></h2><p><strong>ObjectWrapç®€ä»‹</strong></p><ul><li><code>Napi::ObjectWrap&lt;T&gt;</code>ç»§æ‰¿è‡ª<code>Napi::InstanceWrap&lt;T&gt;</code></li><li>ObjectWrapç±»ç”¨äºå°†c++ä»£ç çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šåˆ°jsä¸Š</li><li>ç»‘å®šåï¼Œ <ul><li>å½“jså¯¹è±¡åˆ›å»ºæ—¶ï¼Œåˆ™c++ä»£ç çš„å¯¹è±¡å®ä¾‹ä¹Ÿå°†è¢«åˆ›å»º</li><li>å½“jså¯¹è±¡ä¸Šçš„æ–¹æ³•ï¼ˆé€šè¿‡InstanceMethodå®šä¹‰çš„ï¼‰ï¼Œåˆ™c++å¯¹è±¡ä¸Šçš„å®ä¾‹æ–¹æ³•ä¹Ÿå°†è¢«è°ƒç”¨</li><li>å½“jså¯¹è±¡è¢«åƒåœ¾æ”¶é›†åï¼Œc++çš„ææ„å‡½æ•°ä¼šåœ¨ä¹‹åä¸€æ®µæ—¶é—´è¢«è°ƒç”¨ã€‚</li></ul></li></ul><h3 id="æ¡ˆä¾‹-objectwrap" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-objectwrap"><span>æ¡ˆä¾‹ï¼šobjectWrap</span></a></h3><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-18" aria-selected="true"><code>ddon.cc</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-19" aria-selected="false"><code>src/MyObject.cc</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-20" aria-selected="false"><code>src/MyObject.hh</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-21" aria-selected="false"><code>index.js</code></button></div><!--[--><div class="vp-code-tab active" id="v-18" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title"><code>ddon.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;./MyObject.hh&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NODE_API_MODULE</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">NODE_GYP_MODULE_NAME</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-19" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>src/MyObject.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;MyObject.hh&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">// å®ç°æ„é€ å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">CallbackInfo </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&amp;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // â†“ c++ è¯­æ³• ï¼Œè°ƒç”¨çˆ¶çº§çš„æ„é€ å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    : </span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ObjectWrap</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // æœŸæœ›å¾—åˆ°ä¸€ä¸ªnumberä½œä¸ºå½¢å‚</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Length</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 1</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">IsNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  {</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">TypeError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;expected one number as arguments&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // åˆå§‹åŒ–value</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  double</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> val </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Number</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ToNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">DoubleValue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">value</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> val</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">/**</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> * è·å–valueçš„å€¼</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> */</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">GetVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Number</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#D20F39;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">/**</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> * åŠ ä¸Šä¸€ä¸ªæ•°</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> */</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">AddVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // æœŸæœ›å¾—åˆ°ä¸€ä¸ªnumberä½œä¸ºå½¢å‚</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Length</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 1</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">IsNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  {</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">TypeError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;expected one number as arguments&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">value</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> +=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Number</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ToNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">DoubleValue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">MutVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // æœŸæœ›å¾—åˆ°ä¸€ä¸ªnumberä½œä¸ºå½¢å‚</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Length</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 1</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">IsNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  {</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">TypeError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;expected one number as arguments&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">value</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> *=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Number</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ToNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">DoubleValue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function MyObjectClassConstructerFun </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">      // â†“ node-addon-api/doc/object_wrap.md</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">      DefineClass</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">          env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">          &quot;MyObject&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">          {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">              // â†“ node-addon-api/doc/instance_wrap.md</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">              InstanceMethod</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;GetVal&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &amp;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">GetVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">              InstanceMethod</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;AddVal&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &amp;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">AddVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">              InstanceMethod</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;MutVal&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &amp;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">MutVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">          }</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // ä¿è¯æ„é€ å‡½æ•°å¼•ç”¨ä¸è¢«GC</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // â†“ node-addon-api/doc/function_reference.md</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">FunctionReference </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">*</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">funRef </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#569CD6;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">FunctionReference</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">  *</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">funRef </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Persistent</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">MyObjectClassConstructerFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">  env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">SetInstanceData</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">funRef</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">  exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Set</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;MyObject&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> MyObjectClassConstructerFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-20" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>src/MyObject.hh</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#ifndef</span><span style="--shiki-light:#4C4F69;--shiki-dark:#569CD6;"> __MY_OBJECT__</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#define</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> __MY_OBJECT__</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">class</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> :</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> public</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">ObjectWrap</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">public</span><span style="--shiki-light:#7C7F93;--shiki-dark:#569CD6;">:</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  static</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">  MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">private</span><span style="--shiki-light:#7C7F93;--shiki-dark:#569CD6;">:</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  double</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> GetVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> AddVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> MutVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#endif</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-21" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>index.js</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">#</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> node</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">var addon </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;bindings&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;hello_world&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let MyObject </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">MyObject</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">toString</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // function MyObject() { [native code] }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let myObj </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#569CD6;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">myObj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">GetVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // 1</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">myObj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">AddVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">10</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">))</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // undefined </span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">myObj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">GetVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // 11 </span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">myObj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">MutVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">10</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">))</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // undefined</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">myObj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">GetVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // 110</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="æ¡ˆä¾‹-factory-of-objectwrap" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-factory-of-objectwrap"><span>æ¡ˆä¾‹ï¼šfactory_of_objectWrap</span></a></h3><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-22" aria-selected="true"><code>src/MyObject.hh</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-23" aria-selected="false"><code>src/MyObject.cc</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-24" aria-selected="false"><code>ddon.cc</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-25" aria-selected="false"><code>index.js</code></button></div><!--[--><div class="vp-code-tab active" id="v-22" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title"><code>src/MyObject.hh</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#ifndef</span><span style="--shiki-light:#4C4F69;--shiki-dark:#569CD6;"> __MY_OBJECT__</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#define</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> __MY_OBJECT__</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">class</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> :</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> public</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">ObjectWrap</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">public</span><span style="--shiki-light:#7C7F93;--shiki-dark:#569CD6;">:</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  static</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  static</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> NewInstance</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> arg</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">  MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">private</span><span style="--shiki-light:#7C7F93;--shiki-dark:#569CD6;">:</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  double</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> GetVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> AddVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> MutVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#endif</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-23" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>src/MyObject.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;MyObject.hh&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">// å®ç°æ„é€ å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">CallbackInfo </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&amp;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // â†“ c++ è¯­æ³• ï¼Œè°ƒç”¨çˆ¶çº§çš„æ„é€ å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    : </span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ObjectWrap</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // æœŸæœ›å¾—åˆ°ä¸€ä¸ªnumberä½œä¸ºå½¢å‚</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Length</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 1</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">IsNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  {</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">TypeError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;expected one number as arguments&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // åˆå§‹åŒ–value</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  double</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> val </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Number</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ToNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">DoubleValue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">value</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> val</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">GetVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Number</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#D20F39;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">AddVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // æœŸæœ›å¾—åˆ°ä¸€ä¸ªnumberä½œä¸ºå½¢å‚</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Length</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 1</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">IsNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  {</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">TypeError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;expected one number as arguments&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">value</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> +=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Number</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ToNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">DoubleValue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">MutVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // æœŸæœ›å¾—åˆ°ä¸€ä¸ªnumberä½œä¸ºå½¢å‚</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Length</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 1</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">IsNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  {</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">TypeError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;expected one number as arguments&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">value</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> *=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Number</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ToNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">DoubleValue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function MyObjectClassConstructerFun </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">      // â†“ node-addon-api/doc/object_wrap.md</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">      DefineClass</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">          env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">          &quot;MyObject&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">          {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">              // â†“ node-addon-api/doc/instance_wrap.md</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">              InstanceMethod</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;GetVal&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &amp;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">GetVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">              InstanceMethod</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;AddVal&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &amp;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">AddVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">              InstanceMethod</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;MutVal&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &amp;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">MutVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">          }</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // ä¿è¯æ„é€ å‡½æ•°å¼•ç”¨ä¸è¢«GC</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // â†“ node-addon-api/doc/function_reference.md</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">FunctionReference </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">*</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">funRef </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#569CD6;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">FunctionReference</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">  *</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">funRef </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Persistent</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">MyObjectClassConstructerFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">  env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">SetInstanceData</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">funRef</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">  exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Set</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;MyObject&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> MyObjectClassConstructerFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NewInstance</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> arg</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // è·å–æ„é€ å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">FunctionReference </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">*</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">funRef </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">GetInstanceData</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">FunctionReference</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // è°ƒç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºå®ä¾‹å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object obj </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> funRef</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">{</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">napi_value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">arg</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">}</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // ä¸ºäº†å¾—åˆ°èƒ½å¤Ÿé€ƒç¦»å±€éƒ¨ä½œç”¨åŸŸåä»ç„¶èƒ½å¤Ÿå­˜æ´»çš„å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // https://github.com/nodejs/node-addon-api/blob/main/doc/escapable_handle_scope.md</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">EscapableHandleScope </span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">scope</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object escapableObj </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> scope</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Escape</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">napi_value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)).</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ToObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> escapableObj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-24" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>ddon.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;./MyObject.hh&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> creatMyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Value arg </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NewInstance</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> arg</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Set</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;creatMyObject&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> creatMyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NODE_API_MODULE</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">NODE_GYP_MODULE_NAME</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-25" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>index.js</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">#</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> node</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">var addon </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;bindings&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;hello_world&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let MyObject </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">MyObject</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let creatMyObject </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">creatMyObject</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">toString</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // function MyObject() { [native code] }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let myObj1 </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#569CD6;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">myObj1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">GetVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // 1</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">myObj1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">AddVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">10</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">))</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // undefined </span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">myObj1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">GetVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // 11 </span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">myObj1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">MutVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">10</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">))</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // undefined</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">myObj1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">GetVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // 110</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let myObj2 </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> creatMyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">myObj2</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">GetVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // 1</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">myObj2</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">AddVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">10</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">))</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // undefined </span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">myObj2</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">GetVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // 11 </span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">myObj2</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">MutVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">10</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">))</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // undefined</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">myObj2</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">GetVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // 110</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="æ¡ˆä¾‹-passing-wrapped-obj-to-native" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-passing-wrapped-obj-to-native"><span>æ¡ˆä¾‹ï¼špassing_wrapped_obj_to_native</span></a></h3><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-26" aria-selected="true"><code>src/MyObject.hh</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-27" aria-selected="false"><code>src/MyObject.cc</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-28" aria-selected="false"><code>ddon.cc</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-29" aria-selected="false"><code>index.js</code></button></div><!--[--><div class="vp-code-tab active" id="v-26" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title"><code>src/MyObject.hh</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#ifndef</span><span style="--shiki-light:#4C4F69;--shiki-dark:#569CD6;"> __MY_OBJECT__</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#define</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> __MY_OBJECT__</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">class</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> :</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> public</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">ObjectWrap</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">public</span><span style="--shiki-light:#7C7F93;--shiki-dark:#569CD6;">:</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  static</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  static</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> NewInstance</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> arg</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">  MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> GetVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> AddVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> MutVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  double</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#endif</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-27" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>src/MyObject.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;MyObject.hh&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">// å®ç°æ„é€ å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">CallbackInfo </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&amp;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // â†“ c++ è¯­æ³• ï¼Œè°ƒç”¨çˆ¶çº§çš„æ„é€ å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    : </span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ObjectWrap</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // æœŸæœ›å¾—åˆ°ä¸€ä¸ªnumberä½œä¸ºå½¢å‚</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Length</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 1</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">IsNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  {</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">TypeError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;expected one number as arguments&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // åˆå§‹åŒ–value</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">  double</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> val </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Number</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ToNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">DoubleValue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">value</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> val</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">GetVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Number</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#D20F39;--shiki-dark:#569CD6;"> this</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">AddVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // æœŸæœ›å¾—åˆ°ä¸€ä¸ªnumberä½œä¸ºå½¢å‚</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Length</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 1</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">IsNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  {</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">TypeError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;expected one number as arguments&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">value</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> +=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Number</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ToNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">DoubleValue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">MutVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // æœŸæœ›å¾—åˆ°ä¸€ä¸ªnumberä½œä¸ºå½¢å‚</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  if</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Length</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 1</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">IsNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  {</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">TypeError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;expected one number as arguments&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">  }</span></span>
<span class="line"><span style="--shiki-light:#D20F39;--shiki-dark:#569CD6;">  this</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">value</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> *=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Number</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ToNumber</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">DoubleValue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function MyObjectClassConstructerFun </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">      // â†“ node-addon-api/doc/object_wrap.md</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">      DefineClass</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">          env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">          &quot;MyObject&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">          {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">              // â†“ node-addon-api/doc/instance_wrap.md</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">              InstanceMethod</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;GetVal&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &amp;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">GetVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">              InstanceMethod</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;AddVal&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &amp;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">AddVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">              InstanceMethod</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;MutVal&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &amp;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">MutVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">          }</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // ä¿è¯æ„é€ å‡½æ•°å¼•ç”¨ä¸è¢«GC</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // â†“ node-addon-api/doc/function_reference.md</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">FunctionReference </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">*</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">funRef </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#569CD6;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">FunctionReference</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">  *</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">funRef </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Persistent</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">MyObjectClassConstructerFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">  env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">SetInstanceData</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">funRef</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">  exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Set</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;MyObject&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> MyObjectClassConstructerFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NewInstance</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> arg</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // è·å–æ„é€ å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">FunctionReference </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">*</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">funRef </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">GetInstanceData</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">FunctionReference</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // è°ƒç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºå®ä¾‹å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object obj </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> funRef</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">{</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">napi_value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">arg</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">}</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">  // ä¸ºäº†å¾—åˆ°èƒ½å¤Ÿé€ƒç¦»å±€éƒ¨ä½œç”¨åŸŸåä»ç„¶èƒ½å¤Ÿå­˜æ´»çš„å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">EscapableHandleScope </span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">scope</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">  Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object escapableObj </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> scope</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Escape</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">napi_value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)).</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ToObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> escapableObj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-28" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>ddon.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;./MyObject.hh&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> creatMyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Value arg </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NewInstance</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> arg</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> addMyObj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    MyObject </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">*</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">obj0 </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">ObjectWrap</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Unwrap</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">());</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    MyObject </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">*</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">obj1 </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">ObjectWrap</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Unwrap</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Object</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">());</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    double</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> res </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> obj0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">value</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> +</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> obj1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NewInstance</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Number</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> res</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> InitAll</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Set</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;creatMyObject&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> creatMyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Set</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;addMyObj&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> addMyObj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NODE_API_MODULE</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">NODE_GYP_MODULE_NAME</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> InitAll</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-29" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>index.js</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">#</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> node</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">var addon </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;bindings&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;hello_world&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let MyObject </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">MyObject</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let creatMyObject </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">creatMyObject</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let addMyObj </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">addMyObj</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let myObj0 </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#569CD6;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> MyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">321</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let myObj1 </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> creatMyObject</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">123</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let myObj3 </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> addMyObj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">myObj0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> myObj1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">myObj3</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">GetVal</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // 444</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h2 id="arraybuffer" tabindex="-1"><a class="header-anchor" href="#arraybuffer"><span>ArrayBuffer</span></a></h2><blockquote><p><a href="https://github.com/nodejs/node-addon-api/blob/main/doc/array_buffer.md" target="_blank" rel="noopener noreferrer">https://github.com/nodejs/node-addon-api/blob/main/doc/array_buffer.md</a></p></blockquote><p><code>Napi::ArrayBuffer</code> ç±»ç»§æ‰¿è‡ªç±» <code>Napi::Object</code>, å¯¹åº”äº JavaScript ä¸­çš„ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer" target="_blank" rel="noopener noreferrer">ArrayBuffer</a> ç±»ã€‚</p><h3 id="new-å­—èŠ‚é•¿åº¦" tabindex="-1"><a class="header-anchor" href="#new-å­—èŠ‚é•¿åº¦"><span><code>New(å­—èŠ‚é•¿åº¦)</code></span></a></h3><p>åˆ†é…ä¸€ä¸ªå…·æœ‰æŒ‡å®šé•¿åº¦çš„æ–° <code>Napi::ArrayBuffer</code> å®ä¾‹ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">static</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">ArrayBuffer</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">ArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> size_t</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> byteLength</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] env</code>: åˆ›å»º <code>Napi::ArrayBuffer</code> å®ä¾‹çš„ç¯å¢ƒã€‚</li><li><code>[in] byteLength</code>: åˆ†é…çš„å­—èŠ‚é•¿åº¦ã€‚</li></ul><p>è¿”å›ä¸€ä¸ªæ–°çš„ <code>Napi::ArrayBuffer</code> å®ä¾‹ã€‚</p><h3 id="new-å¤–éƒ¨æ•°æ®" tabindex="-1"><a class="header-anchor" href="#new-å¤–éƒ¨æ•°æ®"><span><code>New(å¤–éƒ¨æ•°æ®)</code></span></a></h3><blockquote><p>å½“å®šä¹‰äº† <code>NODE_API_NO_EXTERNAL_BUFFERS_ALLOWED</code> æ—¶ï¼Œæ­¤æ–¹æ³•ä¸å¯ç”¨ã€‚</p></blockquote><p>å°†æä¾›çš„å¤–éƒ¨æ•°æ®å°è£…è¿›ä¸€ä¸ªæ–°çš„ <code>Napi::ArrayBuffer</code> å®ä¾‹ä¸­ã€‚</p><ul><li><code>Napi::ArrayBuffer</code> å®ä¾‹å¹¶ä¸æ‹¥æœ‰è¿™äº›æ•°æ®ï¼Œä¸”æœŸæœ›æ•°æ®åœ¨å…¶ç”Ÿå‘½å‘¨æœŸå†…ä¿æŒæœ‰æ•ˆã€‚</li><li>ç”±äº <code>Napi::ArrayBuffer</code> å¯èƒ½è¢«åƒåœ¾å›æ”¶ï¼Œæ­¤é‡è½½ä»…é€‚ç”¨äºé™æ€æ•°æ®ï¼Œè¿™äº›æ•°æ®æ°¸è¿œä¸éœ€è¦é‡Šæ”¾ã€‚</li><li>æ­¤å·¥å‚æ–¹æ³•ä¸ä¼šæä¾›æœºä¼šè®©è°ƒç”¨è€…åœ¨ <code>Napi::ArrayBuffer</code> è¢«åƒåœ¾å›æ”¶æ—¶é‡Šæ”¾æ•°æ®ã€‚</li><li>å¦‚æœä½ éœ€è¦é‡Šæ”¾ <code>Napi::ArrayBuffer</code> å¯¹è±¡ä¿ç•™çš„æ•°æ®ï¼Œè¯·ä½¿ç”¨æ¥å— <code>Napi::Finalizer</code> çš„ <code>Napi::ArrayBuffer::New</code> å·¥å‚æ–¹æ³•çš„å…¶ä»–å˜ä½“ï¼Œè¿™æ˜¯ä¸€ä¸ªåœ¨ <code>Napi::ArrayBuffer</code> å¯¹è±¡è¢«é”€æ¯æ—¶å°†è¢«è°ƒç”¨çš„å‡½æ•°ã€‚</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">static</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">ArrayBuffer</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">ArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> void*</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> externalData</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> size_t</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> byteLength</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] env</code>: åˆ›å»º <code>Napi::ArrayBuffer</code> å®ä¾‹çš„ç¯å¢ƒã€‚</li><li><code>[in] externalData</code>: è¦å°è£…çš„å¤–éƒ¨æ•°æ®çš„æŒ‡é’ˆã€‚</li><li><code>[in] byteLength</code>: <code>externalData</code> çš„é•¿åº¦ï¼Œå•ä½ä¸ºå­—èŠ‚ã€‚</li></ul><p>è¿”å›ä¸€ä¸ªæ–°çš„ <code>Napi::ArrayBuffer</code> å®ä¾‹ã€‚</p><h3 id="new-å¸¦ææ„å›è°ƒ" tabindex="-1"><a class="header-anchor" href="#new-å¸¦ææ„å›è°ƒ"><span><code>Newï¼ˆå¸¦ææ„å›è°ƒï¼‰</code></span></a></h3><blockquote><p>å½“å®šä¹‰äº† <code>NODE_API_NO_EXTERNAL_BUFFERS_ALLOWED</code> æ—¶ï¼Œæ­¤æ–¹æ³•ä¸å¯ç”¨ã€‚</p></blockquote><p>å°†æä¾›çš„å¤–éƒ¨æ•°æ®å°è£…è¿›ä¸€ä¸ªæ–°çš„ <code>Napi::ArrayBuffer</code> å®ä¾‹ï¼Œå¹¶å…è®¸æä¾›ææ„å›è°ƒã€‚</p><p><code>Napi::ArrayBuffer</code> å®ä¾‹ä¸æ‹¥æœ‰æ•°æ®ï¼Œä½†æœŸæœ›æ•°æ®åœ¨å…¶ç”Ÿå­˜æœŸå†…æœ‰æ•ˆã€‚æ•°æ®åªæœ‰åœ¨ <code>finalizeCallback</code> è¢«è°ƒç”¨æ—¶æ‰èƒ½è¢«é‡Šæ”¾ï¼Œè¿™è¡¨æ˜ <code>Napi::ArrayBuffer</code> å·²ç»è¢«é‡Šæ”¾ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">template</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> &lt;</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">typename</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> Finalizer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">static</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">ArrayBuffer</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">ArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">                       void*</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> externalData</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">                       size_t</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> byteLength</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">                       Finalizer</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> finalizeCallback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>[in] env</code>: åˆ›å»º <code>Napi::ArrayBuffer</code> å®ä¾‹çš„ç¯å¢ƒã€‚</li><li><code>[in] externalData</code>: è¦å°è£…çš„å¤–éƒ¨æ•°æ®çš„æŒ‡é’ˆã€‚</li><li><code>[in] byteLength</code>: <code>externalData</code> çš„é•¿åº¦ï¼Œå•ä½ä¸ºå­—èŠ‚ã€‚</li><li><code>[in] finalizeCallback</code>: å½“ <code>Napi::ArrayBuffer</code> è¢«é”€æ¯æ—¶è°ƒç”¨çš„å‡½æ•°ã€‚å®ƒå¿…é¡»å®ç° <code>operator()</code>ï¼Œæ¥å—ä¸€ä¸ª <code>Napi::Env</code>ã€ä¸€ä¸ª <code>void*</code>ï¼ˆå³ <code>externalData</code> æŒ‡é’ˆï¼‰å¹¶è¿”å› <code>void</code>ã€‚</li></ul><p>è¿”å›ä¸€ä¸ªæ–°çš„ <code>Napi::ArrayBuffer</code> å®ä¾‹ã€‚</p><h3 id="new-å¸¦ææ„å›è°ƒå’Œæç¤º" tabindex="-1"><a class="header-anchor" href="#new-å¸¦ææ„å›è°ƒå’Œæç¤º"><span><code>Newï¼ˆå¸¦ææ„å›è°ƒå’Œæç¤ºï¼‰</code></span></a></h3><blockquote><p>å½“å®šä¹‰äº† <code>NODE_API_NO_EXTERNAL_BUFFERS_ALLOWED</code> æ—¶ï¼Œæ­¤æ–¹æ³•ä¸å¯ç”¨ã€‚</p></blockquote><p>åŒä¸Šï¼Œä½†å…è®¸æä¾›ä¸€ä¸ªé¢å¤–çš„æç¤ºå‚æ•°ç»™ææ„å›è°ƒã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">template</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> &lt;</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">typename</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> Finalizer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> typename</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> Hint</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">static</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">ArrayBuffer</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">ArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">                       void*</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> externalData</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">                       size_t</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> byteLength</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">                       Finalizer</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> finalizeCallback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">                       Hint</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">*</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> finalizeHint</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>[in] env</code>: åˆ›å»º <code>Napi::ArrayBuffer</code> å®ä¾‹çš„ç¯å¢ƒã€‚</li><li><code>[in] externalData</code>: è¦å°è£…çš„å¤–éƒ¨æ•°æ®çš„æŒ‡é’ˆã€‚</li><li><code>[in] byteLength</code>: <code>externalData</code> çš„é•¿åº¦ï¼Œå•ä½ä¸ºå­—èŠ‚ã€‚</li><li><code>[in] finalizeCallback</code>: å½“ <code>Napi::ArrayBuffer</code> è¢«é”€æ¯æ—¶è°ƒç”¨çš„å‡½æ•°ã€‚ <ul><li>å®ƒå¿…é¡»å®ç° <code>operator()</code>ï¼Œæ¥å—ä¸€ä¸ª <code>Napi::Env</code>ã€ä¸€ä¸ª <code>void*</code>ï¼ˆå³ <code>externalData</code> æŒ‡é’ˆï¼‰å’Œä¸€ä¸ª <code>Hint*</code>ï¼Œå¹¶è¿”å› <code>void</code>ã€‚</li></ul></li><li><code>[in] finalizeHint</code>: ä½œä¸ºææ„å›è°ƒç¬¬äºŒä¸ªå‚æ•°ä¼ é€’çš„æç¤ºã€‚</li></ul><p>è¿”å›ä¸€ä¸ªæ–°çš„ <code>Napi::ArrayBuffer</code> å®ä¾‹ã€‚</p><h3 id="æ„é€ å‡½æ•°-3" tabindex="-1"><a class="header-anchor" href="#æ„é€ å‡½æ•°-3"><span><code>æ„é€ å‡½æ•°()</code></span></a></h3><p>åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„ <code>Napi::ArrayBuffer</code> ç±»å®ä¾‹ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">ArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="æ„é€ å‡½æ•°-env-arraybuffer" tabindex="-1"><a class="header-anchor" href="#æ„é€ å‡½æ•°-env-arraybuffer"><span><code>æ„é€ å‡½æ•°(env,arrayBuffer)</code></span></a></h3><p>åˆå§‹åŒ–ä¸€ä¸ªç°æœ‰ <code>Napi::ArrayBuffer</code> å¯¹è±¡çš„åŒ…è£…å®ä¾‹ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">ArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">napi_env env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> napi_value value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] env</code>: åˆ›å»º <code>Napi::ArrayBuffer</code> å®ä¾‹çš„ç¯å¢ƒã€‚</li><li><code>[in] value</code>: è¦å°è£…çš„ <code>Napi::ArrayBuffer</code> å¼•ç”¨ã€‚</li></ul><h3 id="bytelength" tabindex="-1"><a class="header-anchor" href="#bytelength"><span><code>ByteLength()</code></span></a></h3><p>è¿”å›å°è£…æ•°æ®çš„é•¿åº¦ï¼Œå•ä½ä¸ºå­—èŠ‚ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">size_t</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">ArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ByteLength</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="void-data" tabindex="-1"><a class="header-anchor" href="#void-data"><span><code>void* Data()</code></span></a></h3><p>è¿”å›æŒ‡å‘å°è£…æ•°æ®çš„æŒ‡é’ˆã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void*</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">ArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="void-detach" tabindex="-1"><a class="header-anchor" href="#void-detach"><span><code>void Detach()</code></span></a></h3><p>åœ¨å¯åˆ†ç¦»çš„ <code>ArrayBuffer</code> ä¸Šè°ƒç”¨ <code>ArrayBuffer</code> åˆ†ç¦»æ“ä½œã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">ArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Detach</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="bool-isdetached" tabindex="-1"><a class="header-anchor" href="#bool-isdetached"><span><code>bool IsDetached()</code></span></a></h3><p>å¦‚æœæ­¤ <code>ArrayBuffer</code> å·²ç»åˆ†ç¦»ï¼Œåˆ™è¿”å› <code>true</code>ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">bool</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">ArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">IsDetached</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="æ¡ˆä¾‹-passing-array-buffer-to-native" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-passing-array-buffer-to-native"><span>æ¡ˆä¾‹ï¼špassing_array_buffer_to_native</span></a></h3><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-30" aria-selected="true"><code>src/MyObject.hh</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-31" aria-selected="false"><code>index.js</code></button></div><!--[--><div class="vp-code-tab active" id="v-30" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title"><code>src/MyObject.hh</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;iostream&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> processArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">ArrayBuffer</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> buffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // print</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    uint8_t</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> *</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">data </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">uint8_t</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> *</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">buffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    uint32_t</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> length </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> buffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ByteLength</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> /</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> sizeof</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">uint8_t</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    </span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;bytes:&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    for</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">int32_t</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> i </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> i </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> length</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> i</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">++</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">        std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> +</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">i</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;,&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // test for copy to vector</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">vector</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">uint8_t</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> u8Vector</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> data </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">+</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> length</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // print vector</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;bytes:&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    for</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">uint8_t</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> item </span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> u8Vector</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">        std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> +</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">item </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;,&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> readArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // type check</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Length</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 1</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">IsArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">())</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    {</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">        Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">TypeError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;expect arg0 is ArrayBuffer.&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">).</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ThrowAsJavaScriptException</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Boolean</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">ArrayBuffer buffer </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">ArrayBuffer</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">    processArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">buffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Boolean</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> InitAll</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;readArrayBuffer&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> readArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NODE_API_MODULE</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">NODE_GYP_MODULE_NAME</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> InitAll</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-31" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>index.js</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">#</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> node</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">var addon </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;bindings&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;hello_world&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let readArrayBuffer </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">readArrayBuffer</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let arrayBuf </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#569CD6;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> ArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">10</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let dataView </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#569CD6;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> DataView</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">arrayBuf</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let typedAry </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#569CD6;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Uint8Array</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">arrayBuf</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">dataView</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">setUint8</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">dataView</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">setUint8</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 2</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">dataView</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">setUint8</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 3</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">typedAry</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">3</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">4</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">typedAry</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">4</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">5</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">typedAry</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">5</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">6</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">arrayBuf</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">readArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">arrayBuf</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">))</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">/**</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> * bytes:1,2,3,4,5,6,0,0,0,0,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> * bytes:1,2,3,4,5,6,0,0,0,0,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> * true</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> */</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h2 id="typedarray" tabindex="-1"><a class="header-anchor" href="#typedarray"><span>TypedArray</span></a></h2><p><code>Napi::TypedArray</code> ç±»æ˜¯ä»ç±» [<code>Napi::Object</code>][] ç»§æ‰¿çš„ã€‚</p><p>è¿™ä¸ª <code>Napi::TypedArray</code> ç±»å¯¹åº”äº JavaScript ä¸­çš„ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noopener noreferrer">TypedArray</a> ç±»ã€‚</p><h3 id="æ„é€ å‡½æ•°-4" tabindex="-1"><a class="header-anchor" href="#æ„é€ å‡½æ•°-4"><span><code>æ„é€ å‡½æ•°()</code></span></a></h3><p>åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„ <code>Napi::TypedArray</code> ç±»å®ä¾‹ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">TypedArray</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">TypedArray</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="æ„é€ å‡½æ•°-env-typedarray" tabindex="-1"><a class="header-anchor" href="#æ„é€ å‡½æ•°-env-typedarray"><span><code>æ„é€ å‡½æ•°(env,typedArray)</code></span></a></h3><p>æ ¹æ®ç°æœ‰çš„ <code>Napi::TypedArray</code> å®ä¾‹åˆå§‹åŒ–ä¸€ä¸ªåŒ…è£…å™¨å®ä¾‹ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">TypedArray</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">TypedArray</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">napi_env env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> napi_value value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>[in] env</code>ï¼šç”¨äºåˆ›å»º <code>Napi::TypedArray</code> å®ä¾‹çš„ç¯å¢ƒã€‚</li><li><code>[in] value</code>ï¼šè¦å°è£…çš„ <code>Napi::TypedArray</code> å¼•ç”¨ã€‚</li></ul><h3 id="napi-typedarray-type-typedarraytype" tabindex="-1"><a class="header-anchor" href="#napi-typedarray-type-typedarraytype"><span><code>napi_typedarray_type TypedArrayType()</code></span></a></h3><p>è¿”å›æ­¤å®ä¾‹çš„ç±»å‹ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_typedarray_type</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">TypedArray</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">TypedArrayType</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="arraybuffer-1" tabindex="-1"><a class="header-anchor" href="#arraybuffer-1"><span><code>ArrayBuffer()</code></span></a></h3><p>è¿”å›æ”¯æŒæ­¤ <code>TypedArray</code> çš„ <code>Napi::ArrayBuffer</code>ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">ArrayBuffer</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">TypedArray</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="uint8-t-elementsize" tabindex="-1"><a class="header-anchor" href="#uint8-t-elementsize"><span><code>uint8_t ElementSize()</code></span></a></h3><p>è¿”å›å•ä¸ªå…ƒç´ çš„å¤§å°ï¼Œå•ä½ä¸ºå­—èŠ‚ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">uint8_t</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">TypedArray</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ElementSize</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="size-t-elementlength" tabindex="-1"><a class="header-anchor" href="#size-t-elementlength"><span><code>size_t ElementLength()</code></span></a></h3><p>è¿”å›å…ƒç´ çš„æ•°é‡ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">size_t</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">TypedArray</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ElementLength</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="size-t-byteoffset" tabindex="-1"><a class="header-anchor" href="#size-t-byteoffset"><span><code>size_t ByteOffset()</code></span></a></h3><p>è¿”å›æ•°ç»„åœ¨ <code>Napi::ArrayBuffer</code> ä¸­èµ·å§‹çš„åç§»é‡ï¼Œå•ä½ä¸ºå­—èŠ‚ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">size_t</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">TypedArray</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ByteOffset</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="size-t-bytelength" tabindex="-1"><a class="header-anchor" href="#size-t-bytelength"><span><code>size_t ByteLength()</code></span></a></h3><p>è¿”å›æ•°ç»„çš„æ€»é•¿åº¦ï¼Œå•ä½ä¸ºå­—èŠ‚ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">size_t</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">TypedArray</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ByteLength</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>æ³¨ï¼š</strong></p><p>TypedArray å®é™…ä¸Šæ˜¯å¯¹åº•å±‚ ArrayBuffer çš„ä¸€ä¸ªè§†å›¾ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥æŒ‡å‘ ArrayBuffer å†…å­˜ä¸­çš„ä»»æ„ä½ç½®ï¼Œè€Œä¸ä¸€å®šä»å¤´å¼€å§‹ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">// å‡è®¾æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ª ArrayBufferï¼Œå¤§å°ä¸º 20 å­—èŠ‚</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">ArrayBuffer buffer </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">ArrayBuffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 20</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">// åˆ›å»ºä¸€ä¸ªä»ç¬¬4å­—èŠ‚å¼€å§‹çš„Float32Arrayï¼Œå‡è®¾æ¯ä¸ªæµ®ç‚¹æ•°å ç”¨4å­—èŠ‚</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Float32Array typedArray </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Float32Array</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> buffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 4</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> /* byteOffset */</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 3</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> /* length */</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ¡ˆä¾‹-passing-typed-array-to-native" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-passing-typed-array-to-native"><span>æ¡ˆä¾‹ï¼špassing_typed_array_to_native</span></a></h3><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-32" aria-selected="true"><code>src/MyObject.hh</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-33" aria-selected="false"><code>index.js</code></button></div><!--[--><div class="vp-code-tab active" id="v-32" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title"><code>src/MyObject.hh</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;iostream&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> processUint16Array</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Uint16Array</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> uint16Array</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    uint16_t</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> *</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">data </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> uint16Array</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    uint32_t</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> length </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> uint16Array</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ByteLength</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> /</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> sizeof</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">uint16_t</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    for</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">int32_t</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> i </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> i </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> length</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> i</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">++</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">        std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">i</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;,&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // test for copy to vector</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">vector</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">uint16_t</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> u16Vector</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">uint16Array</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(),</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> uint16Array</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> +</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> uint16Array</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ElementLength</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">());</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // print vector</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;vector:&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    for</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">uint16_t</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> item </span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">:</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> u16Vector</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">        std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> item </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;,&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> readTypedArray</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // type check</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Length</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 1</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">IsTypedArray</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> ||</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">TypedArray</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">().</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">TypedArrayType</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> !=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> napi_uint16_array</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    {</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">        Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">TypeError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;expect arg0 is uint16_array.&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">).</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ThrowAsJavaScriptException</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Boolean</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">TypedArray typedArray </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">TypedArray</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Uint16Array uint16Array </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> typedArray</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Uint16Array</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // process</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">    processUint16Array</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">uint16Array</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Boolean</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> InitAll</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;readTypedArray&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> readTypedArray</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NODE_API_MODULE</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">NODE_GYP_MODULE_NAME</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> InitAll</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-33" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>index.js</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">#</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> node</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">var addon </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;bindings&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;hello_world&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let readTypedArray </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">readTypedArray</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let typedArray </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#569CD6;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Uint16Array</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">10</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">typedArray</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 1</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">typedArray</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 2</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">typedArray</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">readTypedArray</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">typedArray</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">))</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">/**</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    1,2,3,0,0,0,0,0,0,0,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    vector:1,2,3,0,0,0,0,0,0,0,</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    true</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> */</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h2 id="reference" tabindex="-1"><a class="header-anchor" href="#reference"><span>Reference</span></a></h2><ul><li>ä¿å­˜å¯¹ <code>Napi::Value</code> å¯¹è±¡çš„è®¡æ•°å¼•ç”¨ï¼›</li><li>é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™æœ€åˆæ˜¯å¼±å¼•ç”¨ï¼Œå¯ä»¥é€šè¿‡è°ƒæ•´å¼•ç”¨è®¡æ•°å°†å…¶æ›´æ”¹ä¸ºå¼ºå¼•ç”¨ã€‚</li><li>å½“å¼•ç”¨è®¡æ•°ä¸ºé›¶æ—¶ï¼Œå¼•ç”¨çš„â€œNapi<i class="vp-icon fas fa-Valueâ€ä¸ä¼šç«‹å³é”€æ¯ï¼› fa-å¦‚æœæ²¡æœ‰å…¶ä»–å¯¹â€œNapi" sizing="height"></i>Valueâ€çš„å¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒæ‰æœ‰èµ„æ ¼è¿›è¡Œåƒåœ¾æ”¶é›†ã€‚</li><li>åœ¨é™æ€ç©ºé—´ä¸­åˆ†é…çš„â€œNapi::Referenceâ€å¯¹è±¡ï¼ˆä¾‹å¦‚å…¨å±€é™æ€å®ä¾‹ï¼‰å¿…é¡»è°ƒç”¨â€œSuppressDestructâ€æ–¹æ³•ï¼Œä»¥é˜²æ­¢åœ¨ç¨‹åºå…³é—­æ—¶è¿è¡Œçš„ææ„å‡½æ•°åœ¨ç¯å¢ƒä¸å†æœ‰æ•ˆæ—¶å°è¯•é‡ç½®å¼•ç”¨ã€‚å¦‚æœå¯èƒ½çš„è¯ï¼Œé¿å…ä½¿ç”¨è¿™ä¸ªã€‚</li></ul><h3 id="functionreference" tabindex="-1"><a class="header-anchor" href="#functionreference"><span>FunctionReference</span></a></h3><ul><li><code>Napi::FunctionReference</code> æ˜¯ <code>Napi::Reference</code> çš„å­ç±»ï¼Œå¹¶ä¸”ç›¸å½“äº <code>Napi::Reference&lt;Napi::Function&gt;</code> çš„å®ä¾‹ã€‚</li><li>è¿™æ„å‘³ç€<code>Napi::FunctionReference</code> åŒ…å«ä¸€ä¸ª <code>Napi::Function</code> å’Œä¸€ä¸ªå¯¹â€œNapi::Functionâ€çš„å¼•ç”¨æ¬¡æ•°çš„è®¡æ•°ã€‚</li><li>å½“è®¡æ•°ä¸ºå¤§äº 0ï¼Œ<code>Napi::FunctionReference</code> ä¸ç¬¦åˆåƒåœ¾å›æ”¶æ¡ä»¶ã€‚</li><li>è¿™ç¡®ä¿äº†â€œFunctionâ€ä»ç„¶å¯ä»¥è®¿é—®ï¼Œå³ä½¿åŸå§‹çš„ä¸å†æä¾›å¯¹å…¶çš„å¼•ç”¨ã€‚</li><li><code>Napi::FunctionReference</code> å…è®¸å¼•ç”¨çš„ JavaScript å‡½æ•°å¯¹è±¡ä½¿ç”¨ä¸¤ç§ä¸åŒçš„æ–¹æ³•ä»æœ¬æœºé™„åŠ ç»„ä»¶è°ƒç”¨ï¼šâ€œCallâ€å’Œâ€œMakeCallbackâ€ã€‚</li><li><code>Napi::FunctionReference</code> ç±»ç»§æ‰¿äº† <code>Napi::Reference</code> çš„è¡Œä¸º</li></ul><h4 id="æ¡ˆä¾‹-function-reference" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-function-reference"><span>æ¡ˆä¾‹ï¼šfunction_reference</span></a></h4><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-34" aria-selected="true"><code>src/addon.cc</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-35" aria-selected="false"><code>index.js</code></button></div><!--[--><div class="vp-code-tab active" id="v-34" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title"><code>src/addon.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;iostream&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">class</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> Demo</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> :</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> public</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">ObjectWrap</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Demo</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">public</span><span style="--shiki-light:#7C7F93;--shiki-dark:#569CD6;">:</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function fun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">FunctionReference funRef</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">    Demo</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">        :</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> ObjectWrap</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    {</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> setFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">        fun </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">        funRef </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Persistent</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">fun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> callFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">        fun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Call</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">{}</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> callFunRef</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">        funRef</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Call</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">{}</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    static</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">FunctionReference constructor</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    static</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    {</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">        Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function fun </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> DefineClass</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">            env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">            &quot;Demo&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">            {</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">                InstanceMethod</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;setFun&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &amp;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Demo</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">setFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> napi_default_method</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">                InstanceMethod</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;callFun&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &amp;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Demo</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">callFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> napi_default_method</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">                InstanceMethod</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;callFunRef&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &amp;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Demo</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">callFunRef</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> napi_default_method</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">            }</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">        constructor </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Persistent</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">fun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">        constructor</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">SuppressDestruct</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">        exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;Demo&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> fun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">};</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">FunctionReference </span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Demo</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">constructor</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Demo</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NODE_API_MODULE</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">NODE_GYP_MODULE_NAME</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-35" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>index.js</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">#</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> node</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">var </span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Demo </span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;bindings&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;hello_world&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">async function </span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">main</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    let demo </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#569CD6;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Demo</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    let fun </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> ()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;hello world&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    demo</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">setFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">fun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    demo</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">callFunRef</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> //  hello world</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    try</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">        demo</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">callFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // error</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    }</span><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;"> catch</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">error</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">        console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">error</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">main</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h2 id="asyncworker" tabindex="-1"><a class="header-anchor" href="#asyncworker"><span>AsyncWorker</span></a></h2><p><code>Napi::AsyncWorker</code> æ˜¯ <code>node-addon-api</code> æä¾›çš„ä¸€ä¸ªç”¨äºå¤„ç†å¼‚æ­¥ä»»åŠ¡çš„æŠ½è±¡ç±»ã€‚ä»¥ä¸‹æ˜¯å…³äºå®ƒçš„è¯¦ç»†è¯´æ˜ï¼š</p><h3 id="ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#ä½œç”¨"><span>ä½œç”¨</span></a></h3><p><code>Napi::AsyncWorker</code> æ—¨åœ¨å¸®åŠ©å¼€å‘è€…æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ul><li><strong>æ‰§è¡Œå¼‚æ­¥æ“ä½œ</strong>ï¼šå¤„ç†é‚£äº›ä¸åº”è¯¥åœ¨ Node.js ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œçš„è€—æ—¶æˆ–è®¡ç®—å¯†é›†å‹ä»»åŠ¡ã€‚</li><li><strong>çº¿ç¨‹é—´æ•°æ®ä¼ é€’</strong>ï¼šåœ¨å·¥ä½œçº¿ç¨‹å’Œä¸»çº¿ç¨‹ä¹‹é—´å®‰å…¨åœ°ç§»åŠ¨æ•°æ®ã€‚</li><li><strong>çº¿ç¨‹é—´é€šä¿¡</strong>ï¼šå…è®¸å·¥ä½œçº¿ç¨‹é€šè¿‡å›è°ƒä¸ä¸»çº¿ç¨‹ä¸Šçš„ JavaScript ä»£ç äº¤äº’ã€‚</li></ul><h3 id="ä½¿ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯"><span>ä½¿ç”¨åœºæ™¯</span></a></h3><p>å…¸å‹çš„ä½¿ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p><ul><li>æ‰§è¡Œé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œå¦‚æ–‡ä»¶ I/Oã€ç½‘ç»œè¯·æ±‚æˆ–æ•°æ®åº“æ“ä½œã€‚</li><li>æ‰§è¡Œ CPU å¯†é›†å‹è®¡ç®—ï¼Œä»¥é¿å…é˜»å¡ä¸»çº¿ç¨‹çš„äº‹ä»¶å¾ªç¯ã€‚</li></ul><h3 id="queue-æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#queue-æ–¹æ³•"><span><code>Queue</code> æ–¹æ³•</span></a></h3><p>é€šè¿‡è°ƒç”¨ <code>Napi::AsyncWorker</code> å®ä¾‹çš„ <code>Queue</code> æ–¹æ³•ï¼Œä½ å¯ä»¥å°†å¼‚æ­¥å·¥ä½œé¡¹æ·»åŠ åˆ°å·¥ä½œé˜Ÿåˆ—ä¸­ã€‚libuv çš„å·¥ä½œçº¿ç¨‹æ± å°†å¼‚æ­¥åœ°æ‰§è¡Œè¿™äº›å·¥ä½œé¡¹ã€‚</p><h3 id="execute-å’Œ-onok-çš„é‡å†™" tabindex="-1"><a class="header-anchor" href="#execute-å’Œ-onok-çš„é‡å†™"><span><code>Execute</code> å’Œ <code>OnOK</code> çš„é‡å†™</span></a></h3><p>åœ¨å­ç±»ä¸­ï¼Œä½ éœ€è¦é‡å†™ä»¥ä¸‹æ–¹æ³•ï¼š</p><ul><li><strong><code>Execute()</code></strong>ï¼šåœ¨å·¥ä½œçº¿ç¨‹ä¸Šæ‰§è¡Œå®é™…çš„å¼‚æ­¥ä»»åŠ¡ã€‚ä¸åº”åœ¨æ­¤æ–¹æ³•ä¸­ç›´æ¥è°ƒç”¨ JavaScript å‡½æ•°æˆ– Node.js çš„ C++ APIï¼Œå› ä¸ºè¿™å¯èƒ½å¯¼è‡´çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</li><li><strong><code>OnOK()</code></strong>ï¼šå¦‚æœ <code>Execute</code> æˆåŠŸå®Œæˆï¼Œè¯¥æ–¹æ³•å°†è¢«è°ƒç”¨ã€‚å®ƒç”¨äºå¤„ç†æ‰§è¡Œç»“æœï¼Œå¹¶é€šå¸¸åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œä»¥ä¾¿ä¸ JavaScript ä»£ç äº¤äº’ã€‚</li></ul><h3 id="çº¿ç¨‹æ‰§è¡Œç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹æ‰§è¡Œç¯å¢ƒ"><span>çº¿ç¨‹æ‰§è¡Œç¯å¢ƒ</span></a></h3><ul><li><code>Execute()</code> åœ¨ libuv å·¥ä½œçº¿ç¨‹æ± ä¸­çš„ä¸€ä¸ªçº¿ç¨‹ä¸Šæ‰§è¡Œã€‚</li><li><code>OnOK()</code> å’Œå…¶ä»–å›è°ƒæ–¹æ³•ï¼ˆå¦‚ <code>OnError()</code>ï¼‰åœ¨ Node.js çš„ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œã€‚</li></ul><p><strong>ä¸ºä»€ä¹ˆä¸èƒ½åœ¨ <code>Execute</code> ä¸­ç›´æ¥è°ƒç”¨ JavaScript å‡½æ•°</strong></p><p>åœ¨ <code>Execute()</code> ä¸­ç›´æ¥è°ƒç”¨ JavaScript å‡½æ•°æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºï¼š</p><ul><li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šNode.js å’Œå…¶ V8 å¼•æ“ä¸»è¦è®¾è®¡ä¸ºå•çº¿ç¨‹æ‰§è¡Œï¼Œç›´æ¥åœ¨å·¥ä½œçº¿ç¨‹ä¸Šè°ƒç”¨ JavaScript å‡½æ•°å¯èƒ½å¯¼è‡´çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</li><li><strong>äº‹ä»¶å¾ªç¯é˜»å¡</strong>ï¼šè¿™å¯èƒ½å¯¼è‡´ Node.js çš„äº‹ä»¶å¾ªç¯è¢«é˜»å¡ï¼Œå½±å“åº”ç”¨çš„å“åº”æ€§ã€‚</li></ul><h3 id="å¦‚ä½•å®‰å…¨è°ƒç”¨-javascript-å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•å®‰å…¨è°ƒç”¨-javascript-å‡½æ•°"><span>å¦‚ä½•å®‰å…¨è°ƒç”¨ JavaScript å‡½æ•°</span></a></h3><p>ä¸ºäº†å®‰å…¨åœ°ä»å·¥ä½œçº¿ç¨‹è°ƒç”¨ JavaScript å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨ <code>Napi::ThreadSafeFunction</code>ï¼š</p><ol><li>é€šè¿‡ <code>BlockingCall</code> æˆ– <code>NonBlockingCall</code> æ–¹æ³•åœ¨å·¥ä½œçº¿ç¨‹ä¸­å®‰æ’å›è°ƒã€‚</li><li>è¿™äº›æ–¹æ³•å°†è¯·æ±‚æ’é˜Ÿï¼Œç”±ä¸»çº¿ç¨‹ä¸Šçš„äº‹ä»¶å¾ªç¯å¼‚æ­¥å¤„ç†ã€‚</li></ol><h3 id="å·¥ä½œçº¿ç¨‹æ± " tabindex="-1"><a class="header-anchor" href="#å·¥ä½œçº¿ç¨‹æ± "><span>å·¥ä½œçº¿ç¨‹æ± </span></a></h3><p>Node.js ä½¿ç”¨ libuv åº“ï¼Œåè€…ç»´æŠ¤äº†ä¸€ä¸ªå·¥ä½œçº¿ç¨‹æ± æ¥æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ã€‚çº¿ç¨‹æ± çš„å¤§å°å¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆå¦‚ <code>UV_THREADPOOL_SIZE</code>ï¼‰æ¥æ§åˆ¶ã€‚</p><h3 id="ä¸ºä»€ä¹ˆ-execute-æ–¹æ³•ä¸ä¼šäº’ç›¸é˜»å¡" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆ-execute-æ–¹æ³•ä¸ä¼šäº’ç›¸é˜»å¡"><span>ä¸ºä»€ä¹ˆ <code>Execute</code> æ–¹æ³•ä¸ä¼šäº’ç›¸é˜»å¡</span></a></h3><ul><li><strong>ç‹¬ç«‹æ‰§è¡Œ</strong>ï¼šæ¯ä¸ª <code>Execute()</code> è°ƒç”¨åœ¨ç‹¬ç«‹çš„å·¥ä½œçº¿ç¨‹ä¸Šè¿è¡Œï¼Œå› æ­¤ä¸ä¼šç›´æ¥å½±å“å…¶ä»– <code>Execute()</code> è°ƒç”¨çš„æ‰§è¡Œã€‚</li><li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šå°½ç®¡ <code>BlockingCall</code> åœ¨å·¥ä½œçº¿ç¨‹ä¸ŠåŒæ­¥æ‰§è¡Œ Lambda è¡¨è¾¾å¼ï¼Œä½†å®ƒå†…éƒ¨å®‰æ’çš„ JavaScript å›è°ƒæ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œç”±äº‹ä»¶å¾ªç¯ç®¡ç†ï¼Œå› æ­¤ä¸ä¼šé˜»å¡å·¥ä½œçº¿ç¨‹ã€‚</li></ul><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œ<code>Napi::AsyncWorker</code> å…è®¸å¼€å‘è€…åˆ©ç”¨å¤šçº¿ç¨‹æ¥æé«˜æ€§èƒ½ï¼ŒåŒæ—¶ç¡®ä¿ä¸ Node.js çš„å¼‚æ­¥äº‹ä»¶é©±åŠ¨æ¨¡å‹å…¼å®¹ã€‚</p><h3 id="æ¡ˆä¾‹-my-async-worker" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-my-async-worker"><span>æ¡ˆä¾‹ï¼šmy_async_worker</span></a></h3><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-36" aria-selected="true"><code>index.js</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-37" aria-selected="false"><code>src/MyAsyncWorker.cc</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-38" aria-selected="false"><code>src/MyAsyncWorker.hh</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-39" aria-selected="false"><code>src/addon.cc</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-40" aria-selected="false"><code>binding.gyp</code></button></div><!--[--><div class="vp-code-tab active" id="v-36" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title"><code>index.js</code></div><!--[--><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-js"><span class="line"><span style="--shiki-light:#EA76CB;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">#! node</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">var</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> addon</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;bindings&#39;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">)(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;hello_world&#39;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">async</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> function</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> main</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    addon</span><span style="--shiki-light:#179299;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">StartAsyncWorker</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> ()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">        console</span><span style="--shiki-light:#179299;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;callback:done1&#39;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    },</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;data1&quot;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    addon</span><span style="--shiki-light:#179299;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">StartAsyncWorker</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> ()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">        console</span><span style="--shiki-light:#179299;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;callback:done2&#39;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    },</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;data2&quot;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">main</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">/**</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">$ node ./index.js</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">StartWorker</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">StartWorker</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">Execute</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">Execute</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">0:data1</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">0:data2</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">1:data1</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">1:data2</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">2:data1</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">2:data2</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">3:data1</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">OnOK</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">3:data2</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">callback:done1</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">Destroy</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">OnOK</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">callback:done2</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> */</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-37" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>src/MyAsyncWorker.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;MyAsyncWorker.hh&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;iostream&gt;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;thread&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">MyAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">MyAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&amp;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">callback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">string </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&amp;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    : </span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">AsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">callback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Execute</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">/**</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> * Execute ä¸åœ¨äº‹ä»¶å¾ªç¯çº¿ç¨‹ä¸Šè¿è¡Œï¼Œ</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> * å› æ­¤å¿…é¡»é¿å…è°ƒç”¨ä»»ä½•å¯èƒ½è°ƒç”¨ JavaScript çš„ node-addon-api æ–¹æ³•ã€‚</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> */</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;Execute&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">length</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> ==</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    {</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">        OnError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Error</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(),</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;fall to get data&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // æ¨¡æ‹Ÿå¤„ç†æ•°æ®çš„è€—æ—¶æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    for</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">size_t</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> i </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> i </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;=</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 3</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> i</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">++</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    {</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">        std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">this_thread</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">sleep_for</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">chrono</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">seconds</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">        std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">to_string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">i</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;:&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> data </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">OnOK</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">/**</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> * åœ¨ Execute æ–¹æ³•å®Œæˆåè¢«è°ƒç”¨ï¼Œå¹¶ä¸”å®ƒä»¬åœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œã€‚</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> * è¿™æ„å‘³ç€ä»»ä½•é€šè¿‡ node-addon-api ä¸ JavaScript çš„äº¤äº’ï¼ˆä¾‹å¦‚ï¼Œè°ƒç”¨ JavaScript å›è°ƒï¼‰éƒ½åº”è¯¥åœ¨è¿™äº›æ–¹æ³•ä¸­æ‰§è¡Œã€‚</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> */</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;OnOK&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">HandleScope </span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">scope</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">FunctionReference </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&amp;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">callback </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Callback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // æ‰§è¡Œå®Œæ¯•åè°ƒç”¨å›è°ƒå‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    callback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Call</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">{}</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">OnError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Error</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">e</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;OnError&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Destroy</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;Destroy&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">vector</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">GetResult</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;GetResult&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {};</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-38" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>src/MyAsyncWorker.hh</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#ifndef</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> __MyAsyncWorker__</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#define</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> __MyAsyncWorker__</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">class</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> MyAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> :</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> public</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">AsyncWorker</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">private</span><span style="--shiki-light:#7C7F93;--shiki-dark:#569CD6;">:</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">string data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">public</span><span style="--shiki-light:#7C7F93;--shiki-dark:#569CD6;">:</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">    MyAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Function</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">callback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">string</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Execute</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> override</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> OnOK</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> override</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> OnError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Error</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">e</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> override</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Destroy</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> override</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">vector</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> GetResult</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">};</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#endif</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-39" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>src/addon.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;MyAsyncWorker.hh&quot;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;iostream&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> StartAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function callback </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String str </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">string u8str </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> str</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Utf8Value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    MyAsyncWorker </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">*</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">myAsyncWorker </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#569CD6;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> MyAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">callback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> u8str</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    /*</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">        Queueæ–¹æ³•ç”¨äºå°† Napi::AsyncWorker å®ä¾‹æ’é˜Ÿç­‰å¾…æ‰§è¡Œã€‚ä¸€æ—¦æœ‰å¯ç”¨çš„å·¥ä½œçº¿ç¨‹ï¼ŒExecute æ–¹æ³•å°†è¢«è°ƒç”¨ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">        å·¥ä½œçº¿ç¨‹æ± </span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">            Node.js ä½¿ç”¨ libuv åº“ï¼Œå®ƒå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªå·¥ä½œçº¿ç¨‹æ± ã€‚</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">            è¿™ä¸ªçº¿ç¨‹æ± è´Ÿè´£æ‰§è¡Œé‚£äº›ä¸éœ€è¦äº‹ä»¶å¾ªç¯ä¸Šä¸‹æ–‡çš„ä»»åŠ¡ï¼Œæ¯”å¦‚é•¿æ—¶é—´è®¡ç®—æˆ–è€…æŸäº› I/O æ“ä½œã€‚</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">        å¹¶å‘æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">            å½“å¤šä¸ª Napi::AsyncWorker å®ä¾‹è°ƒç”¨äº† Queue æ–¹æ³•ï¼Œlibuv ä¼šæ ¹æ®çº¿ç¨‹æ± ä¸­çº¿ç¨‹çš„å¯ç”¨æ€§æ¥å¹¶å‘åœ°æ‰§è¡Œè¿™äº›å·¥ä½œé¡¹ã€‚å¦‚æœçº¿ç¨‹æ± ä¸­æœ‰è¶³å¤Ÿçš„çº¿ç¨‹ï¼Œé‚£ä¹ˆè¿™äº› Execute æ–¹æ³•å¯ä»¥åŒæ—¶åœ¨ä¸åŒçš„çº¿ç¨‹ä¸Šæ‰§è¡Œã€‚</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    */</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    myAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Queue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;StartWorker&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;StartAsyncWorker&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> StartAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NODE_API_MODULE</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">NODE_GYP_MODULE_NAME</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-40" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>binding.gyp</code></div><!--[--><div class="language-gyp line-numbers-mode" data-highlighter="shiki" data-ext="gyp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-gyp"><span class="line"><span>{</span></span>
<span class="line"><span>  &quot;targets&quot;: [</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>      &quot;target_name&quot;: &quot;hello_world&quot;,</span></span>
<span class="line"><span>      &quot;sources&quot;: [</span></span>
<span class="line"><span>        &quot;src/addon.cc&quot;,</span></span>
<span class="line"><span>        &quot;src/MyAsyncWorker.cc&quot;</span></span>
<span class="line"><span>        ],</span></span>
<span class="line"><span>      &quot;include_dirs&quot;: [</span></span>
<span class="line"><span>        &quot;src/MyAsyncWorker.hh&quot;,</span></span>
<span class="line"><span>        &quot;&lt;!@(node -p \&quot;require(&#39;node-addon-api&#39;).include\&quot;)&quot;</span></span>
<span class="line"><span>      ],</span></span>
<span class="line"><span>      &quot;dependencies&quot;: [</span></span>
<span class="line"><span>        &quot;&lt;!(node -p \&quot;require(&#39;node-addon-api&#39;).targets\&quot;):node_addon_api&quot;</span></span>
<span class="line"><span>      ]</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  ],</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="æ¡ˆä¾‹-async-worker-call-js-function" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-async-worker-call-js-function"><span>æ¡ˆä¾‹ï¼šasync_worker_call_js_function</span></a></h3><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-41" aria-selected="true"><code>index.js</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-42" aria-selected="false"><code>src/MyAsyncWorker.cc</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-43" aria-selected="false"><code>src/MyAsyncWorker.hh</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-44" aria-selected="false"><code>src/addon.cc</code></button></div><!--[--><div class="vp-code-tab active" id="v-41" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title"><code>index.js</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">#</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> node</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">var addon </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;bindings&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;hello_world&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">let </span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> EventEmitter </span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;events&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">class</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> MySocket extends </span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">EventEmitter</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">    constructor</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">        super</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">        addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">CreatMyDispatcher</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#D20F39;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">emit</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">bind</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#D20F39;--shiki-dark:#569CD6;">this</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">async function </span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">main</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    let mySocket </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#569CD6;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> MySocket</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    mySocket</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">on</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;open&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> ()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">        console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;open&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    }</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    mySocket</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">on</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;data&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">        console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;data&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    }</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    mySocket</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">on</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;close&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> ()</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">        console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;close&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    }</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">main</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">/**</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">CreatMyDispatcher</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">Execute</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">open</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">data &lt;Buffer 00 01 02 03 04&gt;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">data &lt;Buffer 00 01 02 03 04&gt;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">data &lt;Buffer 00 01 02 03 04&gt;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">data &lt;Buffer 00 01 02 03 04&gt;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">data &lt;Buffer 00 01 02 03 04&gt;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">data &lt;Buffer 00 01 02 03 04&gt;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">data &lt;Buffer 00 01 02 03 04&gt;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">data &lt;Buffer 00 01 02 03 04&gt;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">data &lt;Buffer 00 01 02 03 04&gt;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">data &lt;Buffer 00 01 02 03 04&gt;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">data &lt;Buffer 00 01 02 03 04&gt;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">close</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">OnOK</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">Destroy</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> */</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-42" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>src/MyAsyncWorker.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;MyDispatcher.hh&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;iostream&gt;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;thread&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">MyDispatcher</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">MyDispatcher</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&amp;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">jsEmitFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    : </span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">AsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">      jsEmitFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">jsEmitFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">      tsEmitFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">ThreadSafeFunction</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> jsEmitFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;tsEmitFun&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)}</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyDispatcher</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Execute</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;Execute&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // æ¨¡æ‹Ÿå»ºç«‹è¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">this_thread</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">sleep_for</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">chrono</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">seconds</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    tsEmitFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">BlockingCall</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">        [](</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Function</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> jsEmitFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">        {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">            jsEmitFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Call</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">{Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;open&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Undefined</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">}</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">        });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // æ¨¡æ‹Ÿä¼ è¾“æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">this_thread</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">sleep_for</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">chrono</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">seconds</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    for</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">size_t</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> i </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> i </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;=</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 10</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> i</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">++</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">        tsEmitFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">BlockingCall</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">            [](</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Function</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> jsEmitFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">            {</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">                uint8_t</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> data[] </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 2</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 3</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 4</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">};</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">                jsEmitFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Call</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">{Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;data&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Buffer</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">uint8_t</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> sizeof</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">))</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">}</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">            });</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">        std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">this_thread</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">sleep_for</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">chrono</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">seconds</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // æ¨¡æ‹Ÿæ–­å¼€é“¾æ¥</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">this_thread</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">sleep_for</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">chrono</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">seconds</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    tsEmitFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">BlockingCall</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">        [](</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Function</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> jsEmitFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">        {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">            jsEmitFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Call</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">{Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;close&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Undefined</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">}</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">        });</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyDispatcher</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">OnOK</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;OnOK&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyDispatcher</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">OnError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Error</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">e</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;OnError&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyDispatcher</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Destroy</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;Destroy&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">vector</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyDispatcher</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">GetResult</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;GetResult&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {};</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-43" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>src/MyAsyncWorker.hh</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#ifndef</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> __MyDispatcher__</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#define</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> __MyDispatcher__</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">class</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> MyDispatcher</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> :</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> public</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">AsyncWorker</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">private</span><span style="--shiki-light:#7C7F93;--shiki-dark:#569CD6;">:</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function jsEmitFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">ThreadSafeFunction tsEmitFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">public</span><span style="--shiki-light:#7C7F93;--shiki-dark:#569CD6;">:</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">    MyDispatcher</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Function</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">callback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    /**</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">     Execute() æ–¹æ³•è®¾è®¡ä¸ºåœ¨å·¥ä½œçº¿ç¨‹ä¸Šæ‰§è¡Œã€‚</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">     è¿™æ˜¯ AsyncWorker ç±»çš„å¼‚æ­¥æœ¬è´¨çš„ä¸€éƒ¨åˆ†ï¼Œ</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">     å®ƒå…è®¸é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡æˆ–è®¡ç®—å¯†é›†å‹æ“ä½œåœ¨ä¸é˜»å¡ Node.js äº‹ä»¶å¾ªç¯çš„ç‹¬ç«‹çº¿ç¨‹ä¸Šæ‰§è¡Œã€‚</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">     */</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Execute</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> override</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> OnOK</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> override</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> OnError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Error</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">e</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> override</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Destroy</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> override</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">vector</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">&gt;</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> GetResult</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">};</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#endif</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-44" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>src/addon.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;MyDispatcher.hh&quot;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;iostream&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> CreatMyDispatcher</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;CreatMyDispatcher&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function emitFun </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    MyDispatcher </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">*</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">myDispatcher </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#569CD6;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> MyDispatcher</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> emitFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    myDispatcher</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Queue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;CreatMyDispatcher&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> CreatMyDispatcher</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NODE_API_MODULE</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">NODE_GYP_MODULE_NAME</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="æ¡ˆä¾‹-async-worker-promise" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-async-worker-promise"><span>æ¡ˆä¾‹ï¼šasync_worker_promise</span></a></h3><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-45" aria-selected="true"><code>index.js</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-46" aria-selected="false"><code>src/MyPromiseAsyncWorker.cc</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-47" aria-selected="false"><code>src/MyPromiseAsyncWorker.hh</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-48" aria-selected="false"><code>src/addon.cc</code></button></div><!--[--><div class="vp-code-tab active" id="v-45" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title"><code>index.js</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">#</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> node</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">var addon </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;bindings&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;hello_world&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">async function </span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">main</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    let res </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> await </span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">addon</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">CreatMyPromiseAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">res</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // OK</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">main</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">/**</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">CreatMyPromiseAsyncWorker</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">0</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">1</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">2</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">3</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">4</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">5</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">6</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">7</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">8</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">9</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">10</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">OnOK</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">OK</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> */</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-46" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>src/MyPromiseAsyncWorker.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;MyPromiseAsyncWorker.hh&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;iostream&gt;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;thread&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">MyPromiseAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">MyPromiseAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&amp;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">jsEmitFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    : </span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">AsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">),</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">      deferred</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyPromiseAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Execute</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">    // do something</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    for</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">size_t</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> i </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> i </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;=</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 10</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> i</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">++</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    {</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">        std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> i </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">        std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">this_thread</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">sleep_for</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">chrono</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">seconds</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">    }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Promise</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyPromiseAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">getPromise</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> deferred</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Promise</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyPromiseAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">OnOK</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;OnOK&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    deferred</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Resolve</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(),</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;OK&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> MyPromiseAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">OnError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Error</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">e</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;OnError&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    deferred</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Resolve</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">String</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(),</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;Error&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-47" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>src/MyPromiseAsyncWorker.hh</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#ifndef</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> __MyDispatcher__</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#define</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> __MyDispatcher__</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">class</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> MyPromiseAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> :</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> public</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">AsyncWorker</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">private</span><span style="--shiki-light:#7C7F93;--shiki-dark:#569CD6;">:</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Promise</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Deferred deferred</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">public</span><span style="--shiki-light:#7C7F93;--shiki-dark:#569CD6;">:</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">    MyPromiseAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Function</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">callback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Execute</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> override</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> OnOK</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> override</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    void</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> OnError</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Error</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">e</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> override</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Promise</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> getPromise</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">};</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#endif</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-48" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>src/addon.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;MyPromiseAsyncWorker.hh&quot;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;iostream&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> CreatMyPromiseAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;CreatMyPromiseAsyncWorker&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">    Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function emitFun </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    MyPromiseAsyncWorker </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">*</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">myPromiseAsyncWorker </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#569CD6;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> MyPromiseAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> emitFun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    myPromiseAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Queue</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> myPromiseAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">-&gt;</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">getPromise</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;CreatMyPromiseAsyncWorker&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> CreatMyPromiseAsyncWorker</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NODE_API_MODULE</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">NODE_GYP_MODULE_NAME</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h2 id="çº¿ç¨‹å®‰å…¨å‡½æ•°threadsafe-function" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹å®‰å…¨å‡½æ•°threadsafe-function"><span>çº¿ç¨‹å®‰å…¨å‡½æ•°threadsafe_function</span></a></h2><ul><li><code>Napi::ThreadSafeFunction</code> ç±»å‹æä¾›äº†çº¿ç¨‹é—´é€šä¿¡çš„æ¥å£ï¼Œ</li><li>ä½¿å¾—å…¶ä»–çº¿ç¨‹èƒ½å¤Ÿé€šè¿‡ä¸»çº¿ç¨‹é—´æ¥è°ƒç”¨JavaScriptå‡½æ•°ã€‚</li></ul><h3 id="æ„é€ å‡½æ•°-5" tabindex="-1"><a class="header-anchor" href="#æ„é€ å‡½æ•°-5"><span><code>æ„é€ å‡½æ•°()</code></span></a></h3><p>åˆ›å»ºä¸€ä¸ªæ–°çš„ç©º<code>Napi::ThreadSafeFunction</code>å®ä¾‹ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ThreadSafeFunction</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="æ„é€ å‡½æ•°-tsfn" tabindex="-1"><a class="header-anchor" href="#æ„é€ å‡½æ•°-tsfn"><span><code>æ„é€ å‡½æ•°(tsfn)</code></span></a></h3><p>åˆ›å»ºä¸€ä¸ªæ–°çš„<code>Napi::ThreadSafeFunction</code>å¯¹è±¡å®ä¾‹ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">ThreadSafeFunction</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">ThreadSafeFunction</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">napi_threadsafe_function tsfn</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>tsfn</code>: å·²å­˜åœ¨çš„çº¿ç¨‹å®‰å…¨å‡½æ•°çš„å¥æŸ„<code>napi_threadsafe_function</code>ã€‚</li></ul><blockquote><p>è¿”å›ä¸€ä¸ªéç©ºçš„<code>Napi::ThreadSafeFunction</code>å®ä¾‹ã€‚ä½¿ç”¨æ­¤æ„é€ å‡½æ•°æ—¶ï¼Œä»…åº”ä½¿ç”¨<code>Blocking(void*)</code> / <code>NonBlocking(void*)</code>é‡è½½æ–¹æ³•ï¼›ä¸åº”ä½¿ç”¨<code>Callback</code>å’Œæ¨¡æ¿åŒ–çš„<code>data*</code>é‡è½½ã€‚è¯¦æƒ…è§ä¸‹æ–‡ã€‚</p></blockquote><h3 id="new-2" tabindex="-1"><a class="header-anchor" href="#new-2"><span><code>New(...)</code></span></a></h3><p>åˆ›å»ºä¸€ä¸ªæ–°çš„<code>Napi::ThreadSafeFunction</code>å¯¹è±¡å®ä¾‹ã€‚<code>New</code>å‡½æ•°æœ‰å¤šä¸ªé‡è½½ç‰ˆæœ¬ï¼Œé’ˆå¯¹å„ç§å¯é€‰å‚æ•°ï¼šä¸ä½¿ç”¨ç‰¹å®šé‡è½½çš„å¯é€‰å‚æ•°åˆ™è·³è¿‡ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">napi_env env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    const</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Function</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&amp;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> callback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    const</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Object</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&amp;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> resource</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    ResourceString resourceName</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    size_t</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> maxQueueSize</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">    size_t</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> initialThreadCount</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    ContextType</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">*</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> context</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    Finalizer finalizeCallback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    FinalizerDataType</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">*</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>env</code>: ç”¨äºæ„é€ <code>Napi::ThreadSafeFunction</code>å¯¹è±¡çš„<code>napi_env</code>ç¯å¢ƒã€‚</li><li><code>callback</code>: ä»å…¶ä»–çº¿ç¨‹è°ƒç”¨çš„<code>Function</code>ã€‚</li><li><code>[å¯é€‰] resource</code>: ä¸å¼‚æ­¥å·¥ä½œå…³è”çš„å¯¹è±¡ï¼Œå°†ä¼ é€’ç»™å¯èƒ½çš„async_hooksåˆå§‹åŒ–é’©å­ã€‚</li><li><code>resourceName</code>: ç”¨äºè¯Šæ–­ä¿¡æ¯çš„JavaScriptå­—ç¬¦ä¸²ï¼Œç”±async_hooks APIæš´éœ²ï¼Œæ ‡è¯†æ‰€æä¾›èµ„æºçš„ç§ç±»ã€‚</li><li><code>maxQueueSize</code>: é˜Ÿåˆ—çš„æœ€å¤§å¤§å°ã€‚<code>0</code>è¡¨ç¤ºæ— é™åˆ¶ã€‚</li><li><code>initialThreadCount</code>: æœ€åˆä½¿ç”¨æ­¤å‡½æ•°çš„çº¿ç¨‹æ•°é‡ï¼ŒåŒ…æ‹¬ä¸»çº¿ç¨‹ã€‚</li><li><code>[å¯é€‰] context</code>: é™„åŠ åˆ°ç”Ÿæˆçš„<code>ThreadSafeFunction</code>ä¸Šçš„æ•°æ®ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨<code>GetContext()</code>æ£€ç´¢ã€‚</li><li><code>[å¯é€‰] finalizeCallback</code>: å½“<code>ThreadSafeFunction</code>å³å°†é”€æ¯æ—¶è°ƒç”¨çš„å‡½æ•°ã€‚æ­¤å›è°ƒå°†åœ¨ä¸»çº¿ç¨‹ä¸Šè°ƒç”¨ã€‚å®ƒæ¥æ”¶ä¸Šä¸‹æ–‡å’Œæ„é€ æœŸé—´ç»™å‡ºçš„æœ€ç»ˆåŒ–æ•°æ®ï¼ˆå¦‚æœç»™å‡ºï¼‰ï¼Œå¹¶æä¾›æ¸…ç†çº¿ç¨‹åå·¥ä½œçš„æœºä¼šï¼Œä¾‹å¦‚é€šè¿‡è°ƒç”¨<code>uv_thread_join()</code>ã€‚é‡è¦çš„æ˜¯ï¼Œåœ¨æœ€ç»ˆåŒ–å›è°ƒå®Œæˆä¹‹åï¼Œé™¤äº†ä¸»å¾ªç¯çº¿ç¨‹å¤–ï¼Œä¸åº”æœ‰å…¶ä»–çº¿ç¨‹ç»§ç»­ä½¿ç”¨çº¿ç¨‹å®‰å…¨å‡½æ•°ã€‚å¿…é¡»å®ç°<code>void operator()(Env env, DataType* data, ContextType* hint)</code>ï¼Œå¦‚æœæ²¡æœ‰æä¾›<code>data</code>æˆ–<code>hint</code>åˆ™å¿½ç•¥ã€‚å¯ä»¥é€šè¿‡<code>GetContext()</code>æ£€ç´¢ã€‚</li><li><code>[å¯é€‰] data</code>: ä¼ é€’ç»™<code>finalizeCallback</code>çš„æ•°æ®ã€‚</li></ul><blockquote><p>è¿”å›ä¸€ä¸ªéç©ºçš„<code>Napi::ThreadSafeFunction</code>å®ä¾‹ã€‚</p></blockquote><h3 id="napi-status-acquire" tabindex="-1"><a class="header-anchor" href="#napi-status-acquire"><span><code>napi_status Acquire()</code></span></a></h3><p>å‘æ­¤çº¿ç¨‹å®‰å…¨å‡½æ•°å¯¹è±¡æ·»åŠ ä¸€ä¸ªçº¿ç¨‹ï¼Œè¡¨æ˜æ–°çº¿ç¨‹å°†å¼€å§‹ä½¿ç”¨çº¿ç¨‹å®‰å…¨å‡½æ•°ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_status</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">ThreadSafeFunction</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Acquire</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿”å›å€¼ï¼š</p><ul><li><code>napi_ok</code>: çº¿ç¨‹å·²æˆåŠŸè·å–çº¿ç¨‹å®‰å…¨å‡½æ•°ä¾›å…¶ä½¿ç”¨ã€‚</li><li><code>napi_closing</code>: çº¿ç¨‹å®‰å…¨å‡½æ•°å·²è¢«å…ˆå‰è°ƒç”¨çš„<code>Abort()</code>æ ‡è®°ä¸ºå…³é—­ã€‚</li></ul><h3 id="napi-status-release" tabindex="-1"><a class="header-anchor" href="#napi-status-release"><span><code>napi_status Release()</code></span></a></h3><p>è¡¨ç¤ºç°æœ‰çº¿ç¨‹å°†åœæ­¢ä½¿ç”¨çº¿ç¨‹å®‰å…¨å‡½æ•°ã€‚å½“çº¿ç¨‹ä¸å†ä½¿ç”¨æ­¤çº¿ç¨‹å®‰å…¨å‡½æ•°æ—¶ï¼Œåº”è°ƒç”¨æ­¤APIã€‚åœ¨è°ƒç”¨æ­¤APIåï¼Œä½¿ç”¨ä»»ä½•çº¿ç¨‹å®‰å…¨APIåœ¨å½“å‰çº¿ç¨‹ä¸­ä¼šäº§ç”Ÿæœªå®šä¹‰çš„ç»“æœï¼Œå› ä¸ºçº¿ç¨‹å®‰å…¨å‡½æ•°å¯èƒ½å·²ç»è¢«é”€æ¯ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_status</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">ThreadSafeFunction</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Release</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿”å›å€¼ï¼š</p><ul><li><code>napi_ok</code>: çº¿ç¨‹å®‰å…¨å‡½æ•°å·²æˆåŠŸé‡Šæ”¾ã€‚</li><li><code>napi_invalid_arg</code>: çº¿ç¨‹å®‰å…¨å‡½æ•°çš„çº¿ç¨‹è®¡æ•°ä¸ºé›¶ã€‚</li><li><code>napi_generic_failure</code>: å°è¯•é‡Šæ”¾çº¿ç¨‹å®‰å…¨å‡½æ•°æ—¶å‘ç”Ÿä¸€èˆ¬é”™è¯¯ã€‚</li></ul><h3 id="napi-status-abort" tabindex="-1"><a class="header-anchor" href="#napi-status-abort"><span><code>napi_status Abort()</code></span></a></h3><p>â€œä¸­æ­¢â€çº¿ç¨‹å®‰å…¨å‡½æ•°ã€‚è¿™å°†å¯¼è‡´çº¿ç¨‹å®‰å…¨å‡½æ•°çš„æ‰€æœ‰åç»­APIè°ƒç”¨ï¼ˆé™¤<code>Release()</code>å¤–ï¼‰åœ¨å¼•ç”¨è®¡æ•°è¾¾åˆ°é›¶ä¹‹å‰è¿”å›<code>napi_closing</code>ï¼Œä»è€Œé€šçŸ¥çº¿ç¨‹ä¸å†å¯èƒ½å¯¹çº¿ç¨‹å®‰å…¨å‡½æ•°è¿›è¡Œå¼‚æ­¥è°ƒç”¨ã€‚è¿™å¯ä»¥ä½œä¸ºç»ˆæ­¢çº¿ç¨‹çš„ä¸€ä¸ªæ ‡å‡†ã€‚å½“ä»çº¿ç¨‹å®‰å…¨å‡½æ•°è°ƒç”¨ä¸­æ”¶åˆ°<code>napi_closing</code>è¿”å›å€¼æ—¶ï¼Œçº¿ç¨‹ä¸å¾—å†ä½¿ç”¨çº¿ç¨‹å®‰å…¨å‡½æ•°ï¼Œå› ä¸ºå®ƒä¸å†ä¿è¯è¢«åˆ†é…ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_status</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">ThreadSafeFunction</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Abort</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿”å›å€¼ï¼š</p><ul><li><code>napi_ok</code>: çº¿ç¨‹å®‰å…¨å‡½æ•°å·²æˆåŠŸä¸­æ­¢ã€‚</li><li><code>napi_invalid_arg</code>: çº¿ç¨‹å®‰å…¨å‡½æ•°çš„çº¿ç¨‹è®¡æ•°ä¸ºé›¶ã€‚</li><li><code>napi_generic_failure</code>: å°è¯•ä¸­æ­¢çº¿ç¨‹å®‰å…¨å‡½æ•°æ—¶å‘ç”Ÿä¸€èˆ¬é”™è¯¯ã€‚</li></ul><h3 id="napi-status-blockingcall-nonblockingcall" tabindex="-1"><a class="header-anchor" href="#napi-status-blockingcall-nonblockingcall"><span><code>napi_status BlockingCall()/NonBlockingCall()</code></span></a></h3><p>ä»¥é˜»å¡æˆ–éé˜»å¡æ–¹å¼è°ƒç”¨JavaScriptå‡½æ•°ã€‚</p><ul><li><code>BlockingCall()</code>ï¼šAPIä¼šé˜»å¡ç›´åˆ°é˜Ÿåˆ—ä¸­æœ‰å¯ç”¨ç©ºé—´ã€‚å¦‚æœçº¿ç¨‹å®‰å…¨å‡½æ•°åˆ›å»ºæ—¶æœ€å¤§é˜Ÿåˆ—å¤§å°ä¸º<code>0</code>ï¼Œåˆ™æ°¸è¿œä¸ä¼šé˜»å¡ã€‚</li><li><code>NonBlockingCall()</code>ï¼šå¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œåˆ™è¿”å›<code>napi_queue_full</code>ï¼Œé˜»æ­¢æ•°æ®æˆåŠŸåŠ å…¥é˜Ÿåˆ—ã€‚</li></ul><p><code>BlockingCall()</code>å’Œ<code>NonBlockingCall()</code>æœ‰å‡ ä¸ªé’ˆå¯¹å¯é€‰å‚æ•°çš„é‡è½½å®ç°ï¼šå¯¹äºç‰¹å®šé‡è½½ï¼Œä¸ä½¿ç”¨å¯é€‰å‚æ•°åˆ™è·³è¿‡ã€‚</p><blockquote><p>è¿™äº›ç‰¹å®šå‡½æ•°é‡è½½ä»…åº”ç”¨äºé€šè¿‡<code>ThreadSafeFunction::New</code>åˆ›å»ºçš„<code>ThreadSafeFunction</code>ã€‚</p></blockquote><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_status</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">ThreadSafeFunction</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">BlockingCall</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">DataType</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">*</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> Callback</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> callback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_status</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">ThreadSafeFunction</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NonBlockingCall</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">DataType</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">*</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> Callback</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> callback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>[å¯é€‰] data</code>: ä¼ é€’ç»™<code>callback</code>çš„æ•°æ®ã€‚</li><li><code>[å¯é€‰] callback</code>: åœ¨ä¸»çº¿ç¨‹ä¸Šè¢«è°ƒç”¨çš„C++å‡½æ•°ã€‚å›è°ƒæ¥æ”¶çº¿ç¨‹å®‰å…¨å‡½æ•°çš„JavaScriptå›è°ƒå‡½æ•°ä½œä¸º<code>Napi::Function</code>å‚æ•°ï¼Œä»¥åŠ<code>DataType*</code>æ•°æ®æŒ‡é’ˆï¼ˆå¦‚æœæä¾›ï¼‰ã€‚å¿…é¡»å®ç°<code>void operator()(Napi::Env env, Function jsCallback, DataType* data)</code>ï¼Œå¦‚æœæ²¡æœ‰æä¾›<code>data</code>åˆ™å¿½ç•¥ã€‚æ— éœ€é€šè¿‡<code>MakeCallback()</code>è°ƒç”¨JavaScriptï¼Œå› ä¸ºNode-APIåœ¨é€‚åˆå›è°ƒçš„ä¸Šä¸‹æ–‡ä¸­è¿è¡Œ<code>callback</code>ã€‚</li></ul><blockquote><p>è¿™äº›ç‰¹å®šå‡½æ•°é‡è½½ä»…åº”ç”¨äºé€šè¿‡<code>napi_threadsafe_function</code>åˆ›å»ºçš„<code>ThreadSafeFunction</code>ã€‚</p></blockquote><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_status</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">ThreadSafeFunction</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">BlockingCall</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void*</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">napi_status</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">ThreadSafeFunction</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NonBlockingCall</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">void*</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> const</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>data</code>: ä¼ é€’ç»™<code>call_js_cb</code>çš„æ•°æ®ï¼Œåè€…æ˜¯åœ¨åˆ›å»ºçº¿ç¨‹å®‰å…¨å‡½æ•°æ—¶æŒ‡å®šçš„ã€‚</li></ul><p>è¿”å›å€¼ï¼š</p><ul><li><code>napi_ok</code>: è°ƒç”¨å·²æˆåŠŸæ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ã€‚</li><li><code>napi_queue_full</code>: å°è¯•éé˜»å¡æ–¹å¼è°ƒç”¨æ—¶é˜Ÿåˆ—å·²æ»¡ã€‚</li><li><code>napi_closing</code>: çº¿ç¨‹å®‰å…¨å‡½æ•°å·²ä¸­æ­¢ï¼Œæ— æ³•æ¥å—æ›´å¤šè°ƒç”¨ã€‚</li><li><code>napi_invalid_arg</code>: çº¿ç¨‹å®‰å…¨å‡½æ•°å·²å…³é—­ã€‚</li><li><code>napi_generic_failure</code>: å°è¯•æ·»åŠ åˆ°é˜Ÿåˆ—æ—¶å‘ç”Ÿä¸€èˆ¬é”™è¯¯ã€‚</li></ul><h3 id="æ¡ˆä¾‹-thread-safe-function-demo" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-thread-safe-function-demo"><span>æ¡ˆä¾‹ï¼šthread_safe_function_demo</span></a></h3><p><strong>ç¤ºä¾‹</strong></p><p>ä»¥ä¸‹ä»£ç ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨<code>ThreadSafeFunction</code>åœ¨åŸç”Ÿçº¿ç¨‹ä¸­å®šæœŸè°ƒç”¨JavaScriptå›è°ƒå‡½æ•°ï¼Œå¹¶ä¼ é€’æ•°æ®ã€‚</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-49" aria-selected="true"><code>src/addon.cc</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-50" aria-selected="false"><code>index.js</code></button></div><!--[--><div class="vp-code-tab active" id="v-49" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title"><code>src/addon.cc</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;napi.h&gt;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;iostream&gt;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#C586C0;">#include</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &lt;thread&gt;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">using</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> namespace</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">// c++åŸç”Ÿçº¿ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">thread nativeThread</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">// Napiçº¿ç¨‹å®‰å…¨å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">ThreadSafeFunction tsfn</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Value</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> startProcess</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">CallbackInfo</span><span style="--shiki-light:#179299;--shiki-dark:#569CD6;"> &amp;</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    Env env </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    Function fun </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> info</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">].</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">As</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">Function</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    tsfn </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> ThreadSafeFunction</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">        env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">          // ç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">        fun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">          // å›è°ƒ</span></span>
<span class="line"><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">        &quot;fun_tsfn&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">   // èµ„æºå</span></span>
<span class="line"><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">        0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">            // é˜Ÿåˆ—å¤§å°ï¼ˆ0æ— é™ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">        1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">            // åˆå§‹çº¿ç¨‹æ•°</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">        [](</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // ç”¨äºæ¸…ç†çº¿ç¨‹çš„ç»ˆç»“å™¨</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">            std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;finalizeCallback start&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">            nativeThread</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">join</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // ç­‰å¾…çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">            std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;nativeThread.join();&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">            std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;finalizeCallback end&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">        });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    nativeThread </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">thread</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">        // åŒ¿åå‡½æ•°ï¼Œä¾›çº¿ç¨‹è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">        []()</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">        {</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">            std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;nativeThread start&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">            for</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">uint8_t</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> i </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> i </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;"> 5</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> i</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">++</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">            {</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;">                int</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> *</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">data </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#8839EF;--shiki-light-font-weight:bold;--shiki-dark:#569CD6;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> int</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">clock</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">());</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // ç”¨äºæ¼”ç¤ºæ•°æ®çš„ä¼ é€’</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">                std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">to_string</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">i</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">                std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;BlockingCall start&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">                napi_status status </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> tsfn</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">BlockingCall</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">                 // çº¿ç¨‹å®‰å…¨å‡½æ•°çš„é˜»å¡è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">                    data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">                                               // ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥ä¼ é€’æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">                    [](</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;"> Function</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> jsCallback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> int</span><span style="--shiki-light:#8839EF;--shiki-dark:#569CD6;"> *</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // lambdaå›è°ƒ</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">                        std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;lambda start&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">                        jsCallback</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Call</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">{Number</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> *</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">}</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // ä¼ é€’å‚æ•°å¹¶è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">                        std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;lambda end&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">                        delete</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> data</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> // åˆ é™¤æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">                    });</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">                std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;BlockingCall end&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">                std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">this_thread</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">sleep_for</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">chrono</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">seconds</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#B5CEA8;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">));</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">            }</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">            // é‡Šæ”¾çº¿ç¨‹å®‰å…¨å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">            tsfn</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">Release</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">            std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">cout </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">&lt;&lt;</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;"> &quot;tsfn.Release();&quot;</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> &lt;&lt;</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> std</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">endl</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">        });</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;">Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Env</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Napi</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#DF8E1D;--shiki-light-font-style:italic;--shiki-dark:#4EC9B0;--shiki-dark-font-style:inherit;">Object</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#9CDCFE;--shiki-dark-font-style:inherit;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;">    exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">[</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;startProcess&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">]</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#DF8E1D;--shiki-dark:#E6E6E6;"> Function</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">::</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">New</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">env</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> startProcess</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> exports</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">;</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">NODE_API_MODULE</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">NODE_GYP_MODULE_NAME</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> Init</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-50" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><code>index.js</code></div><!--[--><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#4c4f69;--shiki-dark:#E6E6E6;--shiki-light-bg:#eff1f5;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes catppuccin-latte slack-dark vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">#</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">!</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> node</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">var </span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">{</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> startProcess </span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;bindings&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&#39;hello_world&#39;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">async function </span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">main</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">()</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> {</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">    let fun </span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">arg</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span><span style="--shiki-light:#179299;--shiki-dark:#D4D4D4;"> =&gt;</span><span style="--shiki-light:#4C4F69;--shiki-dark:#9CDCFE;"> console</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">.</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#CE9178;">&quot;hello world:&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;"> arg</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">);</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">    startProcess</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#E6E6E6;">fun</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">)</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#DCDCAA;--shiki-dark-font-style:inherit;">main</span><span style="--shiki-light:#7C7F93;--shiki-dark:#E6E6E6;">();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">/**</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">$ node ./index.js </span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">nativeThread start</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">0</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">BlockingCall start</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">BlockingCall end</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">lambda start</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">hello world: 1</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">lambda end</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">1</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">BlockingCall start</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">BlockingCall end</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">lambda start</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">hello world: 1002</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">lambda end</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">2</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">BlockingCall start</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">BlockingCall end</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">lambda start</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">hello world: 2010</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">lambda end</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">3</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">BlockingCall start</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">BlockingCall end</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">lambda start</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">hello world: 3021</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">lambda end</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">4</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">BlockingCall start</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">BlockingCall end</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">lambda start</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">hello world: 4028</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">lambda end</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">tsfn.Release();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">finalizeCallback start</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">nativeThread.join();</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;">finalizeCallback end</span></span>
<span class="line"><span style="--shiki-light:#7C7F93;--shiki-light-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit;"> */</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div></div><!----><!----><!----></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 2449695354@qq.com">YiguiDing</span><!--]--><!--]--></div></div></footer><!----><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;"><div style="display: flex;align-items: center;justify-content: center;height: 96px"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><!----><div class="vp-copyright">MIT Licensed | Copyright Â© 2019-present Yigui-Ding</div></footer></div><!--]--><!--]--><!--[--><!----><!----><!--[--><!--]--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CeJzBNtn.js" defer></script>
  </body>
</html>
