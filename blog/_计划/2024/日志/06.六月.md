---
title: 2024年六月日志
cover: ./cover/我要向前走.png
category: to-do-list
tag: [to-do-list]
article: false
---


六月一日 周六 放假 学习stm32 串口通信相关内容并做笔记，内容包括usart外设工作原理 串口通信的一些参数，编程实现收发数据 自定义通信协议 编程实现收发数据包

六月二日 周日 放假 学习stm32 i2c通信

六月三日 周一 早上六点七点才睡着 睡到九点起床去上班 九点半到公司 晚上react- native端通信协议部分代码 实现传感器数据流的请求 实现自定义模式的切换和对当前模式的获取 实现arm 和 disarm的切换和状态的获取 实现joystick虚拟手柄摇杆和按钮通道数据的更新和发送 下班回家吃饭后 完善todolist-react 部分代码 十点左右睡觉 到到第二天早上八点四十

六月四日 周二 八点五十起床洗漱晾衣服 九点半到公司 迟到半个小时 尝试通过夜神模拟器的桥接模式实现虚拟机连通实体机器，实测虚拟机在桥接模式下dhcp模式可用 静态ip模式不可用 过程中学到一些命令 adb connect x.x.x.x  adb reverse tcp:8081 tcp:8081 and

adb shell

ip addr add x.x.x.x/24 broadcast x.x.x.x dev wlan0

ip del x.x.x.x/24 ......略

中间甚至尝试着进入android的shell手动修改ip 能成功 但是ping不通

后续尝试在virtual box安装androidx86虚拟机 然后通过桥接的方式连通实体机和下位机 一波三折成功了。连通设备后发现mavlink用的是udp的协议 重写了相关部分的代码 可以接收并解析数据了 但是无法发送数据 或者说发送了 下位机没反应 多次尝试无果 下班回家吃饭后 继续学习stm32的i2c通信相关内容尝试软件实现i2c通信 并编写了mpu6050读写寄存器的代码 到凌晨三点


六月五日 周三 尝试解决昨天遗留的不能发送报文给下位机的问题，看node-mavlink源代码 研究esp8266类的实现原理，发现其本质是对udp协议的包装，udp需要绑定到指定的端口来启动服务，该端口是数据报文的入口，是固定的，因为下位机是在向固定的端口发数据，而下位机发给上位机的数据报中携带有远程端口，也就是下位机在启动udp服务是绑定的端口，这个端口也就是上位机发送数据时的目标端口。尝试着接收用node写udp服务验证从react- native发来到消息，验证react- native发送数据的能力，然后尝试用whileshark对比qgc也就是mavlink官方上位机发送的协议消息和react- native发送的协议消息的区别，发现react- native的长命令和心跳包的数据部分为空，查到最后发现是传的参数不对，源代码中fun heartbeat(...rags
){ 这里的args应该填多个参数，而不是用一个数组填写心跳包的各个数据字段
晚上回家吃饭后练了一个小时左右的吉他，晚上熬到三四点才睡。


六月六日 周四，九点起床 九点半到公司 尝试测试下位机视频延迟 一开始用react- native-vlc- media的一个库来实现，能正常播https.mp4的流和rtsp的监控流，但是下位机是用的rdp的方式，vlc插件播放不流畅甚至卡顿，尝试了很久，不太行，后来尝试用另一个native- native- video的库实现，该库支持rtsp，实际测试无法播放，然后直接把源代码里的demo拿来运行，可以播放了，但是延迟很大，播放的是网上找的rtsp的视频源，公司rtsp的监控播放不了，尝试进监控后台修改参数也不行，后来在尝试用mediamtx在电脑启动rtsp服务器，然后用ffmpeg将桌面捕获推送到rtsp服务中，然后在rn播放器中播放，发现可以播放，但是延迟比较大，然后通过修改bufferconfig参数让很多buffer都为0，发现可以实现0.5秒的延迟，接近vlc的播放效果，后来准备测试下位机，打算用同样的方式将下位机的usb摄像头的数据推送到rtsp的服务器中，然后在rn中播放，结果下位机中推流的步骤无法实现，因为没有ffmpeg，gstreamer也没有rtsp client的元素，然后没办法直接找了个usb摄像头插到台式机上做测试，直接用ffmpeg推流到rtsp的服务中，然后在rn中播放，效果不比之前的好，有一两秒的延迟，找了很久的原因，发现刚刚能播的时候延迟非常低，播了段时间后延迟才上来的，后来尝试把播放速率改成2，延迟就消失了，在0.2秒，很低了，效果不错。弄到晚上七八点，下班吃饭后玩手机到现在凌晨四点半

六月七日 周五 九点起床 九点半到公司 看mediamtx文档 发现支持webrtc 尝试搭建项目测试延迟 反复尝试了ffmpeg推流参数，发现效果最好可以达到0.15s，下午和老板讨论工作进展和后续方向，两点多给河海的几个研究生改代码 改到六点，下班回家吃饭 摆烂到八点四十 最近几天都是凌晨三四点睡觉，太困了 准备睡觉

六月八日 周六 九点睡醒 摆烂到下午一点出去吃饭 然后回家接着学stm32的i2c协议，接着做笔记，内容包括对i2c协议剪进去，电路标准：浮空高阻态 上拉；时序标准：开始、结束、读取bit、写入比特； 协议：多/单字节写入数据 多/但字节读取数据 软件实现；对之前编写i2c总线通信软件实现的代码进行完善，实现了【单/多】字节【读/写】；学习mpu6050，包括简介，原理，芯片框图，常用寄存器，以及常用寄存器的配置，以及基于【i2c总线通信软件实现的代码】完成mpu6050的初始化和读写值。次日凌晨五点半睡觉

六月十二日

毕业前，好似只有准备考研和准备找工作可以选
毕业后，理想变了，目前找到了还不错的软件工作，但理想又在硬件，还想考研算法方向。
未来迷茫 不知道怎么抉择 都想选 时间精力又不够 人也在变懒 好像志气再衰退
也在开始自我怀疑，自我否定
身边人越来越少，内心也越发孤独，
同时我也意识到我年龄的增长 青春的逝去 生命的衰老 我拥有的好像不是二十多岁人应该拥有的那种朝气
我拥有的好像是四五十岁人的那种死气沉沉
我的青春热血和蓬勃朝气都去了哪里
为什么我这么疲惫
对，孤独 迷茫 还有疲惫。
疲倦
“面对大河我无限惭愧 我年华虚度空有一身疲倦”
为什么我心安理得的频繁上班迟到并且扣工资也无所谓？
首先，人的生命是无价的，其次人的生命主要体现在其所拥有的可支配的时间上，生命无价也就意味着其所拥有的每分每秒的时间也是无价的，从这个意义上来说，上班的本质上就是在贱卖自己的时间和生命，弥留之际你愿意花多少钱给自己续上十年二十年的生命？就算你有并且愿意花十亿百亿千亿，你也买不回哪些被你因“上班”而贱卖掉了的时间和生命。而上班迟到这种行为，就像是原本你要把你一个小时的时间以十块钱左右的价格贱卖掉，但却因你将这一个小时的生命和时间以自己的方式安排使用掉了，你得到的是本就属于你的无价的时间，失去的是本就不属于你的廉价的金钱。迟到，避免了时间和生命的被贱卖，扣掉的也是原本就不属于你的工资，和惜之有？
两点半 睡觉


六月13号周四 睡到中午 下午也没有学习 晚上参加毕业典礼 又玩到凌晨三点

今后必做的事：
1.早睡早起
2.锻炼身体
3.理论学习（考研：高数、电路、自动控制）
4.实践学习

六月14号周五，睡到九点，起床去领毕业证，回宿舍收拾东西，12点半上顺风车，晚上研究webrtc，主要尝试了cloudflare/workers-sdk这个项目，看来下其中的WHIP WHEP两个CLient的实现，并结合mediamtx搭建webrtc服务器做测试，晚上一两点睡。

六月十五号，周六，睡到十点，中午去吃喜酒，一两点回家，尝试将cloudflare/workers-sdk项目的WHEPClient类应用于react-native-webrtc项目。18:22测试成功。

六月十六 周日 几乎啥也没干

六月十七 周以 除了上班干活 几乎啥也没学

六月十八 周二 学了几集游戏相关的教程 和设计模式相关

六月十九 周三 对手机上位机的通信部分和配置页面部分代码进行重构 晚上八点半睡觉

六月二十日 周四 早上五点半起床 洗个澡 然后继续学习c++游戏教程，主要是在把上次周二的写代码进行重构，目前完成了项目搭建、场景设计、场景切换、图像资源容器与图集渲染控制器的代码实现，视频教程学到了4/17。
上班一天 晚上回家继续学，视频教程学到8/18，到凌晨一点睡觉

周六、周日，主要都在学习视频教程，但有效学习时长不多
周一，摆烂一天，
周二，摆烂一天几乎没做什么事
几乎没做什么事
凌晨三点半睡觉
周三，？
周四，？，学习ffmpeg音视频采集并编程实现。
周五，测试样品相机录制功能 网口播放延迟 usb口播放延迟，晚上学stm32 完成硬件i2c代码实现
周六，周日，学习stm32 spi总线，完成软件模拟实现spi通信代码，实现对w25q64闪存的读写
