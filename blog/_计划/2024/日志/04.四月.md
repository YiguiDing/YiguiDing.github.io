---
title: 2024年四月日志
date: 2024-04-01
cover: ./cover/我要向前走.png
category: to-do-list
tag: [to-do-list]
article: false
---

四月一号 周一 快10点到公司 然后测试老板写的wcjs-gs，调用结束录制时，播放视频延迟变高的问题似乎解决了，但是新的问题出现了，开始录制或结束录制时，会有内存泄漏，软件卡死的情况。我也崩溃了，打算从头用ffmpeg写，所以晚上到家就开始找视频学。学习了ffmpeg开发环境的搭建 编译，输出视频metadata 然后看睡着了 睡醒大概十二点了，然后搭建开发环境 编写makefile 使用avlog输出日志 视频matedata。提取aac音频 到凌晨四点睡觉

四月二号 周二 也是很晚到公司，又是测试老板写的wcjs-gs，如果我结束录制后，立马点开始录制，那么就直接卡死了，如果我结束录制后，过一会儿点开始录制，那么收到的数据会变慢，内存泄漏，过一会儿会卡死，然后老板说大概知道问题在哪里了，让先别动这部分代码，然后我就改了改css，下午的时候又给了我一个版本，这个版本还算完美，录制几乎没有问题了，然后我另外学习了使用ffmpeg提取h264视频

四月三号，周三 ，到公司实现了丢包自动保存正在录制的视频，然后学习了ffmpeg的开发，实现了提取aac音频和提取h264视频并保证可播放

四月四号，周四，四月四号，清明放假第一天，睡到中午，学习ffmpeg，实现了将mp4视频重新封装为flv视频
> 学习效率太低.......

四月五号，周五，清明放假第二天，了解学习无刷电机驱动控制相关技术

四月六号，周六，清明放假第三天，了解学习常见的无刷电机驱动方案，efm8bb21主控、BLHeli_s J 无刷电机驱动固件，FD6288半桥驱动芯片。凌晨3:14 看完电子技术基础上 第一章


四月七号，周日 上班 在上位机实现下位机旋转圈数的计算和显示、测试直接将wcjs-gs所需的dll复制到上位机安装目录测试可用性、学习理解ffmpeg时间戳和时间基的概念、修改软件的icon图标，打包编译安装到笔记本；下班后编写实现ffmpeg时间基和时间戳的测试代码 学习截取封装文件的原理和步骤 到次日凌晨四点39睡觉

四月八号 周一 上班 睡到十点 上班给一台电脑装软件  查了半天的bug，最后发现是操作系统的问题。下班前给电脑重新装了系统 回家后学ffmpeg开发到10:19 然后睡到第二天早上五点。

四月九号  周二 早上五点睡醒 然后学ffmpeg开发相关知识 吃个饭到八点半去上班，给u盘写了个iso系统，重新装了系统，测试写的上位机软件，结果还是报错vcruntime.dll缺少，然后安装了个vc++运行时就好了，然后测试另一台正在开发的设备的通信问题，下午在看ping360声纳如何通过mavlink连接的问题，晚上回家改论文格式，修改ER图，找参考文献，补要提交的材料，比如开题报告，因为之前硬盘坏了，文件没了，然后写软件的使用说明 到现在凌晨3点

四月十号 周三，十点左右到公司，改毕设论文，交第三稿，然后给VESC写文档，下午给最近公司做的项目写文档，回家不知道干啥了，两点多才睡。

四月十一号 周四，十点左右到公司，给vesc的can协议写中文文档，继续给最近做的项目写文档，晚上改毕设，交定稿。然后啥也没干，玩到一点

四月十二号 周五 九点半到公司，尝试用js实现vesc的can驱动，中午写完，能发送和接收消息，但是似乎can模式不是foc，下午在查问题，晚上摆烂，然后看rgb和yuv的内容 凌晨四五点睡觉

四月十三号 周六 睡到中午，搞清楚yuv的计算过程和理解其不同的采样格式，实现讲视频解码为yuv格式并使用ffplay播放，大部分时间在浪费时间，凌晨五点睡觉。

四月十四号 周日 睡到下午两点 学习并实现利用ffmpeg修改视频分辨率、修改解码格式为rgb24、将rgb24保存为位图文件。凌晨五点睡觉

4月15日，周一。早上九点四十起床，十点多到公司，今天主要干的事就是调vesc高频注入（hfi）的几个参数，但是hfi好像是针对于永磁同步电机PMSM的，而不是直流无刷电机BLDC。晚上回家吃了个饭，大概八点多睡觉，睡到凌晨00:30睡醒。然后凌晨一点一点学到五点51 主要内容为视频编码 yuv到h264的转换，然后学习node-api，然后早上九点半到公司上班。

四月16号，周二，十点左右到公司，打印实习和就业的一些材料，打算找老板盖章，中午机器下水测试遇到问题说遥控器按键有问题，主要是遥感的通道映射问题还有就是自锁开关按键失灵的问题，这个主要原因是自锁开关的逻辑依赖键位配置信息，这个信息需要请求获取，中午吃过饭后尝试解决了。然后后面谈了后续的工作内容，并尝试一起解决vesc调参的问题，发现有点困难，后面和硬件沟通了下对接的问题，顺便解决了一个通信上的问题，晚上下班回家吃个饭，九点多就睡着了，早上七点醒。

四月十七号，周三，今天居然准时上班，坐着摸了一会儿鱼，然后开始敲代码，主要把上位机原先的box container重构了，不知道写的什么东西，七百多行代码精简到100多行，实现了同样的功能，然后下午和硬件沟通实现了从心跳包中解析获取设备的模式，另外根据文档，实现了设置设备模式，下班回家吃个饭就开始摆烂，直到现在快一点。

四月十八，周四，今天上班基本上啥也没干，十点上班，先是接到老板消息让把eps文件转成pdf，弄到中午吃饭，中间尝试安装adobe carobat pro 实现把pdf转换成可编辑的pdf，结果提示c盘空间不足，然后软件一顿删，结果把.net运行时删了，想重新安装结果又临时文件夹已满或无法访问，这个错误，后来受不了了直接借了个刻了光盘镜像的u盘来重装系统，结果重装系统的时候又提示，无法创建新的分区也无法找到现有分区，试了几次，然后刻了个新的系统，还是一样，没办法只能通过进pe系统，通过点击运行光盘镜像中的安装程序来安装，安装了之后又要装驱动，配环境，按软件，恢复QQ聊天记录.....一天下来啥也没干，回家才有空弄答辩ppt，弄到一点多，然后饿了吃了个饭就到两点了。

四月十九日，周五，不想上班，睡到十点四十起床，准备写毕设剩下的材料，中午出去吃个面，下午补中期检查，然后接着学ffmpeg，主要是音频pcm编码和音频解码的内容，凌晨两点睡觉

四月二十，周一， 早上七点起床，打车去地铁站，坐一号线到常州汽车总站，去泰州，中午到，打车回学校，然后试学士服，然后拍几张照，然后点外卖吃饭，然后去教学楼看同学的比赛项目、然后提了写问题的解决办法，然后四点去图书馆，然后六点吃饭，八点半回宿舍，太无聊有和室友绕着学校走了走，然后回宿舍学node-addons，学习总结开发环境的搭建。两点睡觉

4月21号，周日，睡到十点起床，继续学node-addon-api，看官方文档，写示例代码，中午去食堂吃饭，回宿舍给同学改代码，然后去图书馆，下午回宿舍给同学修bug，晚上食堂吃饭，回图书馆学到十点，然后回宿舍给同学修bug，然后摆烂到12点，现在凌晨一点半，睡觉

4月22号，周一，睡到十点多，被人叫醒起来帮忙修bug，然后写实习总结，中午点外卖吃个饭，下午去交材料，然后去别人答辩的地方看别人答辩，然后去图书馆，接着学node-addon-api 晚上点外卖回宿舍吃饭，回图书馆学到十点 回宿舍闲聊到十二点

4月23号，周二，早七点半出门排队排毕业照，十点多拍完，还学士服，回宿舍，出门去老街吃饭，然后逛老街附近的几个塔，回宿舍准备要打印的毕设材料，去了打印店人太多，航厅又带我们去他原来学校附近的打印店，打印完后回学校找周老师看，老师不在，去看另一个周老师，聊了四十多分钟，回来找老师看毕设，排队，看了说图片不清晰，宿舍一行人都看完后决定先吃饭，吃完饭后回宿舍改论文，下载world重画系统结构图，下载visio重画er图，打开软件重新截图，弄完晚上十点左右，洗漱完十一点多，睡前听了一集说三国。

4月24号，周三，睡到中午，在线打印昨天改的论文，摆烂到下午五点去吃饭，然后去教室抽签，抽到8号，测试投影仪的接口，检查调试程序，排队答辩，答完小等了一会儿舍友，回宿舍放电脑，然后下楼校园溜达，到处走走，回来一次，又出去一次，然后回宿舍点奶茶，总之没干什么事. 到现在凌晨一点51

四月二十五，周四，睡到中午，吃饭，校园闲逛，看草地音乐节排练，下午三点半找导师改论文，晚上看音乐节到九点，然后回宿舍玩游戏，到凌晨一点半，洗漱吃份泡面到两点，刷视频到凌晨四点......

四月二十六，周五，睡到中午，起床吃饭，改毕设论文，买了个优盘，下午摆烂，晚上去图书馆，十点回宿舍，收拾行李，洗漱完到现在，凌晨0:08.

四月二十七，周六，早八点起床打车去汽车站敢九点20的班车从泰州回常州，中午到家，睡一下午，起床吃饭然后学到第二天早上八点半睡觉.

四月二十八，周日，早上八点睡到下午五点半起床，学到晚上十点睡觉。

四月二十九 周一，早上七点半起床，继续学node-addon，主要为线程安全函数和函数引用，以及对六篇文档阅读和翻译，练半个小时吉他，了解光固化打印机的一些参数，了解平头沉头圆头螺丝的区别，复习blunder的基本操作，学到第二天凌晨学到4:13睡觉.

四月三十 周二 睡到十一点，起床洗漱吃饭，刷哔哩哔哩到下午两点，然后接着学blender建模操作到下午三点，摆烂到下午五点，然后学习foc算法，克拉克变换和帕克变换，到晚上七点，摆烂到凌晨三点，复习stm32定时器外设笔记到凌晨四点，然后睡到早上七点，学习stm32的输入捕获模式到早上八点，然后又睡到下午一点