---
title: 2024年八月日志
cover: ./cover/我要向前走.png
category: to-do-list
tag: [to-do-list]
article: false
---


八月一日 周四 实现可将遥感通道配置为None；修复地理坐标解析存在的问题；实现并测试websocket-connection和udp-connection两个通信类并完成相关配置页面的编写；优化样式：导航条添加阴影、统一样式、将罗盘指针由飞机线框图修改为三角形
编写博客文章《web-rtc学习笔记：通过DataChannel实现二进制数据流的传输》 并发布

八月二日 周五 维护博客网站内容：修改live2d尺寸、修改博客主标题。工作：优化重构css样式、实现主题色、dark模式、light模式的切换；修复由四元素计算顺序导致的问题

八月三日 周六 到图书馆 做题，汤家凤1800题 做了三四题 错一半对一半 有点崩溃 早饭没吃 午饭没吃 到下午也学不进去了 直接回家了 荒废一天。
八月四日 周日 到图书馆 复习导数与微分（1）；学习导数与微分（2） 晚上重学并重写FOC速度开环控制代码

八月五日 周一 工作：优化主题样式和滚动条宽度；实现的element-plus暗黑主题色的兼容；实现在状态栏展示电池和GPS信息

八月六日 周二 工作：修复打包后由代码混淆库obfuscator导致的electron环境下无法动态import和nodePolyfills库导致的process对象被覆盖的问题；为material-symbols-outlined实现GSymbol组件；修改卫星定位图标；晚上编写笔记：《FOC算法学习与实现笔记-04.高频方波注入提取位置公式推导》

八月七日 周三 工作：修复不是问题的问题；在状态栏添加温度和圈数图标，并使用echart展示温度的变化曲线。学习：上午编写笔记《FOC算法学习与实现笔记-05.高频方波注入之电流响应信号的提取》和笔记《FOC算法学习与实现笔记-06.高频方波注入之极性辨识》；晚上学习并实现foc位置闭环控制代码。

八月八日 周四 上班：实现对电池、GPS、温度、深度、舱外压力等状态信息的显示。晚上：实现位置闭环控制代码

八月九日 周五 摄像头驱动编写 通过tcp协议配置切换fps和录制分辨率、拍照分辨率、测试拍照指令和录制指令

八月十日 周六 早八点半图书馆学习svpwm 学习速度闭环的实现方法

八月十一日 周日 早八点半图书馆学习svpwm 尝试实现速度闭环代码

八月十二日 周一 上班 最近都干啥了？？，看vesc源码，了解其母线电压的计算过程，然后呢？，下班 ，修改位置闭环的实现代码，补充实现as5600的校准过程

八月十三日 周二 早四点半起床 打车去领导楼下 湖塘玉兰广场5期 买点零食当早饭 打车去奔牛机场 七点半左右登机 看了几页的大明王朝 然后聊天 十点半左右下飞机 坐轻轨 去重庆夔峡信息 技术交流 然后下楼吃饭 到一点多 然后驾车去酉阳土家族苗族自治州 四个小时左右车程 结果晚上七点才到 吃饭喝酒交流到晚上九点半 十点到酒店 洗漱 然后回忆最近五天的经历并写日志


八月十四 周三 八点起床洗漱去吃饭 八点半出酒店 九点半到地方的消防应急救援支队 配合完成验收工作 然后培训消防员使用设备 十一点半结束 然后去吃饭 两点到酉州古城美食街、逛桃花源 ，四点打车到火车站，九点到重庆 十点到机场 十点半拿到买机票附赠的酒店住宿券 十一点半到酒店 十二点下楼点菜吃饭 凌晨一点吃完 凌晨两点洗漱完睡觉

八月十五日 周四 早七点起床 七点半洗漱完出酒店 七点四十到机场 八点吃饭九点登机 十一点半到常州 然后打车去火车站 然后坐地铁一号线到科教城南 然后再打车回公司 大概一点到 太困了 摸鱼到下班 晚上学习foc算法尝试实现速度闭环

八月十六日 周五 老板一上午没来 摸鱼一上午 主要学习和了解了manufact.json、service worker 、cache 、fetch等相关内容 ，尝试理解卡尔曼滤波、然后下班，晚上回家尝试实现速度闭环，limit voltage给太高，驱动芯片烧了

八月十六日 周六 昨天睡太晚 早上起不来 八点二十才起床洗漱 九点才到图书馆 学习高数 主要是导数的微分 记了三四页笔记 ，下午两三点开始学不进去 于是开始摆烂 主要就是在看vesc的代码 尝试理解其hif高频注入的部分 晚上尝试绘制平衡小车的原理图。凌晨两点准备睡觉.....
 晚上两三点睡觉

八月十八日 周一 工作：使用vite-pwa编写pwa案例应用，搞懂关键配置，然后尝试在上位机软件中应用，另外拆分vite配置文件，使用策略模式实现electron配置和browser配置 下班：电机驱动芯片L6234D到货，三十多块钱一片，上电测试，32v0.3A，一分钟不到，废了。抑郁了.....
晚上一点多睡觉


八月十九日 周二 工作：发现pwa只对https和localhost有效，尝试了解webview方案，如ionic-team/capacitor，可以运行，但是效果不太好，可能是android虚拟机的原因，另外中午研究了下通过惯导模块的加速度求速度和位移，发现速度有累积误差，移动惯导模块并停止移动后，速度不为零，所以对其做积分得到的位移一直增加，感觉这种方案完全不可行... 晚上回家倒头就睡 十一点睡醒刷牙吃饭 然后洗漱到一点四十，准备睡觉


八月二十 周三 工作：不知道干啥了 ，上午好像在看从零开始学卡尔曼滤波 kalmanfilter.net 这本书，重新学习了期望、均值、方差、标准差、正态分布这些概念，学习了随机变量、准度精度、alpha- beta-gama滤波器等相关内容，下午，也不知道在干啥，反正看了两眼如何获取手机姿态的相关接口以及webrtc-record-client和webrtc- recorderjs两个项目，晚上回家带着小猫到街上找人送，没人要，晚上看了眼哔哩哔哩up主：DR_CAN的教程卡尔曼滤波器1-递归算法，看完然后就睡着了

八月二十一，周四，工作：用了vueuse/useDeviceOrientation的接口，在手机测试获取设备姿态到接口，结果发现获取不到，但是火狐火狐浏览器可以，然后又看了capacitor的文档，里面也没有获取姿态角的接口提供，只有手机朝向，加速度、角速度这些提供，没啥用，总不能在前端去做卡尔曼滤波吧，讨论到最后决定用webxr的接口来获取头追姿态，但是后来发现navigator.xr只能在localhost和https上使用，这导致无法在vr设备上正常访问开发机器上的http服务，后来想的办法是想办法搞自签证书，但还没弄，另外还要按文档写一个两自由度机械手的控制协议，给客户用，还没搞好，晚上下班回家，几乎啥也没干，就看了下卡尔曼滤波器2-数学基础

周五 八月二十二 工作 尝试实现自签证书、https服务器、局域网内的本地dns域名解析服务器

周六 八月二十三 早八点半到图书馆 学习高数 从导数和微分 学到 中值定理

周日 八月二十四号 早八点半到图书馆 学习高数 学习三个中值定理 晚上回家把到货的L6234芯片装上，然后测试，发现FOC代码有问题，然后发现之前以为是烧坏了的板子simpleFocShieldv2.0.4也是好的，另外测试了下高频注入的噪音问题，大概最低电压在0.08334✖️母线电压，另外感觉循环执行速度太慢了，可能问题出在读取mpu6050的地方

周一，八月二十五日，上班 测试navigator.xr创建连接获取头追数据，结果发现一旦建立连接后vr眼镜就让浏览器直接接管整个渲染管线了，ui就看不见了，中午又研究了下姿态传感器求解位移的问题，发现原因是因为姿态角在动态情况下不稳定，这导致通过姿态角求解三轴的加速度也不稳定，导致移除重力加速度后的线加速度也不稳定，导致速度和位移都不对。
两点睡觉


八月二十七日 周二 带了个mpu6050到公司做测试，学习尝试理解卡尔曼滤波；通过给video标签添加muted静音实现修复autoplay不自动播放的问题；再次尝试通过浏览器接口获取pico vr眼镜的姿态，期间发现了开源项目localtunnel，然后找视频，尝试学习freeRTOS，了解堆和栈的概念，下班后，尝试理解函数调用栈分配和释放的原理，睡到晚上凌晨一点，看视频学习库的源码目录结构，项目的搭建，官方例程的精简，动态静态任务的搭建，到凌晨五点睡觉

八月二十八日 周三 上班 尝试搭建arm-gcc开发环境，于是下载工具链，stm32标准库，freeRTOS库，尝试修改makefile文件，看官方文档，了解任务和协程的差异、任务状态、消息队列等相关内容，然后工作上有客户的FOC电调没有转速反馈消息，排查原因，无解，协商寄回，可能是没有在上位机配置开始某些消息，晚上到家发现写的代码编译不报错但是无法执行，研究半天睡到凌晨两点，睡醒继续找原因，最后发现降级freeRTOS就可以了，实际上问题可能出在配置文件里，凌晨三点睡觉

八月二十九日 周四 上午学习freeRTOS ，编写实现创建静态任务的代码 ，工作：尝试使用通过rtc record实现对视频流的录制和下载，尝试集成字节的西瓜播放器，，但是遇到问题发现video.srcObject=mediaStream; video.pause();video.play();有很大几率卡住，不知是何缘由。下班继续学习freeRTOS，把快速入门的系列视频看完，然后尝试下载arduino ide ，安装simpleFOC库，尝试编写代码实现让电机转起来，于是看文档学习库的使用，发现配置极其复杂。 到凌晨三点，把as5600和电流检测配置完成了，但是foc还是初始化失败。到凌晨三点 准备睡觉。

八月二十九 周四 次日凌晨三点三十七睡觉

八月三十 周五 上班 阅读simpleFOC源代码，学习理解低通滤波器和pid控制器，并做了笔记，下午研究mtf-01光流模块定位效果，编写cpp代码，解析从串口收到的数据然后发送到ros，在python中订阅然后积分求位移，精度可以达到厘米级，但得到的高度需要乘上一个系数。 晚上回家研究simpleFOC库，配置实现了速度闭环控制，但效果不太好，速度有抖动，问题可能在于速度的低通滤波器时间常数，或者pid没调好，懒得弄了，准备继续用stm32实现foc，通电12v2A，驱动管直接冒烟了，万用表测后发现没短路，问题在于代码里没校准编码器方向，导致编码器和电机方向相反，pid输出越大，error越大，然后调整了下电机三相中的两根线，方向一致了，驱动管也正常工作了，冒烟可能是发热融化周围松香导致的。晚上十二点半，准备睡觉。
两点睡觉...


八月三十一 周六 八点半到图书馆 学高数 中值定理 理解例题 中午吃饭下雨被困一个多小时 一点半回图书馆 太困睡到四点半 学到五点多回家 然后一直到凌晨两点多都在浪费时间.....
