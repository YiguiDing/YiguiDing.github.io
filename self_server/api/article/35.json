{"shortInfo":{"title":"mkcertç”Ÿæˆè‡ªç­¾httpsè¯ä¹¦è¿‡ç¨‹è®°å½•","cover":"\\self_server\\assets\\images\\default_cover2.jpg","date":"2022-08-22T14:45:00.000Z","tags":["mkcert","è‡ªç­¾","https","è¯ä¹¦"],"hideAtIndex":true,"categories":"ç¬”è®°","id":35,"countWords":1063,"readSeconds":106.3,"assetsbaseUrl":"/self_server/assets/"},"content":"# mkcertç”Ÿæˆè‡ªç­¾httpsè¯ä¹¦è¿‡ç¨‹è®°å½•\r\n## ç›®å½•\r\n- ](#mkcertç”Ÿæˆè‡ªç­¾httpsè¯ä¹¦è¿‡ç¨‹è®°å½•)\r\n  - ](#ç›®å½•)\r\n  - ](#ç›¸å…³æ¦‚å¿µ)\r\n  - ](#å®‰è£…mkcert)\r\n  - ](#ç”Ÿæˆç”¨æˆ·è¯ä¹¦)\r\n  - ](#å®‰è£…é¢å‘è€…è¯ä¹¦)\r\n    - ](#åœ¨pcç«¯å®‰è£…)\r\n    - ](#åœ¨iosç«¯å®‰è£…)\r\n\r\n## ç›¸å…³æ¦‚å¿µ\r\n* **æ•°å­—è¯ä¹¦è®¤è¯æœºæ„ï¼ˆCAï¼‰ï¼Œ**\r\n  * æ˜¯è´Ÿè´£å‘æ”¾å’Œç®¡ç†æ•°å­—è¯ä¹¦çš„æƒå¨æœºæ„ï¼Œ\r\n  * è´Ÿè´£ç­¾å‘è¯ä¹¦ã€è®¤è¯è¯ä¹¦ã€ç®¡ç†å·²é¢å‘è¯ä¹¦\r\n  * CA ä¹Ÿæ‹¥æœ‰ç”¨æˆ·çš„è¯ä¹¦ï¼ˆå†…å«å…¬é’¥ï¼‰å’Œç§é’¥ã€‚\r\n  * ä»»ä½•äººéƒ½å¯ä»¥å¾—åˆ° CA çš„è¯ä¹¦ï¼ˆå«å…¬é’¥ï¼‰ï¼Œç”¨ä»¥éªŒè¯ CA æ‰€ç­¾å‘çš„è¯ä¹¦ã€‚\r\n* **ç”¨æˆ·è¯ä¹¦**\r\n  * ç”¨æˆ·è‹¥æ¬²è·å–è¯ä¹¦ï¼Œåº”å…ˆå‘ CA æå‡ºç”³è¯·ï¼ŒCA åˆ¤æ˜ç”³è¯·è€…çš„èº«ä»½åï¼Œä¸ºä¹‹åˆ†é…ä¸€ä¸ªå…¬é’¥ï¼Œå¹¶å°†è¯¥å…¬é’¥ä¸å…¶èº«ä»½ä¿¡æ¯ç»‘å®šï¼Œä¸ºè¯¥æ•´ä½“ç­¾åï¼Œç­¾ååçš„æ•´ä½“å³ä¸ºè¯ä¹¦ï¼Œå‘è¿˜ç»™ç”³è¯·è€…ã€‚\r\n* **é‰´åˆ«ç”¨æˆ·è¯ä¹¦çš„çœŸä¼ª**\r\n  * ä¸€ä¸ªç”¨æˆ·æƒ³é‰´åˆ«å¦ä¸€ä¸ªç”¨æˆ·çš„è¯ä¹¦çš„çœŸä¼ªï¼Œç”¨ CA çš„å…¬é’¥å¯¹é‚£ä¸ªè¯ä¹¦ä¸Šçš„ç­¾å­—è¿›è¡ŒéªŒè¯ï¼Œä¸€æ—¦éªŒè¯é€šè¿‡ï¼Œè¯¥è¯ä¹¦å°±è¢«è®¤ä¸ºæ˜¯æœ‰æ•ˆçš„ã€‚\r\n\r\n\r\n\r\n## å®‰è£…mkcert\r\n**å®‰è£…mkcertå·¥å…·**\r\n```bash\r\nsudo apt-get install mkcert\r\n```\r\n\r\n\r\n## ç”Ÿæˆç”¨æˆ·è¯ä¹¦\r\n**ç”Ÿæˆè¯ä¹¦:`cert.crt` å’Œ ç§é’¥:`cert-key.key`**\r\n```bash\r\nmkcert -cert-file ~/.ssl/cert.crt -key-file ~/.ssl/cert-key.key cn-zz-bgp-2.natfrp.cloud 43.249.193.55 localhost 127.0.0.1 ::1\r\n\r\n# è¾“å‡ºç»“æœ:\r\n# Created a new local CA ğŸ’¥\r\n# Note: the local CA is not installed in the system trust store.\r\n# Note: the local CA is not installed in the Firefox and/or Chrome/Chromium trust store.\r\n# Run \"mkcert -install\" for certificates to be trusted automatically âš ï¸\r\n# \r\n# Created a new certificate valid for the following names ğŸ“œ\r\n#  - \"cn-zz-bgp-2.natfrp.cloud\"\r\n#  - \"43.249.193.55\"\r\n#  - \"localhost\"\r\n#  - \"127.0.0.1\"\r\n#  - \"::1\"\r\n# \r\n# The certificate is at \"~/.ssl/cert.crt\" and the key at \"~/.ssl/cert-key.key\" âœ…\r\n# \r\n# It will expire on 22 November 2024 ğŸ—“\r\n# \r\n# \r\n```\r\n\r\n**é…ç½®æœåŠ¡å™¨å®‰è£…ç”¨æˆ·è¯ä¹¦(ä»¥code-serverä¸ºä¾‹)**\r\n```bash\r\n# vi ~/.config/code-server/config.yaml\r\n# code-serverçš„é…ç½®æ–‡ä»¶:\r\nbind-addr: 0.0.0.0:8080\r\nauth: password\r\npassword: ???????????????????????\r\n# cert ä¸ºåˆšåˆšç”Ÿæˆçš„è¯ä¹¦\r\ncert: /home/userName/.ssl/cert.crt\r\n# cert-key ä¸ºåˆšåˆšç”Ÿæˆçš„ç§é’¥\r\ncert-key: /home/userName/.ssl/cert-key.key\r\n```\r\n\r\n**æ­¤æ—¶è®¿é—®localhostå°†ä¾ç„¶æŠ¥é”™,å› ä¸ºæ²¡æœ‰ä¸ºæµè§ˆå™¨å®‰è£…é¢å‘è€…çš„è¯ä¹¦**\r\n\r\n![](./images/mkcertç”Ÿæˆè‡ªç­¾httpsè¯ä¹¦è¿‡ç¨‹è®°å½•/98e2d9d7e5fd0ced7043c50a28be71243a50b4830341e38753308ed6f96eac4f.png)  \r\n\r\n## å®‰è£…é¢å‘è€…è¯ä¹¦\r\n\r\n### åœ¨PCç«¯å®‰è£…\r\n**æ–¹æ³•1:ä½¿ç”¨å‘½ä»¤å°†é¢å‘è€…mkcertæœºæ„è¯ä¹¦æ·»åŠ åˆ°ç³»ç»Ÿä¿¡ä»»,åŒæ—¶å®‰è£…åˆ°æœ¬æœºçš„ç«ç‹æµè§ˆå™¨å’Œè°·æ­Œæµè§ˆå™¨**\r\n```bash\r\nmkcert -install\r\n\r\n# è¾“å‡ºç»“æœ:\r\n# \r\n# The local CA is now installed in the system trust store! \r\n# ç¿»è¯‘:æœ¬åœ°è¯ä¹¦å·²ç»æ·»åŠ åˆ°åˆ°ç³»ç»Ÿä¿¡ä»»ä»“åº“\r\n# Warning: \"certutil\" is not available, so the CA can't be automatically installed in Firefox and/or Chrome/Chromium! âš ï¸\r\n# ç¿»è¯‘:certutil(è¯ä¹¦å·¥å…·)ä¸å¯ç”¨,æ‰€ä»¥è¯ä¹¦æ— æ³•è‡ªåŠ¨å®‰è£…åˆ°æœ¬æœºçš„æµè§ˆå™¨\r\n# Install \"certutil\" with \"apt install libnss3-tools\" and re-run \"mkcert -install\" ğŸ‘ˆ\r\n# ç¿»è¯‘: æ‰§è¡Œ \"apt install libnss3-tools\"æ¥å®‰è£…\"certutil\",ç„¶å é‡æ–°æ‰§è¡Œ \"mkcert -install\"\r\n\r\n# å®‰è£…libnss3-tools\r\napt install libnss3-tools\r\n# é‡æ–°æ‰§è¡Œ \"mkcert -install\"\r\nmkcert -install\r\n```\r\n\r\n**æ­¤æ—¶æµè§ˆå™¨å°±èƒ½æ­£å¸¸è®¿é—®äº†**\r\n\r\n![](./images/mkcertç”Ÿæˆè‡ªç­¾httpsè¯ä¹¦è¿‡ç¨‹è®°å½•/ea42bffa2f50e7090b52dced9381273fb9276f334a863d6e8c1cda6b3030a98e.png)  \r\n\r\n\r\n\r\n**æ–¹æ³•2:æ‰‹åŠ¨å°†é¢å‘è€…mkcertæœºæ„è¯ä¹¦æ‰‹åŠ¨æ·»åŠ åˆ°å®¢æˆ·ç«¯çš„æµè§ˆå™¨**\r\n**æŸ¥çœ‹ CA è¯ä¹¦çš„å­˜æ”¾ä½ç½®**\r\n```bash\r\nmkcert -CAROOT\r\n# è¾“å‡ºç»“æœ:\r\n# /root/.local/share/mkcert\r\n\r\ntree $(mkcert -CAROOT)\r\n# è¾“å‡ºç»“æœ: \r\n# /home/dyg/.local/share/mkcert\r\n# â”œâ”€â”€ rootCA-key.pem é¢å‘è€…æœºæ„çš„ç§é’¥\r\n# â””â”€â”€ rootCA.pem é¢å‘è€…æœºæ„çš„è¯ä¹¦\r\n```\r\n\r\n**ç„¶åå°†ä¸Šè¿°é¢å‘è€…mkcertæœºæ„è¯ä¹¦æ–‡ä»¶`rootCA.pem`æ‰‹åŠ¨æ·»åŠ åˆ°pcç«¯çš„æµè§ˆå™¨ä¸­**\r\n\r\n![](./images/mkcertç”Ÿæˆè‡ªç­¾httpsè¯ä¹¦è¿‡ç¨‹è®°å½•/d54fd4c159d8f58627c6ec16a28ced8b2f47fd3a1b7d57dedd94031a6c68c6d3.png)  \r\n\r\n\r\n### åœ¨IOSç«¯å®‰è£…\r\n\r\n**å°†é¢å‘è€…mkcertæœºæ„è¯ä¹¦æ‰‹åŠ¨æ·»åŠ åˆ°**\r\n\r\n**å®‰è£…å‰**\r\n![](./images/mkcertç”Ÿæˆè‡ªç­¾httpsè¯ä¹¦è¿‡ç¨‹è®°å½•/6c7400885884577a2b676133ffe162ed3485dea02996e03b7c9c9ef45c307f7d.png)  \r\n\r\n![](./images/mkcertç”Ÿæˆè‡ªç­¾httpsè¯ä¹¦è¿‡ç¨‹è®°å½•/c0eb4ee022cca679c29669fd4cd0171fb124ccacec29670bb9dcdca59d46176c.png)  \r\n\r\n\r\n**å®‰è£…ä¸­**\r\n![](./images/mkcertç”Ÿæˆè‡ªç­¾httpsè¯ä¹¦è¿‡ç¨‹è®°å½•/273368cf71de2ec25d2f2db736245f692c0a4d209a18a8c7d8f2bb9c64d0c1ec.png)  \r\n![](./images/mkcertç”Ÿæˆè‡ªç­¾httpsè¯ä¹¦è¿‡ç¨‹è®°å½•/816173bb4129ce92bbb68192a9f57d0218df7d1f3fb78ba2f6e0ce90a37f858d.png)  \r\n![](./images/mkcertç”Ÿæˆè‡ªç­¾httpsè¯ä¹¦è¿‡ç¨‹è®°å½•/8146b3f22175a2139a6edd516eabedd020c7d394772057d918fba0c2d00ed3fc.png)  \r\n![](./images/mkcertç”Ÿæˆè‡ªç­¾httpsè¯ä¹¦è¿‡ç¨‹è®°å½•/3a54b606903275febc7a5e9d03f031bab96c4e1aa09b64e986b5b405a5581d48.png)  \r\n![](./images/mkcertç”Ÿæˆè‡ªç­¾httpsè¯ä¹¦è¿‡ç¨‹è®°å½•/379bb20613e6ebf812129a2ce13ca9a14eef295f69cdc41ecb5b40a9f45346bc.png)  \r\n![](./images/mkcertç”Ÿæˆè‡ªç­¾httpsè¯ä¹¦è¿‡ç¨‹è®°å½•/df4be11a914591cdeb1327c453b4d988bca8de2ce1deb45ab89f4015e821527e.png)  \r\n\r\n\r\n\r\n\r\n**å®‰è£…å**\r\n![](./images/mkcertç”Ÿæˆè‡ªç­¾httpsè¯ä¹¦è¿‡ç¨‹è®°å½•/6e926867c2eb90dbcebe8911a7863ea099f4bc6c2230fafb7a94982fd8d4e4cd.png)  \r\n\r\n![](./images/mkcertç”Ÿæˆè‡ªç­¾httpsè¯ä¹¦è¿‡ç¨‹è®°å½•/b67d7716a9270e7e723ba322faa4293cf706c1e35d8b7969ee5356446923b6e7.png)  \r\n"}