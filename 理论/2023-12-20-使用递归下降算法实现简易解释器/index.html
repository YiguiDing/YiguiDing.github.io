<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.52" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://dingdingdang.online/%E7%90%86%E8%AE%BA/2023-12-20-%E4%BD%BF%E7%94%A8%E9%80%92%E5%BD%92%E4%B8%8B%E9%99%8D%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93%E8%A7%A3%E9%87%8A%E5%99%A8/"><meta property="og:site_name" content="YiguiDingçš„Blogå°ç«™"><meta property="og:title" content="ä½¿ç”¨é€’å½’ä¸‹é™ç®—æ³•å®ç°ç®€æ˜“è§£é‡Šå™¨"><meta property="og:description" content="å°è¯•ä½¿ç”¨é€’å½’ä¸‹é™ç®—æ³•å®ç°ç®€æ˜“è¯æ³•åˆ†æå™¨å’Œæ–‡æ³•åˆ†æå™¨ä»¥åŠè§£é‡Šå™¨"><meta property="og:type" content="article"><meta property="og:image" content="https://dingdingdang.online/cover/ä½¿ç”¨é€’å½’ä¸‹é™ç®—æ³•å®ç°ç®€æ˜“è§£é‡Šå™¨.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-03-18T09:30:40.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:src" content="https://dingdingdang.online/cover/ä½¿ç”¨é€’å½’ä¸‹é™ç®—æ³•å®ç°ç®€æ˜“è§£é‡Šå™¨.png"><meta name="twitter:image:alt" content="ä½¿ç”¨é€’å½’ä¸‹é™ç®—æ³•å®ç°ç®€æ˜“è§£é‡Šå™¨"><meta property="article:author" content="ä¸æ¯…æ¡‚"><meta property="article:tag" content="é€’å½’ä¸‹é™"><meta property="article:tag" content="è§£é‡Šå™¨"><meta property="article:tag" content="ç¼–è¯‘åŸç†"><meta property="article:published_time" content="2023-12-20T17:21:35.000Z"><meta property="article:modified_time" content="2024-03-18T09:30:40.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"ä½¿ç”¨é€’å½’ä¸‹é™ç®—æ³•å®ç°ç®€æ˜“è§£é‡Šå™¨","image":["https://dingdingdang.online/cover/ä½¿ç”¨é€’å½’ä¸‹é™ç®—æ³•å®ç°ç®€æ˜“è§£é‡Šå™¨.png"],"datePublished":"2023-12-20T17:21:35.000Z","dateModified":"2024-03-18T09:30:40.000Z","author":[{"@type":"Person","name":"ä¸æ¯…æ¡‚","email":"2449695354@qq.com"}]}</script><meta name="baidu-site-verification" content="codeva-PwE9Ts6nMl"><link rel="icon" href="/images/favicon_icon.jpg"><link rel="icon" href="/images/favicon_icon.jpg" type="image/png" sizes="192x192"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/images/favicon_icon.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/images/favicon_icon.jpg"><meta name="msapplication-TileColor" content="#46bd87"><link rel="alternate" type="application/rss+xml" href="https://dingdingdang.online/rss.xml" title="YiguiDingçš„Blogå°ç«™ RSS Feed"><title>ä½¿ç”¨é€’å½’ä¸‹é™ç®—æ³•å®ç°ç®€æ˜“è§£é‡Šå™¨ | YiguiDingçš„Blogå°ç«™</title><meta name="description" content="å°è¯•ä½¿ç”¨é€’å½’ä¸‹é™ç®—æ³•å®ç°ç®€æ˜“è¯æ³•åˆ†æå™¨å’Œæ–‡æ³•åˆ†æå™¨ä»¥åŠè§£é‡Šå™¨">
    <link rel="preload" href="/assets/style-1xHYhfFG.css" as="style"><link rel="stylesheet" href="/assets/style-1xHYhfFG.css">
    <link rel="modulepreload" href="/assets/app-B8JFERy0.js"><link rel="modulepreload" href="/assets/index.html-Cm3Jtz9L.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><!----><!----><span class="vp-site-name">YiguiDingçš„Blogå°ç«™</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="ä¸»é¡µ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-house-chimney" style=""></span><!--]-->ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="ç¬”è®°"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>ç¬”è®°<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF/" aria-label="å‰ç«¯"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-code" style=""></span><!--]-->å‰ç«¯<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E5%90%8E%E7%AB%AF/" aria-label="åç«¯"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-server" style=""></span><!--]-->åç«¯<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E7%AE%97%E6%B3%95/" aria-label="ç®—æ³•"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-diagram-project" style=""></span><!--]-->ç®—æ³•<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E7%94%B5%E5%AD%90/" aria-label="ç”µå­"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-bolt" style=""></span><!--]-->ç”µå­<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/%E7%90%86%E8%AE%BA/" aria-label="ç†è®º"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-book-bookmark" style=""></span><!--]-->ç†è®º<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E5%B7%A5%E5%85%B7/" aria-label="å·¥å…·"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-screwdriver-wrench" style=""></span><!--]-->å·¥å…·<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/%E9%9A%8F%E7%AC%94/" aria-label="éšç¬”"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-note-sticky" style=""></span><!--]-->éšç¬”<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/%E8%AE%A1%E5%88%92/" aria-label="è®¡åˆ’"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span><!--]-->è®¡åˆ’<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/%E9%A1%B9%E7%9B%AE/" aria-label="é¡¹ç›®"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-box" style=""></span><!--]-->é¡¹ç›®<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/%E7%BD%91%E7%AB%99/%E5%8F%8B%E9%93%BE.html" aria-label="å‹é“¾"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-user-group" style=""></span><!--]-->å‹é“¾<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/%E7%BD%91%E7%AB%99/%E5%85%B3%E4%BA%8E.html" aria-label="å…³äº"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-address-card" style=""></span><!--]-->å…³äº<!----></a></div></nav><!----><!----><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">æœç´¢</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">23ç§è®¾è®¡æ¨¡å¼å­¦ä¹ ç¬”è®°</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2023 12 13 æ¸¸æˆè®¾è®¡æ¨¡å¼å­¦ä¹ ç¬”è®°</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2023 12 15 å®ç°ç®€æ˜“ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">2023 12 20 ä½¿ç”¨é€’å½’ä¸‹é™ç®—æ³•å®ç°ç®€æ˜“è§£é‡Šå™¨</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/%E7%90%86%E8%AE%BA/2023-12-20-%E4%BD%BF%E7%94%A8%E9%80%92%E5%BD%92%E4%B8%8B%E9%99%8D%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93%E8%A7%A3%E9%87%8A%E5%99%A8/" aria-label="ä½¿ç”¨é€’å½’ä¸‹é™ç®—æ³•å®ç°ç®€æ˜“è§£é‡Šå™¨"><!---->ä½¿ç”¨é€’å½’ä¸‹é™ç®—æ³•å®ç°ç®€æ˜“è§£é‡Šå™¨<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2023 12 23 ã€ç¼–è¯‘åŸç†ã€‘é‡å­¦ç¬”è®°</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ffmpegå­¦ä¹ ç¬”è®°</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">è®¾è®¡æ¨¡å¼å­¦ä¹ ç¬”è®°( Javaç‰ˆ)</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">è®¾è®¡æ¨¡å¼å­¦ä¹ ç¬”è®°( Type Scriptç‰ˆ)</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><div class="page-cover"><img src="/cover/ä½¿ç”¨é€’å½’ä¸‹é™ç®—æ³•å®ç°ç®€æ˜“è§£é‡Šå™¨.png" alt no-view></div><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->ä½¿ç”¨é€’å½’ä¸‹é™ç®—æ³•å®ç°ç®€æ˜“è§£é‡Šå™¨</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">ä¸æ¯…æ¡‚</span></span><span property="author" content="ä¸æ¯…æ¡‚"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-12-20T17:21:35.512Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 5 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT5M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color5 clickable" role="navigation">ç†è®º</span><!--]--><meta property="articleSection" content="ç†è®º"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color7 clickable" role="navigation">é€’å½’ä¸‹é™</span><span class="page-tag-item color4 clickable" role="navigation">è§£é‡Šå™¨</span><span class="page-tag-item color2 clickable" role="navigation">ç¼–è¯‘åŸç†</span><!--]--><meta property="keywords" content="é€’å½’ä¸‹é™,è§£é‡Šå™¨,ç¼–è¯‘åŸç†"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ç›®å½•">ç›®å½•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ç¼˜ç”±">ç¼˜ç”±</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ç›®å‰æ”¯æŒçš„è¯­æ³•">ç›®å‰æ”¯æŒçš„è¯­æ³•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å®ç°æ•ˆæœ">å®ç°æ•ˆæœ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è§£é‡Šå™¨æµ‹è¯•">è§£é‡Šå™¨æµ‹è¯•</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#è¯æ³•åˆ†æçš„å®ç°">è¯æ³•åˆ†æçš„å®ç°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ–‡æ³•å®šä¹‰">æ–‡æ³•å®šä¹‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ–‡æ³•åˆ†æçš„å®ç°">æ–‡æ³•åˆ†æçš„å®ç°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#è§£é‡Šå™¨çš„å®ç°">è§£é‡Šå™¨çš„å®ç°</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="å°è¯•ä½¿ç”¨é€’å½’ä¸‹é™ç®—æ³•å®ç°ç®€æ˜“è¯æ³•åˆ†æå™¨å’Œæ–‡æ³•åˆ†æå™¨ä»¥åŠè§£é‡Šå™¨" tabindex="-1"><a class="header-anchor" href="#å°è¯•ä½¿ç”¨é€’å½’ä¸‹é™ç®—æ³•å®ç°ç®€æ˜“è¯æ³•åˆ†æå™¨å’Œæ–‡æ³•åˆ†æå™¨ä»¥åŠè§£é‡Šå™¨"><span>å°è¯•ä½¿ç”¨é€’å½’ä¸‹é™ç®—æ³•å®ç°ç®€æ˜“è¯æ³•åˆ†æå™¨å’Œæ–‡æ³•åˆ†æå™¨ä»¥åŠè§£é‡Šå™¨</span></a></h1><p><img src="/assets/%E4%BD%BF%E7%94%A8%E9%80%92%E5%BD%92%E4%B8%8B%E9%99%8D%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93%E8%A7%A3%E9%87%8A%E5%99%A8-DC6iFKlG.png" alt=""></p><h2 id="ç›®å½•" tabindex="-1"><a class="header-anchor" href="#ç›®å½•"><span>ç›®å½•</span></a></h2><ul><li><a href="#%E5%B0%9D%E8%AF%95%E4%BD%BF%E7%94%A8%E9%80%92%E5%BD%92%E4%B8%8B%E9%99%8D%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E5%99%A8%E5%92%8C%E6%96%87%E6%B3%95%E5%88%86%E6%9E%90%E5%99%A8%E4%BB%A5%E5%8F%8A%E8%A7%A3%E9%87%8A%E5%99%A8">å°è¯•ä½¿ç”¨é€’å½’ä¸‹é™ç®—æ³•å®ç°ç®€æ˜“è¯æ³•åˆ†æå™¨å’Œæ–‡æ³•åˆ†æå™¨ä»¥åŠè§£é‡Šå™¨</a><ul><li><a href="#%E7%9B%AE%E5%BD%95">ç›®å½•</a></li><li><a href="#%E7%BC%98%E7%94%B1">ç¼˜ç”±</a></li><li><a href="#%E7%9B%AE%E5%89%8D%E6%94%AF%E6%8C%81%E7%9A%84%E8%AF%AD%E6%B3%95">ç›®å‰æ”¯æŒçš„è¯­æ³•</a></li><li><a href="#%E5%AE%9E%E7%8E%B0%E6%95%88%E6%9E%9C">å®ç°æ•ˆæœ</a><ul><li><a href="#%E8%A7%A3%E9%87%8A%E5%99%A8%E6%B5%8B%E8%AF%95">è§£é‡Šå™¨æµ‹è¯•</a></li></ul></li><li><a href="#%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E7%9A%84%E5%AE%9E%E7%8E%B0">è¯æ³•åˆ†æçš„å®ç°</a></li><li><a href="#%E6%96%87%E6%B3%95%E5%AE%9A%E4%B9%89">æ–‡æ³•å®šä¹‰</a></li><li><a href="#%E6%96%87%E6%B3%95%E5%88%86%E6%9E%90%E7%9A%84%E5%AE%9E%E7%8E%B0">æ–‡æ³•åˆ†æçš„å®ç°</a></li><li><a href="#%E8%A7%A3%E9%87%8A%E5%99%A8%E7%9A%84%E5%AE%9E%E7%8E%B0">è§£é‡Šå™¨çš„å®ç°</a></li></ul></li></ul><h2 id="ç¼˜ç”±" tabindex="-1"><a class="header-anchor" href="#ç¼˜ç”±"><span>ç¼˜ç”±</span></a></h2><p>2021å¹´08æœˆçš„æ—¶å€™ï¼Œåœ¨bilibiliä¸Šçœ‹åˆ°è¿‡ä¸€ä¸ªè®²è§£å¦‚ä½•ç”¨700è¡Œæ‰‹å†™å®ç°ä¸€ä¸ªç¼–è¯‘å™¨çš„<a href="https://www.bilibili.com/video/BV1Kf4y1V783" target="_blank" rel="noopener noreferrer">è§†é¢‘</a>ï¼Œ<br> æºä»£ç åœ¨è¿™é‡Œï¼Œ<a href="https://github.com/archeryue/cpc" target="_blank" rel="noopener noreferrer">cpc</a></p><p>å½“æ—¶è™½ç„¶è°ƒä¾ƒçš„è¯„è®ºäº†ä¸€å¥<code>c--</code>,ä½†å…¶å®å†…å¿ƒå¯¹å†™å‡ºè¿™ç§ä¸œè¥¿çš„äººè¿˜æ˜¯æ„Ÿåˆ°ç”±è¡·çš„é’¦ä½©çš„ï¼Œ</p><p>è§†é¢‘çš„å†…å®¹æˆ‘é‚£æ—¶åªå¤§æ¦‚çš„æµè§ˆè¿‡ä¸€äº›ï¼Œå½“æ—¶æ²¡æœ‰æ—¶é—´ä»”ç»†å»çœ‹ã€‚</p><p>å†é‚£åæ¥ä¸ä¹…çš„æ—¶é—´é‡Œï¼Œæˆ‘åˆçœ‹åˆ°è¿‡å¦å¤–ä¸€ä¸ªç¼–è¯‘å™¨é¡¹ç›®ï¼Œ<a href="https://github.com/jamiebuilds/the-super-tiny-compiler" target="_blank" rel="noopener noreferrer"><code>the-super-tiny-compiler</code></a>,</p><p>è¿™ä¸ªé¡¹ç›®ä»…ç”¨å‡ ç™¾è¡Œçš„ä»£ç ç”¨æ¯”è¾ƒè´´è¿‘çœŸå®ç¼–è¯‘å™¨çš„æµç¨‹å®ç°äº†å°†æŸç§ä½œè€…å®šä¹‰çš„ä»£ç ç¿»è¯‘æˆä¸ºç±»ä¼¼äºcè¯­è¨€çš„ä»£ç ï¼Œ</p><p>è¿™ä¸ªé¡¹ç›®çš„ä»£ç æˆ‘å¤§æ¦‚çœ‹è¿‡ï¼Œå¹¶ç”¨tså°è¯•ç€å°†å®ƒé‡æ–°å®ç°äº†ä¸€éï¼Œæœ€è¿‘ï¼Œå°±æ˜¯ä¸Šå‘¨çš„æ—¶å€™ï¼Œæˆ‘å¦å¤–å°è¯•ç€ä¸ºå…¶å®ç°äº†ä¸€ä¸ªè§£é‡Šå™¨ï¼Œä½¿å¾—å¯ä»¥å°†å…¶ç”Ÿæˆçš„æŠ½è±¡è¯­æ³•æ ‘ç¿»è¯‘æ‰§è¡Œã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªé¡¹ç›®ï¼Œ<a href="https://github.com/AttackOnMorty/rdp" target="_blank" rel="noopener noreferrer">Recursive Descent Parser</a> ä¸€ä¸ªé€’å½’ä¸‹é™Parserçš„å®ç°ï¼Œç”¨çš„æ˜¯jså®ç°çš„ã€‚</p><p>è¿™ä¸ªé¡¹ç›®ä¸­çš„ä»£ç æä¾›äº†ä¸€ç§æ¯”è¾ƒå®Œç¾ç¼–ç¨‹èŒƒå¼ï¼Œä½†æ˜¯åœ¨æ–‡æ³•çš„å®šä¹‰éƒ¨åˆ†æœ‰äº›è®©äººæ„Ÿåˆ°éš¾ä»¥ç†è§£ï¼Œæˆ‘é‚£æ—¶åˆšçœ‹åˆ°è¿™ä¸ªé¡¹ç›®çš„æ—¶å€™ï¼Œå®Œå…¨çœ‹ä¸æ‡‚ï¼Œè¿‡äºæ²®ä¸§ï¼Œæ”¾å¼ƒäº†ã€‚</p><p>åæ¥è¿˜çœ‹åˆ°è¿‡ä¸€ä¸ªé¡¹ç›®ï¼Œåå­—å¿˜äº†ï¼Œå¤§æ¦‚å°±æ˜¯åœ¨å‰ç«¯ä¸­å®ç°äº†ä¸€ä¸ªè™šæ‹Ÿæœºï¼Œä½¿å¾—å¯ä»¥åŠ è½½å¹¶æ‰§è¡Œé‚£ç§è¯­è¨€ç¼–å†™çš„æ¸¸æˆï¼Œ</p><p>è¿˜æœ‰iPhoneä¸Šçš„iSH,ä¹Ÿæ˜¯å¼€æºé¡¹ç›®,32bitè™šæ‹Ÿæœºï¼Œè§£é‡Šæ‰§è¡Œå­—èŠ‚ç ï¼Œå¯ä»¥è¿è¡ŒLinuxã€‚</p><p>è¿˜æœ‰å°±æ˜¯UTM,ä¸€æ¬¾å¯ä»¥åœ¨æ‰‹æœºä¸Šè¿è¡Œçš„å¼€æºçš„è™šæ‹Ÿæœºï¼Œèƒ½åœ¨å¹³æ¿ç”µè„‘ä¸Šè¿è¡Œwin7ç³»ç»Ÿã€‚</p><p>æ€»ä¹‹ï¼Œè¿™äº›éƒ½æ˜¯æˆ‘ä¹‹å‰æ¥è§¦è¿‡ã€çœ‹è¿‡ã€ç”¨è¿‡ã€è®©æˆ‘æ„Ÿåˆ°Amazingçš„é¡¹ç›®,è¿™äº›é¡¹ç›®æˆ–å¤šæˆ–å°‘éƒ½å½±å“äº†æˆ‘ï¼Œä½¿æˆ‘äº§ç”Ÿäº†ä¹Ÿè¦å†™ä¸€ä¸ªç±»ä¼¼ä¸œè¥¿çš„æƒ³æ³•ã€‚</p><p>ç„¶åï¼Œæœ€è¿‘åœ¨å­¦æ¸¸æˆè®¾è®¡æ¨¡å¼ï¼Œå…¶ä¸­ä½œè€…åœ¨è®²è§£è¡Œä¸ºæ¨¡å¼çš„éƒ¨åˆ†æ—¶ï¼Œæåˆ°äº†è§£é‡Šå™¨æ¨¡å¼å’Œå¦‚ä½•å®ç°ä¸€ä¸ªè™šæ‹Ÿæœºå¹¶æ‰§è¡Œå­—èŠ‚ç çš„å†…å®¹ï¼Œç”¨äºä½¿å¾—ç©å®¶å¯ä»¥ç”¨å¦å¤–ä¸€ç§å’Œæ¸¸æˆæœ¬èº«çš„ç¼–ç¨‹è¯­è¨€æ— å…³çš„è¯­è¨€æ¥äºŒæ¬¡å¼€å‘æ¸¸æˆè§’è‰²çš„è¡Œä¸ºã€‚</p><p>è¿™éƒ¨åˆ†å†…å®¹ä¸­ä½œè€…è™½ç„¶è®²äº†å¾ˆå¤šè¿™ç§è§£é‡Šå™¨æ¨¡å¼çš„ç¼ºç‚¹å’Œå®ç°è™šæ‹Ÿæœºæ‰§è¡Œå­—èŠ‚ç çš„ä¼˜ç‚¹ï¼Œä½†å´æ²¡æœ‰æåŠå¦‚ä½•ç”Ÿæˆå­—èŠ‚ç ï¼Œä½œè€…åªç»™äº†ä¸€ç§é€šè¿‡å›¾å½¢ç•Œé¢æ‹–æ‹½ç”ŸæˆæŒ‡ä»¤åºåˆ—çš„æ–¹å¼æ¥ç”Ÿæˆå­—èŠ‚ç ï¼Œä¼˜ç‚¹è‡ªç„¶æ˜¯å¯¹ç”¨æˆ·å‹å¥½ï¼Œä½†ç¼ºç‚¹ä¹Ÿæ˜¯æ˜¾ç„¶çš„ï¼Œå›¾å½¢åŒ–çš„ç•Œé¢æ„Ÿè§‰å°±ä¸å¦‚ç›´æ¥ç¼–å†™ç¨‹åºé‚£æ ·èƒ½å¯¹æ¸¸æˆåšåˆ°éå¸¸ç²¾ç»†åŒ–çš„æ§åˆ¶ã€‚</p><p>æ€»ä¹‹ï¼Œä½†è¿™è®©æˆ‘å›æƒ³èµ·äº†è¿™ä¹‹å‰çœ‹åˆ°è¿‡çš„ä¸Šè¿°å‡ ä¸ªé¡¹ç›®ï¼Œè®©æˆ‘çªç„¶ä¹Ÿæƒ³å®Œæ•´çš„å®ç°ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œç¼–è¯‘å‡ºå­—èŠ‚ç ï¼Œå¦å¤–å†å®ç°ä¸€ä¸ªè™šæ‹Ÿæœºï¼Œç”¨æ¥æ‰§è¡Œå­—èŠ‚ç ã€‚æœ‰è¿™ä¸ªæƒ³æ³•åæˆ‘ä¾¿æŠ‘åˆ¶ä¸ä½å†…å¿ƒçš„æƒ³è¦å®ç°å®ƒçš„å†²åŠ¨ã€‚</p><p>è¿™å‡ å¤©æˆ‘é‡æ–°é˜…è¯»äº†ä¸Šé¢å‡ ä¸ªé¡¹ç›®çš„æºä»£ç ï¼Œç”šè‡³å»è¯»äº†jsçš„æ ‡å‡†æ–‡æ¡£ï¼Œå»çœ‹äº†å®ƒçš„æ–‡æ³•å®šä¹‰ï¼Œå¦å¤–è¿˜å¤§æ¦‚çœ‹äº†å¦ä¸€ä¸ªé¡¹ç›® <a href="https://github.com/gfwilliams/tiny-js" target="_blank" rel="noopener noreferrer">tiny-js</a>,è¿™ä¸ªé¡¹ç›®ç”¨å¤§æ¦‚2000è¡Œçš„ä»£ç å®ç°äº†ä¸€æ¬¾å¯åµŒå…¥è‡³c++ç¨‹åºçš„jsè§£é‡Šå™¨ï¼Œè™½ç„¶æ²¡æœ‰å®Œå…¨çœ‹å®Œï¼Œä½†ç»™æˆ‘çš„æ„Ÿè§‰è¿˜æ˜¯æŒºéœ‡æ’¼çš„ï¼Œå°±æ˜¯å¤ªç‰›äº†ã€‚</p><p>æœ€è¿‘å‡ å¤©ï¼Œç»ˆäºå°è¯•ç€æŠŠè¯æ³•åˆ†æå’Œæ–‡æ³•åˆ†æçš„å†…å®¹ææ‡‚äº†ï¼Œç‰¹åˆ«æ˜¯å¦‚ä½•å®šä¹‰æ–‡æ³•çš„é‚£éƒ¨åˆ†ã€‚</p><p>æ˜¨å¤©ä¸‹åˆ(2023/12/20)äº”ç‚¹çš„æ—¶å€™ï¼Œæ„Ÿè§‰å·²ç»å·®ä¸å¤šå®Œæ•´ç†è§£äº†ï¼Œç„¶åé€šå®µæ•²äº†ä¸€æ™šä¸Šçš„ä»£ç ï¼Œä¸€ç›´åˆ°ä»Šå¤©æ—©ä¸Šï¼Œå®Œæ•´çš„ä»å¤´å®ç°äº†Tokenizer Parser ä»¥åŠï¼Œè§£é‡Šå™¨ï¼Œæ”¯æŒçš„è¯­æ³•åŒ…æ‹¬ï¼šå˜é‡ã€å‡½æ•°çš„å®šä¹‰å’Œè°ƒç”¨ï¼Œå¾ªç¯è¯­å¥ï¼Œå—ä½œç”¨åŸŸå˜é‡å’Œå…¨å±€ä½œç”¨åŸŸå˜é‡ï¼Œç”šè‡³å¯ä»¥æ³¨å…¥é¢„å®šä¹‰å‡½æ•°ï¼ŒæŸç§ç¨‹åº¦ä¸Šè®²ï¼Œæˆ‘è®¤ä¸ºè¿™å·²ç»å›¾çµå®Œå¤‡äº†ã€‚æ„Ÿè§‰å°±åƒæ˜¯ç©æ¸¸æˆç»ˆäºé€šè¿‡äº†æŸä¸€å…³ Exciting!</p><h2 id="ç›®å‰æ”¯æŒçš„è¯­æ³•" tabindex="-1"><a class="header-anchor" href="#ç›®å‰æ”¯æŒçš„è¯­æ³•"><span>ç›®å‰æ”¯æŒçš„è¯­æ³•</span></a></h2><ul><li>è¯­å¥ï¼š <ul><li>ç©ºè¯­å¥ <code>;</code></li><li>å—è¯­å¥ <code>{}</code></li><li>ifè¯­å¥ <code>if(){}else{}</code></li><li>whereè¯­å¥ <code>where(){}</code></li><li>æ ‡è¯†ç¬¦å®šä¹‰è¯­å¥ <ul><li>å˜é‡å®šä¹‰ <code>def a=1,b=2,c;</code></li><li>å‡½æ•°å®šä¹‰ <code>def main(def a){};</code></li></ul></li></ul></li><li>è¡¨è¾¾å¼ï¼š <ul><li>é€—å·è¡¨è¾¾å¼ <code>,</code></li><li>èµ‹å€¼è¡¨è¾¾å¼ï¼š <ul><li>åŸºæœ¬èµ‹å€¼è¡¨è¾¾å¼ <code>=</code></li><li>å¤åˆèµ‹å€¼è¡¨è¾¾å¼ <code>+= -= *= /=</code></li></ul></li><li>é€»è¾‘æˆ–è¡¨è¾¾å¼ <code>||</code></li><li>é€»è¾‘ä¸è¡¨è¾¾è¯• <code>&amp;&amp;</code></li><li>ç­‰å€¼åˆ¤æ–­è¡¨è¾¾å¼ <code>== !=</code></li><li>æ¡ä»¶è¡¨è¾¾å¼ <code>&lt; &gt; &lt;= &gt;=</code></li><li>åŠ å‡è¿ç®—è¡¨è¾¾å¼ <code>+ -</code></li><li>ä¹˜é™¤å–ä½™è¿ç®—è¡¨è¾¾å¼ <code>* / %</code></li><li>æ‹¬å·è¡¨è¾¾å¼: <code>(è¡¨è¾¾å¼)</code></li><li>æ ‡è¯†ç¬¦è¡¨è¾¾å¼ <code>a</code></li><li>å‡½æ•°è°ƒç”¨è¡¨è¾¾å¼ <code>main(1,2,3);</code></li></ul></li></ul><h2 id="å®ç°æ•ˆæœ" tabindex="-1"><a class="header-anchor" href="#å®ç°æ•ˆæœ"><span>å®ç°æ•ˆæœ</span></a></h2><h3 id="è§£é‡Šå™¨æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#è§£é‡Šå™¨æµ‹è¯•"><span>è§£é‡Šå™¨æµ‹è¯•</span></a></h3><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-251-0" aria-selected="true">è§£é‡Šå™¨ä»£ç :<code>test/index.ts</code></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-251-1" aria-selected="false">è¾“å‡ºç»“æœ:<code>output.txt</code></button></div><!--[--><div class="vp-code-tab active" id="codetab-251-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">è§£é‡Šå™¨ä»£ç :<code>test/index.ts</code></div><!--[--><div class="language-ts line-numbers-mode" data-highlighter="shiki" data-ext="ts" data-title="ts" style="--shiki-light:#e1e4e8;--shiki-dark:#E6E6E6;--shiki-light-bg:#24292e;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-dark slack-dark vp-code"><code><span class="line"><span>import { Interpreater } from &#39;../Interpreater&#39;;</span></span>
<span class="line"><span>import { Parser } from &#39;../Parser&#39;;</span></span>
<span class="line"><span>import { Tokenizer } from &#39;../Tokenizer&#39;;</span></span>
<span class="line"><span>import { regFuncs } from &#39;../functions&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>function testForInterpreater(code: string) {</span></span>
<span class="line"><span>  let tokenizer = new Tokenizer();</span></span>
<span class="line"><span>  let parser = new Parser();</span></span>
<span class="line"><span>  let interpreater = new Interpreater();</span></span>
<span class="line"><span>  regFuncs(interpreater);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  let tokens = tokenizer.getTokens(code);</span></span>
<span class="line"><span>  let ast = parser.parse(tokens);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  console.log(&#39;æºä»£ç :&#39;);</span></span>
<span class="line"><span>  console.log(code);</span></span>
<span class="line"><span>  console.log(&#39;è§£é‡Šå™¨æ‰§è¡Œç»“æœ:&#39;);</span></span>
<span class="line"><span>  interpreater.exec(ast);</span></span>
<span class="line"><span>  console.log(&#39;æºä»£ç è¯æ³•åˆ†æç»“æœ:&#39;);</span></span>
<span class="line"><span>  console.log(tokens);</span></span>
<span class="line"><span>  console.log(&#39;æºä»£ç æ–‡æ³•åˆ†æç»“æœ:&#39;);</span></span>
<span class="line"><span>  console.dir(ast, { depth: null });</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>function main() {</span></span>
<span class="line"><span>  // æµ‹è¯•è§£é‡Šå™¨</span></span>
<span class="line"><span>  testForInterpreater(</span></span>
<span class="line"><span>    `</span></span>
<span class="line"><span>      def fbnq(def max){</span></span>
<span class="line"><span>        def a=1,b=1,c;</span></span>
<span class="line"><span>        while(a&lt;max){</span></span>
<span class="line"><span>          print(a);</span></span>
<span class="line"><span>          c = b;</span></span>
<span class="line"><span>          b = a + b;</span></span>
<span class="line"><span>          a = c;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>      };</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      def main(){</span></span>
<span class="line"><span>        fbnq(200); // è¾“å‡º200ä»¥å†…æ–æ³¢é‚£å¥‘æ•°åˆ—</span></span>
<span class="line"><span>      };</span></span>
<span class="line"><span>      main();</span></span>
<span class="line"><span>    `</span></span>
<span class="line"><span>  );</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>main();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-251-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">è¾“å‡ºç»“æœ:<code>output.txt</code></div><!--[--><div class="language-ts line-numbers-mode" data-highlighter="shiki" data-ext="ts" data-title="ts" style="--shiki-light:#e1e4e8;--shiki-dark:#E6E6E6;--shiki-light-bg:#24292e;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-dark slack-dark vp-code"><code><span class="line"><span>æºä»£ç :</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      def fbnq(def max){</span></span>
<span class="line"><span>        def a=1,b=1,c;</span></span>
<span class="line"><span>        while(a&lt;max){</span></span>
<span class="line"><span>          print(a);</span></span>
<span class="line"><span>          c = b;</span></span>
<span class="line"><span>          b = a + b;</span></span>
<span class="line"><span>          a = c;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>      };</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      def main(){</span></span>
<span class="line"><span>        fbnq(200); // è¾“å‡º200ä»¥å†…æ–æ³¢é‚£å¥‘æ•°åˆ—</span></span>
<span class="line"><span>      };</span></span>
<span class="line"><span>      main();</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>è§£é‡Šå™¨æ‰§è¡Œç»“æœ:</span></span>
<span class="line"><span>1</span></span>
<span class="line"><span>1</span></span>
<span class="line"><span>2</span></span>
<span class="line"><span>3</span></span>
<span class="line"><span>5</span></span>
<span class="line"><span>8</span></span>
<span class="line"><span>13</span></span>
<span class="line"><span>21</span></span>
<span class="line"><span>34</span></span>
<span class="line"><span>55</span></span>
<span class="line"><span>89</span></span>
<span class="line"><span>144</span></span>
<span class="line"><span>æºä»£ç è¯æ³•åˆ†æç»“æœ:</span></span>
<span class="line"><span>[</span></span>
<span class="line"><span>  { type: &#39;def&#39;, value: &#39;def&#39; },</span></span>
<span class="line"><span>  { type: &#39;Identifier&#39;, value: &#39;fbnq&#39; },</span></span>
<span class="line"><span>  { type: &#39;(&#39;, value: &#39;(&#39; },</span></span>
<span class="line"><span>  { type: &#39;def&#39;, value: &#39;def&#39; },</span></span>
<span class="line"><span>  { type: &#39;Identifier&#39;, value: &#39;max&#39; },</span></span>
<span class="line"><span>  { type: &#39;)&#39;, value: &#39;)&#39; },</span></span>
<span class="line"><span>  { type: &#39;{&#39;, value: &#39;{&#39; },</span></span>
<span class="line"><span>  { type: &#39;def&#39;, value: &#39;def&#39; },</span></span>
<span class="line"><span>  { type: &#39;Identifier&#39;, value: &#39;a&#39; },</span></span>
<span class="line"><span>  { type: &#39;AssignOpSimple&#39;, value: &#39;=&#39; },</span></span>
<span class="line"><span>  { type: &#39;Number&#39;, value: &#39;1&#39; },</span></span>
<span class="line"><span>  { type: &#39;,&#39;, value: &#39;,&#39; },</span></span>
<span class="line"><span>  { type: &#39;Identifier&#39;, value: &#39;b&#39; },</span></span>
<span class="line"><span>  { type: &#39;AssignOpSimple&#39;, value: &#39;=&#39; },</span></span>
<span class="line"><span>  { type: &#39;Number&#39;, value: &#39;1&#39; },</span></span>
<span class="line"><span>  { type: &#39;,&#39;, value: &#39;,&#39; },</span></span>
<span class="line"><span>  { type: &#39;Identifier&#39;, value: &#39;c&#39; },</span></span>
<span class="line"><span>  { type: &#39;;&#39;, value: &#39;;&#39; },</span></span>
<span class="line"><span>  { type: &#39;while&#39;, value: &#39;while&#39; },</span></span>
<span class="line"><span>  { type: &#39;(&#39;, value: &#39;(&#39; },</span></span>
<span class="line"><span>  { type: &#39;Identifier&#39;, value: &#39;a&#39; },</span></span>
<span class="line"><span>  { type: &#39;EqualityOp&#39;, value: &#39;&lt;&#39; },</span></span>
<span class="line"><span>  { type: &#39;Identifier&#39;, value: &#39;max&#39; },</span></span>
<span class="line"><span>  { type: &#39;)&#39;, value: &#39;)&#39; },</span></span>
<span class="line"><span>  { type: &#39;{&#39;, value: &#39;{&#39; },</span></span>
<span class="line"><span>  { type: &#39;Identifier&#39;, value: &#39;print&#39; },</span></span>
<span class="line"><span>  { type: &#39;(&#39;, value: &#39;(&#39; },</span></span>
<span class="line"><span>  { type: &#39;Identifier&#39;, value: &#39;a&#39; },</span></span>
<span class="line"><span>  { type: &#39;)&#39;, value: &#39;)&#39; },</span></span>
<span class="line"><span>  { type: &#39;;&#39;, value: &#39;;&#39; },</span></span>
<span class="line"><span>  { type: &#39;Identifier&#39;, value: &#39;c&#39; },</span></span>
<span class="line"><span>  { type: &#39;AssignOpSimple&#39;, value: &#39;=&#39; },</span></span>
<span class="line"><span>  { type: &#39;Identifier&#39;, value: &#39;b&#39; },</span></span>
<span class="line"><span>  { type: &#39;;&#39;, value: &#39;;&#39; },</span></span>
<span class="line"><span>  { type: &#39;Identifier&#39;, value: &#39;b&#39; },</span></span>
<span class="line"><span>  { type: &#39;AssignOpSimple&#39;, value: &#39;=&#39; },</span></span>
<span class="line"><span>  { type: &#39;Identifier&#39;, value: &#39;a&#39; },</span></span>
<span class="line"><span>  { type: &#39;AddOp&#39;, value: &#39;+&#39; },</span></span>
<span class="line"><span>  { type: &#39;Identifier&#39;, value: &#39;b&#39; },</span></span>
<span class="line"><span>  { type: &#39;;&#39;, value: &#39;;&#39; },</span></span>
<span class="line"><span>  { type: &#39;Identifier&#39;, value: &#39;a&#39; },</span></span>
<span class="line"><span>  { type: &#39;AssignOpSimple&#39;, value: &#39;=&#39; },</span></span>
<span class="line"><span>  { type: &#39;Identifier&#39;, value: &#39;c&#39; },</span></span>
<span class="line"><span>  { type: &#39;;&#39;, value: &#39;;&#39; },</span></span>
<span class="line"><span>  { type: &#39;}&#39;, value: &#39;}&#39; },</span></span>
<span class="line"><span>  { type: &#39;}&#39;, value: &#39;}&#39; },</span></span>
<span class="line"><span>  { type: &#39;;&#39;, value: &#39;;&#39; },</span></span>
<span class="line"><span>  { type: &#39;def&#39;, value: &#39;def&#39; },</span></span>
<span class="line"><span>  { type: &#39;Identifier&#39;, value: &#39;main&#39; },</span></span>
<span class="line"><span>  { type: &#39;(&#39;, value: &#39;(&#39; },</span></span>
<span class="line"><span>  { type: &#39;)&#39;, value: &#39;)&#39; },</span></span>
<span class="line"><span>  { type: &#39;{&#39;, value: &#39;{&#39; },</span></span>
<span class="line"><span>  { type: &#39;Identifier&#39;, value: &#39;fbnq&#39; },</span></span>
<span class="line"><span>  { type: &#39;(&#39;, value: &#39;(&#39; },</span></span>
<span class="line"><span>  { type: &#39;Number&#39;, value: &#39;200&#39; },</span></span>
<span class="line"><span>  { type: &#39;)&#39;, value: &#39;)&#39; },</span></span>
<span class="line"><span>  { type: &#39;;&#39;, value: &#39;;&#39; },</span></span>
<span class="line"><span>  { type: &#39;}&#39;, value: &#39;}&#39; },</span></span>
<span class="line"><span>  { type: &#39;;&#39;, value: &#39;;&#39; },</span></span>
<span class="line"><span>  { type: &#39;Identifier&#39;, value: &#39;main&#39; },</span></span>
<span class="line"><span>  { type: &#39;(&#39;, value: &#39;(&#39; },</span></span>
<span class="line"><span>  { type: &#39;)&#39;, value: &#39;)&#39; },</span></span>
<span class="line"><span>  { type: &#39;;&#39;, value: &#39;;&#39; }</span></span>
<span class="line"><span>]</span></span>
<span class="line"><span>æºä»£ç æ–‡æ³•åˆ†æç»“æœ:</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  type: &#39;Program&#39;,</span></span>
<span class="line"><span>  statements: [</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>      type: &#39;IdentifierDeclarationsStatement&#39;,</span></span>
<span class="line"><span>      declarations: [</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          type: &#39;FunctionDeclaration&#39;,</span></span>
<span class="line"><span>          name: &#39;fbnq&#39;,</span></span>
<span class="line"><span>          FormedArguments: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              type: &#39;VariableDeclaration&#39;,</span></span>
<span class="line"><span>              name: &#39;max&#39;,</span></span>
<span class="line"><span>              value: undefined</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ],</span></span>
<span class="line"><span>          statements: {</span></span>
<span class="line"><span>            type: &#39;BlockStatement&#39;,</span></span>
<span class="line"><span>            statements: [</span></span>
<span class="line"><span>              {</span></span>
<span class="line"><span>                type: &#39;IdentifierDeclarationsStatement&#39;,</span></span>
<span class="line"><span>                declarations: [</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    type: &#39;VariableDeclaration&#39;,</span></span>
<span class="line"><span>                    name: &#39;a&#39;,</span></span>
<span class="line"><span>                    value: { type: &#39;NumberLiteral&#39;, value: &#39;1&#39; }</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    type: &#39;VariableDeclaration&#39;,</span></span>
<span class="line"><span>                    name: &#39;b&#39;,</span></span>
<span class="line"><span>                    value: { type: &#39;NumberLiteral&#39;, value: &#39;1&#39; }</span></span>
<span class="line"><span>                  },</span></span>
<span class="line"><span>                  {</span></span>
<span class="line"><span>                    type: &#39;VariableDeclaration&#39;,</span></span>
<span class="line"><span>                    name: &#39;c&#39;,</span></span>
<span class="line"><span>                    value: undefined</span></span>
<span class="line"><span>                  }</span></span>
<span class="line"><span>                ]</span></span>
<span class="line"><span>              },</span></span>
<span class="line"><span>              {</span></span>
<span class="line"><span>                type: &#39;WhileStatement&#39;,</span></span>
<span class="line"><span>                condition: {</span></span>
<span class="line"><span>                  type: &#39;BineryExpression&#39;,</span></span>
<span class="line"><span>                  operator: &#39;&lt;&#39;,</span></span>
<span class="line"><span>                  left: { type: &#39;Identifier&#39;, name: &#39;a&#39; },</span></span>
<span class="line"><span>                  right: { type: &#39;Identifier&#39;, name: &#39;max&#39; }</span></span>
<span class="line"><span>                },</span></span>
<span class="line"><span>                statement: {</span></span>
<span class="line"><span>                  type: &#39;BlockStatement&#39;,</span></span>
<span class="line"><span>                  statements: [</span></span>
<span class="line"><span>                    {</span></span>
<span class="line"><span>                      type: &#39;ExpressionStatement&#39;,</span></span>
<span class="line"><span>                      expression: {</span></span>
<span class="line"><span>                        type: &#39;FunctionCall&#39;,</span></span>
<span class="line"><span>                        calee: { type: &#39;Identifier&#39;, name: &#39;print&#39; },</span></span>
<span class="line"><span>                        args: [ { type: &#39;Identifier&#39;, name: &#39;a&#39; } ]</span></span>
<span class="line"><span>                      }</span></span>
<span class="line"><span>                    },</span></span>
<span class="line"><span>                    {</span></span>
<span class="line"><span>                      type: &#39;ExpressionStatement&#39;,</span></span>
<span class="line"><span>                      expression: {</span></span>
<span class="line"><span>                        type: &#39;AssignExpression&#39;,</span></span>
<span class="line"><span>                        operator: &#39;=&#39;,</span></span>
<span class="line"><span>                        left: { type: &#39;Identifier&#39;, name: &#39;c&#39; },</span></span>
<span class="line"><span>                        right: { type: &#39;Identifier&#39;, name: &#39;b&#39; }</span></span>
<span class="line"><span>                      }</span></span>
<span class="line"><span>                    },</span></span>
<span class="line"><span>                    {</span></span>
<span class="line"><span>                      type: &#39;ExpressionStatement&#39;,</span></span>
<span class="line"><span>                      expression: {</span></span>
<span class="line"><span>                        type: &#39;AssignExpression&#39;,</span></span>
<span class="line"><span>                        operator: &#39;=&#39;,</span></span>
<span class="line"><span>                        left: { type: &#39;Identifier&#39;, name: &#39;b&#39; },</span></span>
<span class="line"><span>                        right: {</span></span>
<span class="line"><span>                          type: &#39;BineryExpression&#39;,</span></span>
<span class="line"><span>                          operator: &#39;+&#39;,</span></span>
<span class="line"><span>                          left: { type: &#39;Identifier&#39;, name: &#39;a&#39; },</span></span>
<span class="line"><span>                          right: { type: &#39;Identifier&#39;, name: &#39;b&#39; }</span></span>
<span class="line"><span>                        }</span></span>
<span class="line"><span>                      }</span></span>
<span class="line"><span>                    },</span></span>
<span class="line"><span>                    {</span></span>
<span class="line"><span>                      type: &#39;ExpressionStatement&#39;,</span></span>
<span class="line"><span>                      expression: {</span></span>
<span class="line"><span>                        type: &#39;AssignExpression&#39;,</span></span>
<span class="line"><span>                        operator: &#39;=&#39;,</span></span>
<span class="line"><span>                        left: { type: &#39;Identifier&#39;, name: &#39;a&#39; },</span></span>
<span class="line"><span>                        right: { type: &#39;Identifier&#39;, name: &#39;c&#39; }</span></span>
<span class="line"><span>                      }</span></span>
<span class="line"><span>                    }</span></span>
<span class="line"><span>                  ]</span></span>
<span class="line"><span>                }</span></span>
<span class="line"><span>              }</span></span>
<span class="line"><span>            ]</span></span>
<span class="line"><span>          }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>      ]</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>      type: &#39;IdentifierDeclarationsStatement&#39;,</span></span>
<span class="line"><span>      declarations: [</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          type: &#39;FunctionDeclaration&#39;,</span></span>
<span class="line"><span>          name: &#39;main&#39;,</span></span>
<span class="line"><span>          FormedArguments: [],</span></span>
<span class="line"><span>          statements: {</span></span>
<span class="line"><span>            type: &#39;BlockStatement&#39;,</span></span>
<span class="line"><span>            statements: [</span></span>
<span class="line"><span>              {</span></span>
<span class="line"><span>                type: &#39;ExpressionStatement&#39;,</span></span>
<span class="line"><span>                expression: {</span></span>
<span class="line"><span>                  type: &#39;FunctionCall&#39;,</span></span>
<span class="line"><span>                  calee: { type: &#39;Identifier&#39;, name: &#39;fbnq&#39; },</span></span>
<span class="line"><span>                  args: [ { type: &#39;NumberLiteral&#39;, value: &#39;200&#39; } ]</span></span>
<span class="line"><span>                }</span></span>
<span class="line"><span>              }</span></span>
<span class="line"><span>            ]</span></span>
<span class="line"><span>          }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>      ]</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>      type: &#39;ExpressionStatement&#39;,</span></span>
<span class="line"><span>      expression: {</span></span>
<span class="line"><span>        type: &#39;FunctionCall&#39;,</span></span>
<span class="line"><span>        calee: { type: &#39;Identifier&#39;, name: &#39;main&#39; },</span></span>
<span class="line"><span>        args: []</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  ]</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h2 id="è¯æ³•åˆ†æçš„å®ç°" tabindex="-1"><a class="header-anchor" href="#è¯æ³•åˆ†æçš„å®ç°"><span>è¯æ³•åˆ†æçš„å®ç°</span></a></h2><p><code>Tokenizer.ts</code></p><div class="language-ts line-numbers-mode" data-highlighter="shiki" data-ext="ts" data-title="ts" style="--shiki-light:#e1e4e8;--shiki-dark:#E6E6E6;--shiki-light-bg:#24292e;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-dark slack-dark vp-code"><code><span class="line"><span>export type TokenType =</span></span>
<span class="line"><span>  | &#39;Space&#39; //ç©ºç™½ç¬¦</span></span>
<span class="line"><span>  | &#39;Comment&#39; // æ³¨é‡Š</span></span>
<span class="line"><span>  | &#39;;&#39; // åˆ†å·</span></span>
<span class="line"><span>  | &#39;if&#39; // ifè¯­å¥</span></span>
<span class="line"><span>  | &#39;else&#39; // elseè¯­å¥</span></span>
<span class="line"><span>  | &#39;while&#39;</span></span>
<span class="line"><span>  | &#39;do&#39;</span></span>
<span class="line"><span>  | &#39;def&#39; // å£°æ˜</span></span>
<span class="line"><span>  | &#39;AssignOpSimple&#39; // ç®€å•èµ‹å€¼æ“ä½œç¬¦</span></span>
<span class="line"><span>  | &#39;AssignOpComplex&#39; // å¤æ‚èµ‹å€¼æ“ä½œç¬¦</span></span>
<span class="line"><span>  | &#39;TernaryOp?&#39; // ä¸‰ç›®è¿ç®—ç¬¦</span></span>
<span class="line"><span>  | &#39;TernaryOp:&#39; // ä¸‰ç›®è¿ç®—ç¬¦</span></span>
<span class="line"><span>  | &#39;LogicalOr&#39; // é€»è¾‘æˆ–è¿ç®—ç¬¦</span></span>
<span class="line"><span>  | &#39;LogicalAnd&#39; // é€»è¾‘ä¸è¿ç®—ç¬¦</span></span>
<span class="line"><span>  | &#39;EqualityOp&#39; // ç­‰å€¼è¿ç®—ç¬¦</span></span>
<span class="line"><span>  | &#39;RelationalOp&#39; // å…³ç³»è¿ç®—ç¬¦</span></span>
<span class="line"><span>  | &#39;AddOp&#39; // ç®—æ•°åŠ å‡è¿ç®—ç¬¦</span></span>
<span class="line"><span>  | &#39;MutOp&#39; // ç®—æ•°ä¹˜é™¤å–ä½™è¿ç®—ç¬¦</span></span>
<span class="line"><span>  | &#39;Number&#39; // å­—é¢é‡</span></span>
<span class="line"><span>  | &#39;Boolean&#39; // å­—é¢é‡</span></span>
<span class="line"><span>  | &#39;String&#39; // å­—é¢é‡</span></span>
<span class="line"><span>  | &#39;null&#39; // å­—é¢é‡</span></span>
<span class="line"><span>  | &#39;(&#39;</span></span>
<span class="line"><span>  | &#39;)&#39;</span></span>
<span class="line"><span>  | &#39;[&#39;</span></span>
<span class="line"><span>  | &#39;]&#39;</span></span>
<span class="line"><span>  | &#39;{&#39;</span></span>
<span class="line"><span>  | &#39;}&#39;</span></span>
<span class="line"><span>  | &#39;.&#39;</span></span>
<span class="line"><span>  | &#39;,&#39;</span></span>
<span class="line"><span>  | &#39;this&#39;</span></span>
<span class="line"><span>  | &#39;super&#39;</span></span>
<span class="line"><span>  | &#39;Identifier&#39;;</span></span>
<span class="line"><span>export type TokenDef = [TokenType, RegExp];</span></span>
<span class="line"><span>export type Token = { type: TokenType; value: string };</span></span>
<span class="line"><span>export const TokenDefs: Array&lt;TokenDef&gt; = [</span></span>
<span class="line"><span>  [&#39;Space&#39;, /^\s+/],</span></span>
<span class="line"><span>  [&#39;Comment&#39;, /^\/\/[^\n]*/],</span></span>
<span class="line"><span>  [&#39;Comment&#39;, /^\/\*(\s|.)*?\*\//],</span></span>
<span class="line"><span>  [&#39;;&#39;, /^;/],</span></span>
<span class="line"><span>  [&#39;if&#39;, /^\bif\b/],</span></span>
<span class="line"><span>  [&#39;else&#39;, /^\belse\b/],</span></span>
<span class="line"><span>  [&#39;while&#39;, /^\bwhile\b/],</span></span>
<span class="line"><span>  [&#39;do&#39;, /^\bdo\b/],</span></span>
<span class="line"><span>  [&#39;def&#39;, /^\bdef\b/],</span></span>
<span class="line"><span>  [&#39;EqualityOp&#39;, /^[&gt;&lt;][=]?/],</span></span>
<span class="line"><span>  [&#39;RelationalOp&#39;, /^[=!]=/],</span></span>
<span class="line"><span>  [&#39;AssignOpSimple&#39;, /^=/],</span></span>
<span class="line"><span>  [&#39;AssignOpComplex&#39;, /^[\+\-\*\/\%]=/],</span></span>
<span class="line"><span>  [&#39;TernaryOp?&#39;, /^\?/],</span></span>
<span class="line"><span>  [&#39;TernaryOp:&#39;, /^[:]/],</span></span>
<span class="line"><span>  [&#39;LogicalOr&#39;, /^\|\|/],</span></span>
<span class="line"><span>  [&#39;LogicalAnd&#39;, /^&amp;&amp;/],</span></span>
<span class="line"><span>  [&#39;AddOp&#39;, /^[+-]/],</span></span>
<span class="line"><span>  [&#39;MutOp&#39;, /^[\*\/\%]/],</span></span>
<span class="line"><span>  [&#39;Number&#39;, /^\d+\.\d+/], // 0.123</span></span>
<span class="line"><span>  [&#39;Number&#39;, /^\d+/], // 123</span></span>
<span class="line"><span>  [&#39;Boolean&#39;, /^\btrue\b/],</span></span>
<span class="line"><span>  [&#39;Boolean&#39;, /^\bfalse\b/],</span></span>
<span class="line"><span>  [&#39;null&#39;, /^\bnull\b/],</span></span>
<span class="line"><span>  [&#39;String&#39;, /^\&#39;[^\&#39;]*\&#39;/],</span></span>
<span class="line"><span>  [&#39;String&#39;, /^\&quot;[^\&quot;]*\&quot;/],</span></span>
<span class="line"><span>  [&#39;(&#39;, /^\(/],</span></span>
<span class="line"><span>  [&#39;)&#39;, /^\)/],</span></span>
<span class="line"><span>  [&#39;[&#39;, /^\[/],</span></span>
<span class="line"><span>  [&#39;]&#39;, /^\]/],</span></span>
<span class="line"><span>  [&#39;{&#39;, /^\{/],</span></span>
<span class="line"><span>  [&#39;}&#39;, /^\}/],</span></span>
<span class="line"><span>  [&#39;.&#39;, /^\./],</span></span>
<span class="line"><span>  [&#39;,&#39;, /^\,/],</span></span>
<span class="line"><span>  [&#39;this&#39;, /^\bthis\b/],</span></span>
<span class="line"><span>  [&#39;super&#39;, /^\bsuper\b/],</span></span>
<span class="line"><span>  [&#39;Identifier&#39;, /^\w+/],</span></span>
<span class="line"><span>];</span></span>
<span class="line"><span>export class Tokenizer {</span></span>
<span class="line"><span>  idx!: number;</span></span>
<span class="line"><span>  code!: string;</span></span>
<span class="line"><span>  tokens!: Array&lt;Token&gt;;</span></span>
<span class="line"><span>  init(code: string) {</span></span>
<span class="line"><span>    this.idx = 0;</span></span>
<span class="line"><span>    this.code = code;</span></span>
<span class="line"><span>    this.tokens = [];</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  getTokens(code: string) {</span></span>
<span class="line"><span>    this.init(code);</span></span>
<span class="line"><span>    while (this.hasMore()) {</span></span>
<span class="line"><span>      let token = this.getNextToken();</span></span>
<span class="line"><span>      if (token.type == &#39;Space&#39;) continue;</span></span>
<span class="line"><span>      if (token.type == &#39;Comment&#39;) continue;</span></span>
<span class="line"><span>      this.tokens.push(token);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    return this.tokens;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  private hasMore() {</span></span>
<span class="line"><span>    return this.idx &lt; this.code.length;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  private getNextToken(): Token {</span></span>
<span class="line"><span>    if (!this.hasMore()) throw new SyntaxError(&#39;no more token.&#39;);</span></span>
<span class="line"><span>    const rest = this.code.slice(this.idx);</span></span>
<span class="line"><span>    for (const [tokenType, reg] of TokenDefs) {</span></span>
<span class="line"><span>      let tokenValue = this.match(reg, rest);</span></span>
<span class="line"><span>      if (tokenValue == null) continue;</span></span>
<span class="line"><span>      else return { type: tokenType, value: tokenValue };</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    throw new SyntaxError(`unknow token: ${rest[0]}`);</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  private match(reg: RegExp, str: string) {</span></span>
<span class="line"><span>    let matchs = reg.exec(str);</span></span>
<span class="line"><span>    if (matchs == null) return null; // æ²¡æœ‰åŒ¹é…åˆ°</span></span>
<span class="line"><span>    let matched = matchs[0]; // åŒ¹é…åˆ°äº†</span></span>
<span class="line"><span>    this.idx += matched.length; // ç§»åŠ¨æŒ‡é’ˆ</span></span>
<span class="line"><span>    return matched;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ–‡æ³•å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#æ–‡æ³•å®šä¹‰"><span>æ–‡æ³•å®šä¹‰</span></a></h2><p><code>ast.ts</code></p><div class="language-ts line-numbers-mode" data-highlighter="shiki" data-ext="ts" data-title="ts" style="--shiki-light:#e1e4e8;--shiki-dark:#E6E6E6;--shiki-light-bg:#24292e;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-dark slack-dark vp-code"><code><span class="line"><span>import { TokenType } from &#39;./Tokenizer&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * Program</span></span>
<span class="line"><span> * : Statements</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export interface Program extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;Program&#39;;</span></span>
<span class="line"><span>  statements: Statements;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * Statements</span></span>
<span class="line"><span> * : Statement</span></span>
<span class="line"><span> * | Statements Statement</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type Statements = Array&lt;Statement&gt;;</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * è¯­å¥</span></span>
<span class="line"><span> * Statement</span></span>
<span class="line"><span> * : EmptyStatement</span></span>
<span class="line"><span> * | IdentifierDeclarationsStatement</span></span>
<span class="line"><span> * | ExpressionStatement</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type Statement =</span></span>
<span class="line"><span>  | EmptyStatement</span></span>
<span class="line"><span>  | BlockStatement</span></span>
<span class="line"><span>  | IfStatement</span></span>
<span class="line"><span>  | WhileStatement</span></span>
<span class="line"><span>  | IdentifierDeclarationsStatement</span></span>
<span class="line"><span>  | ExpressionStatement;</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * ç©ºè¯­å¥</span></span>
<span class="line"><span> * EmptyStatement</span></span>
<span class="line"><span> * : &#39;;&#39;</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export interface EmptyStatement extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;EmptyStatement&#39;;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * ä»£ç å—</span></span>
<span class="line"><span> * BlockStatement</span></span>
<span class="line"><span> * | &#39;{&#39; Statements &#39;}&#39;</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export interface BlockStatement extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;BlockStatement&#39;;</span></span>
<span class="line"><span>  statements: Statements;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * ifè¯­å¥ï¼š</span></span>
<span class="line"><span> * IfStatement</span></span>
<span class="line"><span> * : if(Expression) [ç©ºè¯­å¥,å—è¯­å¥]</span></span>
<span class="line"><span> * | IfStatement [&#39;else&#39; [ç©ºè¯­å¥,å—è¯­å¥,ifè¯­å¥]]*</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> *</span></span>
<span class="line"><span> * ç®€åŒ–</span></span>
<span class="line"><span> * ç”±äº `Statement:=ç©ºè¯­å¥|å—è¯­å¥|ifè¯­å¥|...;` æ‰€ä»¥å¯ä»¥ç›´æ¥ç®€åŒ–ï¼š</span></span>
<span class="line"><span> * IfStatement</span></span>
<span class="line"><span> * : if(Expression) Statement</span></span>
<span class="line"><span> * | IfStatement [else Statement]?</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export interface IfStatement extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;IfStatement&#39;;</span></span>
<span class="line"><span>  condition: Expression;</span></span>
<span class="line"><span>  case1: Statement;</span></span>
<span class="line"><span>  case2?: Statement;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * WhileStatement</span></span>
<span class="line"><span> * : while(è¡¨è¾¾å¼) ç©ºè¯­å¥|å•è¯­å¥|å—è¯­å¥|....</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> *</span></span>
<span class="line"><span> * ç®€åŒ–</span></span>
<span class="line"><span> * WhileStatement</span></span>
<span class="line"><span> * : while(è¡¨è¾¾å¼) è¯­å¥</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export interface WhileStatement extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;WhileStatement&#39;;</span></span>
<span class="line"><span>  condition: Expression;</span></span>
<span class="line"><span>  statement: Statement;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * æ ‡è¯†ç¬¦å£°æ˜è¯­å¥å¯ä»¥ç”¨æ¥å£°æ˜å¤šä¸ªå˜é‡æˆ–å‡½æ•°</span></span>
<span class="line"><span> *</span></span>
<span class="line"><span> * æ ‡è¯†ç¬¦å£°æ˜è¯­å¥</span></span>
<span class="line"><span> * | &#39;def&#39; [å˜é‡æˆ–å‡½æ•°å£°æ˜]+ &#39;;&#39;</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export interface IdentifierDeclarationsStatement extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;IdentifierDeclarationsStatement&#39;;</span></span>
<span class="line"><span>  declarations: Array&lt;VariableOrFunctionDeclaration&gt;;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * å˜é‡æˆ–å‡½æ•°å£°æ˜ï¼Œ</span></span>
<span class="line"><span> * å‡½æ•°å£°æ˜çš„å†™æ³•æ˜¯ ï¼šæ ‡è¯†ç¬¦ + [(]</span></span>
<span class="line"><span> * å˜é‡å£°æ˜çš„å†™æ³•æ˜¯ ï¼šæ ‡è¯†ç¬¦ + [= è¡¨è¾¾å¼]?</span></span>
<span class="line"><span> * åŒºåˆ«å°±åœ¨äºæœ‰æ²¡æœ‰æ‹¬å·</span></span>
<span class="line"><span> *</span></span>
<span class="line"><span> * å˜é‡æˆ–å‡½æ•°å£°æ˜:</span></span>
<span class="line"><span> * | å‡½æ•°å£°æ˜</span></span>
<span class="line"><span> * : å˜é‡å£°æ˜</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type VariableOrFunctionDeclaration =</span></span>
<span class="line"><span>  | VariableDeclaration</span></span>
<span class="line"><span>  | FunctionDeclaration;</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * å˜é‡å£°æ˜ç”±ä¸€ä¸ªæ ‡è¯†ç¬¦å’Œä¸€ä¸ªå¯é€‰çš„åˆå§‹åŒ–è¯­å¥ç»„æˆï¼Œåˆå§‹åŒ–è¯­å¥ç”±&#39;=&#39;ç¬¦å·å¼€å¤´ã€‚</span></span>
<span class="line"><span> *</span></span>
<span class="line"><span> * å˜é‡å£°æ˜</span></span>
<span class="line"><span> * : æ ‡è¯†ç¬¦ [&#39;=&#39; é€»è¾‘æˆ–è¡¨è¾¾å¼]?</span></span>
<span class="line"><span> * : æ ‡è¯†ç¬¦ å˜é‡å£°æ˜åˆå§‹åŒ–?</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export interface VariableDeclaration extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;VariableDeclaration&#39;;</span></span>
<span class="line"><span>  name: string;</span></span>
<span class="line"><span>  value?: VariableDeclarationInit;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * å˜é‡å£°æ˜åˆå§‹åŒ–</span></span>
<span class="line"><span> * : [&#39;=&#39; é€»è¾‘æˆ–è¡¨è¾¾å¼]?</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type VariableDeclarationInit = LogicalOrExpression | undefined;</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * å‡½æ•°å£°æ˜</span></span>
<span class="line"><span> * : æ ‡è¯†ç¬¦ å‡½æ•°å½¢å¼å‚æ•°åˆ—è¡¨ å—è¯­å¥ç»„æˆ</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> *</span></span>
<span class="line"><span> * FunctionDeclaration</span></span>
<span class="line"><span> * | Identifier FormedArguments  BlockStatement</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export interface FunctionDeclaration extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;FunctionDeclaration&#39;;</span></span>
<span class="line"><span>  name: string;</span></span>
<span class="line"><span>  FormedArguments: FormedArguments;</span></span>
<span class="line"><span>  statements: BlockStatement;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * å‡½æ•°å½¢å¼å‚æ•°åˆ—è¡¨</span></span>
<span class="line"><span> * : (   [    [def å˜é‡æˆ–å‡½æ•°å£°æ˜]    [,def å˜é‡æˆ–å‡½æ•°å£°æ˜]*    ]*    )</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> *</span></span>
<span class="line"><span> * FormedArguments</span></span>
<span class="line"><span> * : (   [    [def VariableOrFunctionDeclaration]    [,def VariableOrFunctionDeclaration]*    ]*    )</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type FormedArguments = Array&lt;VariableOrFunctionDeclaration&gt;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * è¡¨è¾¾å¼è¯­å¥</span></span>
<span class="line"><span> * ExpressionStatement</span></span>
<span class="line"><span> * : Expression &#39;;&#39;</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export interface ExpressionStatement extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;ExpressionStatement&#39;;</span></span>
<span class="line"><span>  expression: Expression;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * è¡¨è¾¾å¼</span></span>
<span class="line"><span> * Expression</span></span>
<span class="line"><span> * : CommaExpression</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type Expression = CommaExpression;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * é€—å·è¡¨è¾¾å¼</span></span>
<span class="line"><span> * CommaExpression</span></span>
<span class="line"><span> * | AssignExpression [CommaOp AssignExpression]*</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type CommaExpression = AssignExpression | _CommaExpression;</span></span>
<span class="line"><span>export interface _CommaExpression extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;CommaExpression&#39;;</span></span>
<span class="line"><span>  expressions: Array&lt;AssignExpression&gt;;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * èµ‹å€¼è¡¨è¾¾å¼</span></span>
<span class="line"><span> * AssignExpression</span></span>
<span class="line"><span> * : TernaryExpression</span></span>
<span class="line"><span> * | MumberAccessExpression [AssignOp AssignExpression]*</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type AssignExpression = TernaryExpression | _AssignExpression;</span></span>
<span class="line"><span>export interface _AssignExpression extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;AssignExpression&#39;;</span></span>
<span class="line"><span>  operator: string;</span></span>
<span class="line"><span>  left: MumberAccessExpression | Identifier;</span></span>
<span class="line"><span>  right: AssignExpression;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * ä¸‰ç›®è¡¨è¾¾å¼</span></span>
<span class="line"><span> * TernaryExpression</span></span>
<span class="line"><span> * : LogicalOrExpression [? TernaryExpression : TernaryExpression]</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type TernaryExpression = LogicalOrExpression | _TernaryExpression;</span></span>
<span class="line"><span>export interface _TernaryExpression extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;TernaryExpression&#39;;</span></span>
<span class="line"><span>  condition: LogicalOrExpression;</span></span>
<span class="line"><span>  case1: TernaryExpression;</span></span>
<span class="line"><span>  case2: TernaryExpression;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * åŒç›®è¿ç®—è¡¨è¾¾å¼</span></span>
<span class="line"><span> * BineryExpression&lt;Child,OpType&gt;</span></span>
<span class="line"><span> * | Child OpType Child</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export interface BineryExpression&lt;Child, OpType extends TokenType&gt;</span></span>
<span class="line"><span>  extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;BineryExpression&#39;;</span></span>
<span class="line"><span>  operatorType: Extract&lt;TokenType, OpType&gt;;</span></span>
<span class="line"><span>  operator: string;</span></span>
<span class="line"><span>  left: Child;</span></span>
<span class="line"><span>  right: Child;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * é€»è¾‘æˆ–è¡¨è¾¾å¼</span></span>
<span class="line"><span> * LogicalOrExpression</span></span>
<span class="line"><span> * : LogicalAndExpression [LogicalOr LogicalAndExpression]*</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type LogicalOrExpression =</span></span>
<span class="line"><span>  | LogicalAndExpression</span></span>
<span class="line"><span>  | BineryExpression&lt;LogicalAndExpression, &#39;LogicalOr&#39;&gt;;</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * é€»è¾‘æˆ–è¡¨è¾¾å¼</span></span>
<span class="line"><span> * LogicalAndExpression</span></span>
<span class="line"><span> * : EqualityExpression [LogicalAnd EqualityExpression]*</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type LogicalAndExpression =</span></span>
<span class="line"><span>  | EqualityExpression</span></span>
<span class="line"><span>  | BineryExpression&lt;EqualityExpression, &#39;LogicalAnd&#39;&gt;;</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * ç­‰å€¼è¡¨è¾¾å¼</span></span>
<span class="line"><span> * EqualityExpression</span></span>
<span class="line"><span> * : RelationalExpression [EqualityOp RelationalExpression]*</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type EqualityExpression =</span></span>
<span class="line"><span>  | RelationalExpression</span></span>
<span class="line"><span>  | BineryExpression&lt;RelationalExpression, &#39;EqualityOp&#39;&gt;;</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * å…³ç³»è¡¨è¾¾å¼</span></span>
<span class="line"><span> * EqualityExpression</span></span>
<span class="line"><span> * : AdditiveExpression [RelationalOp AdditiveExpression]*</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type RelationalExpression =</span></span>
<span class="line"><span>  | AdditiveExpression</span></span>
<span class="line"><span>  | BineryExpression&lt;AdditiveExpression, &#39;RelationalOp&#39;&gt;;</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * åŠ å‡è¡¨è¾¾å¼</span></span>
<span class="line"><span> * AdditiveExpression</span></span>
<span class="line"><span> * : MultiplicativeExpression</span></span>
<span class="line"><span> * | AdditiveExpression AddOp MultiplicativeExpression</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type AdditiveExpression =</span></span>
<span class="line"><span>  | MultiplicativeExpression</span></span>
<span class="line"><span>  | BineryExpression&lt;MultiplicativeExpression, &#39;AddOp&#39;&gt;;</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * ä¹˜é™¤å–ä½™è¡¨è¾¾å¼</span></span>
<span class="line"><span> * MultiplicativeExpression</span></span>
<span class="line"><span> * : PrimaryExpression</span></span>
<span class="line"><span> * | PrimaryExpression MutOp PrimaryExpression</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type MultiplicativeExpression =</span></span>
<span class="line"><span>  | PrimaryExpression</span></span>
<span class="line"><span>  | BineryExpression&lt;PrimaryExpression, &#39;MutOp&#39;&gt;;</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * æˆå‘˜å±æ€§è®¿é—®è¡¨è¾¾å¼å’Œå‡½æ•°è°ƒç”¨éƒ½ä»¥æ ‡è¯†ç¬¦å¼€å¤´ï¼Œè¿™æ˜¯å­—é¢é‡æ‰€æ²¡æœ‰çš„ç‰¹å¾</span></span>
<span class="line"><span> * æ‰€ä»¥åœ¨ä¸»è¡¨è¾¾å¼ä¸­å¯ä»¥æ ¹æ®è¯¥ç‰¹å¾æ¥åšåŒºåˆ†</span></span>
<span class="line"><span> *</span></span>
<span class="line"><span> * PrimaryExpression</span></span>
<span class="line"><span> * : MumberAccessExpressionOrFunctionCallExpression</span></span>
<span class="line"><span> * | BracketedExpression</span></span>
<span class="line"><span> * | Literal</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type PrimaryExpression =</span></span>
<span class="line"><span>  | MumberAccessExpressionOrFunctionCallExpression</span></span>
<span class="line"><span>  | BracketedExpression</span></span>
<span class="line"><span>  | Literal;</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * æˆå‘˜å±æ€§è®¿é—®è¡¨è¾¾å¼å’Œå‡½æ•°è°ƒç”¨çš„åŒºåˆ†å°±åœ¨äºåç»­æœ‰æ²¡æœ‰æ‹¬å·</span></span>
<span class="line"><span> * æ‰€ä»¥å¯ä»¥å…ˆå‡è®¾è¿™é‡Œæ˜¯ä¸€ä¸ªæˆå‘˜å±æ€§è®¿é—®è¡¨è¾¾å¼ï¼Œå¦‚æœåé¢æ¥ç€ä¸€ä¸ªæ‹¬å·ï¼Œåˆ™å‡è®¾é”™è¯¯ï¼Œè¯´æ˜è¿™é‡Œæ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨</span></span>
<span class="line"><span> *</span></span>
<span class="line"><span> * MumberAccessExpressionOrFunctionCallExpression</span></span>
<span class="line"><span> * : MumberAccessExpression</span></span>
<span class="line"><span> * | FunctionCall</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type MumberAccessExpressionOrFunctionCallExpression =</span></span>
<span class="line"><span>  | MumberAccessExpression</span></span>
<span class="line"><span>  | FunctionCall;</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * æˆå‘˜å±æ€§è®¿é—®è¡¨è¾¾å¼</span></span>
<span class="line"><span> * æŠŠthis,super,æ ‡è¯†ç¬¦,éƒ½å½’åˆ°è¿™ç±»ï¼Œå› ä¸ºä»–ä»¬éƒ½æœ‰ç›¸åŒçš„ç‰¹å¾</span></span>
<span class="line"><span> *</span></span>
<span class="line"><span> * MumberAccessExpression</span></span>
<span class="line"><span> * : This</span></span>
<span class="line"><span> * | Super</span></span>
<span class="line"><span> * | Identifier</span></span>
<span class="line"><span> * | MumberAccessExpression &#39;.&#39; Identifier</span></span>
<span class="line"><span> * | MumberAccessExpression &#39;[&#39; Expression &#39;]&#39;</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type MumberAccessExpression =</span></span>
<span class="line"><span>  | This</span></span>
<span class="line"><span>  | Super</span></span>
<span class="line"><span>  | Identifier</span></span>
<span class="line"><span>  | _MumberAccessExpression;</span></span>
<span class="line"><span>export interface _MumberAccessExpression extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;MumberAccessExpression&#39;;</span></span>
<span class="line"><span>  object: MumberAccessExpression;</span></span>
<span class="line"><span>  property: Identifier | Expression;</span></span>
<span class="line"><span>  isIndex: boolean;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * FunctionCall</span></span>
<span class="line"><span> * : Calee Arguments</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export interface FunctionCall extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;FunctionCall&#39;;</span></span>
<span class="line"><span>  calee: Calee;</span></span>
<span class="line"><span>  args: Arguments;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * Calee</span></span>
<span class="line"><span> * : MumberAccessExpression</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type Calee = MumberAccessExpression;</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * Arguments</span></span>
<span class="line"><span> * : &#39;(&#39; AssignExpression &#39;)&#39;</span></span>
<span class="line"><span> * | &#39;(&#39; &#39;)&#39;</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type Arguments = Array&lt;AssignExpression&gt;;</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * This</span></span>
<span class="line"><span> * : &#39;this&#39;</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export interface This extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;this&#39;;</span></span>
<span class="line"><span>  name: string;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * Super</span></span>
<span class="line"><span> * : &#39;super&#39;</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export interface Super extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;super&#39;;</span></span>
<span class="line"><span>  name: string;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * Identifier</span></span>
<span class="line"><span> * : [\w]+</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export interface Identifier extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;Identifier&#39;;</span></span>
<span class="line"><span>  name: string;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * æ‹¬å·è¡¨è¾¾å¼</span></span>
<span class="line"><span> * BracketedExpression</span></span>
<span class="line"><span> * : &#39;(&#39; Expression &#39;)&#39;</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> * è¿™é‡ŒåŸæœ¬å¯ä»¥ç›´æ¥å†™ BracketedExpression = Expression; ä½†æ˜¯è¿™ä¼šå¯¼è‡´ç±»å‹å¾ªç¯å®šä¹‰ã€‚</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export interface BracketedExpression extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;BracketedExpression&#39;;</span></span>
<span class="line"><span>  expression: Expression;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span> * Literal</span></span>
<span class="line"><span> * : NumberLiteral</span></span>
<span class="line"><span> * | BooleanLiteral</span></span>
<span class="line"><span> * | StringLiteral</span></span>
<span class="line"><span> * | NullLiteral</span></span>
<span class="line"><span> * ;</span></span>
<span class="line"><span> */</span></span>
<span class="line"><span>export type Literal =</span></span>
<span class="line"><span>  | NumberLiteral</span></span>
<span class="line"><span>  | BooleanLiteral</span></span>
<span class="line"><span>  | StringLiteral</span></span>
<span class="line"><span>  | NullLiteral;</span></span>
<span class="line"><span>export interface NumberLiteral extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;NumberLiteral&#39;;</span></span>
<span class="line"><span>  value: string;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>export interface BooleanLiteral extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;BooleanLiteral&#39;;</span></span>
<span class="line"><span>  value: string;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>export interface StringLiteral extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;StringLiteral&#39;;</span></span>
<span class="line"><span>  value: string;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>export interface NullLiteral extends AST_BASE_NODE {</span></span>
<span class="line"><span>  type: &#39;NullLiteral&#39;;</span></span>
<span class="line"><span>  value: string;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export type AST_NODE_TYPE =</span></span>
<span class="line"><span>  | &#39;Program&#39;</span></span>
<span class="line"><span>  | &#39;Statement&#39;</span></span>
<span class="line"><span>  | &#39;EmptyStatement&#39;</span></span>
<span class="line"><span>  | &#39;BlockStatement&#39;</span></span>
<span class="line"><span>  | &#39;IfStatement&#39;</span></span>
<span class="line"><span>  | &#39;WhileStatement&#39;</span></span>
<span class="line"><span>  | &#39;IdentifierDeclarationsStatement&#39;</span></span>
<span class="line"><span>  | &#39;VariableDeclaration&#39;</span></span>
<span class="line"><span>  | &#39;FunctionDeclaration&#39;</span></span>
<span class="line"><span>  | &#39;ExpressionStatement&#39;</span></span>
<span class="line"><span>  | &#39;AssignExpression&#39;</span></span>
<span class="line"><span>  | &#39;CommaExpression&#39;</span></span>
<span class="line"><span>  | &#39;TernaryExpression&#39;</span></span>
<span class="line"><span>  | &#39;BineryExpression&#39;</span></span>
<span class="line"><span>  | &#39;MumberAccessExpression&#39;</span></span>
<span class="line"><span>  | &#39;this&#39;</span></span>
<span class="line"><span>  | &#39;super&#39;</span></span>
<span class="line"><span>  | &#39;Identifier&#39;</span></span>
<span class="line"><span>  | &#39;FunctionCall&#39;</span></span>
<span class="line"><span>  | &#39;NumberLiteral&#39;</span></span>
<span class="line"><span>  | &#39;BooleanLiteral&#39;</span></span>
<span class="line"><span>  | &#39;StringLiteral&#39;</span></span>
<span class="line"><span>  | &#39;NullLiteral&#39;</span></span>
<span class="line"><span>  | &#39;BracketedExpression&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export type AST_NODE =</span></span>
<span class="line"><span>  | Program</span></span>
<span class="line"><span>  | Statement</span></span>
<span class="line"><span>  | EmptyStatement</span></span>
<span class="line"><span>  | BlockStatement</span></span>
<span class="line"><span>  | IfStatement</span></span>
<span class="line"><span>  | WhileStatement</span></span>
<span class="line"><span>  | IdentifierDeclarationsStatement</span></span>
<span class="line"><span>  | VariableDeclaration</span></span>
<span class="line"><span>  | FunctionDeclaration</span></span>
<span class="line"><span>  | ExpressionStatement</span></span>
<span class="line"><span>  | Expression /* Expressionä¸­ä»¥é€’å½’ä¸‹é™çš„æ–¹å¼å®šä¹‰äº†å…¶ä»–æ‰€æœ‰è¡¨è¾¾å¼ */;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export interface AST_BASE_NODE {</span></span>
<span class="line"><span>  type: AST_NODE_TYPE;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ–‡æ³•åˆ†æçš„å®ç°" tabindex="-1"><a class="header-anchor" href="#æ–‡æ³•åˆ†æçš„å®ç°"><span>æ–‡æ³•åˆ†æçš„å®ç°</span></a></h2><p><code>Parser.ts</code></p><div class="language-ts line-numbers-mode" data-highlighter="shiki" data-ext="ts" data-title="ts" style="--shiki-light:#e1e4e8;--shiki-dark:#E6E6E6;--shiki-light-bg:#24292e;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-dark slack-dark vp-code"><code><span class="line"><span>import { TokenType, Token } from &#39;./Tokenizer&#39;;</span></span>
<span class="line"><span>import {</span></span>
<span class="line"><span>  Program,</span></span>
<span class="line"><span>  Statements,</span></span>
<span class="line"><span>  Statement,</span></span>
<span class="line"><span>  EmptyStatement,</span></span>
<span class="line"><span>  BlockStatement,</span></span>
<span class="line"><span>  IfStatement,</span></span>
<span class="line"><span>  WhileStatement,</span></span>
<span class="line"><span>  ExpressionStatement,</span></span>
<span class="line"><span>  IdentifierDeclarationsStatement,</span></span>
<span class="line"><span>  VariableOrFunctionDeclaration,</span></span>
<span class="line"><span>  VariableDeclaration,</span></span>
<span class="line"><span>  VariableDeclarationInit,</span></span>
<span class="line"><span>  FunctionDeclaration,</span></span>
<span class="line"><span>  FormedArguments,</span></span>
<span class="line"><span>  Expression,</span></span>
<span class="line"><span>  CommaExpression,</span></span>
<span class="line"><span>  AssignExpression,</span></span>
<span class="line"><span>  TernaryExpression,</span></span>
<span class="line"><span>  LogicalOrExpression,</span></span>
<span class="line"><span>  LogicalAndExpression,</span></span>
<span class="line"><span>  EqualityExpression,</span></span>
<span class="line"><span>  RelationalExpression,</span></span>
<span class="line"><span>  AdditiveExpression,</span></span>
<span class="line"><span>  MultiplicativeExpression,</span></span>
<span class="line"><span>  PrimaryExpression,</span></span>
<span class="line"><span>  MumberAccessExpressionOrFunctionCallExpression,</span></span>
<span class="line"><span>  MumberAccessExpression,</span></span>
<span class="line"><span>  Identifier,</span></span>
<span class="line"><span>  This,</span></span>
<span class="line"><span>  Super,</span></span>
<span class="line"><span>  Arguments,</span></span>
<span class="line"><span>  BracketedExpression,</span></span>
<span class="line"><span>  Literal,</span></span>
<span class="line"><span>  NumberLiteral,</span></span>
<span class="line"><span>  BooleanLiteral,</span></span>
<span class="line"><span>  StringLiteral,</span></span>
<span class="line"><span>  NullLiteral,</span></span>
<span class="line"><span>  BineryExpression,</span></span>
<span class="line"><span>} from &#39;./ast&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export class Parser {</span></span>
<span class="line"><span>  curToken!: Token | null;</span></span>
<span class="line"><span>  tk_idx = 0;</span></span>
<span class="line"><span>  tokens!: Token[];</span></span>
<span class="line"><span>  parse(tokens: Token[]) {</span></span>
<span class="line"><span>    this.tokens = tokens;</span></span>
<span class="line"><span>    this.curToken = this.tokens[(this.tk_idx = 0)];</span></span>
<span class="line"><span>    return this.Program();</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  Program(): Program {</span></span>
<span class="line"><span>    return {</span></span>
<span class="line"><span>      type: &#39;Program&#39;,</span></span>
<span class="line"><span>      statements: this.Statements(),</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  Statements(stopAt?: TokenType): Statements {</span></span>
<span class="line"><span>    let statements = [this.Statement()];</span></span>
<span class="line"><span>    while (this.curToken != null &amp;&amp; this.curToken?.type != stopAt) {</span></span>
<span class="line"><span>      statements.push(this.Statement());</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    return statements;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  Statement(): Statement {</span></span>
<span class="line"><span>    switch (this.curToken?.type) {</span></span>
<span class="line"><span>      case &#39;;&#39;:</span></span>
<span class="line"><span>        return this.EmptyStatement();</span></span>
<span class="line"><span>      case &#39;{&#39;:</span></span>
<span class="line"><span>        return this.BlockStatement();</span></span>
<span class="line"><span>      case &#39;if&#39;:</span></span>
<span class="line"><span>        return this.IfStatement();</span></span>
<span class="line"><span>      case &#39;while&#39;:</span></span>
<span class="line"><span>        return this.WhileStatement();</span></span>
<span class="line"><span>      case &#39;def&#39;:</span></span>
<span class="line"><span>        return this.IdentifierDeclarationsStatement();</span></span>
<span class="line"><span>      default:</span></span>
<span class="line"><span>        return this.ExpressionStatement();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  EmptyStatement(): EmptyStatement {</span></span>
<span class="line"><span>    this.eat(&#39;;&#39;);</span></span>
<span class="line"><span>    return {</span></span>
<span class="line"><span>      type: &#39;EmptyStatement&#39;,</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  BlockStatement(): BlockStatement {</span></span>
<span class="line"><span>    this.eat(&#39;{&#39;);</span></span>
<span class="line"><span>    let statements = this.curToken?.type != &#39;}&#39; ? this.Statements(&#39;}&#39;) : [];</span></span>
<span class="line"><span>    this.eat(&#39;}&#39;);</span></span>
<span class="line"><span>    return {</span></span>
<span class="line"><span>      type: &#39;BlockStatement&#39;,</span></span>
<span class="line"><span>      statements,</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  IfStatement(): IfStatement {</span></span>
<span class="line"><span>    this.eat(&#39;if&#39;);</span></span>
<span class="line"><span>    this.eat(&#39;(&#39;);</span></span>
<span class="line"><span>    let condition = this.Expression();</span></span>
<span class="line"><span>    this.eat(&#39;)&#39;);</span></span>
<span class="line"><span>    let case1 = this.Statement();</span></span>
<span class="line"><span>    let case2: Statement | undefined;</span></span>
<span class="line"><span>    if (this.curToken?.type == &#39;else&#39;) {</span></span>
<span class="line"><span>      this.eat(&#39;else&#39;);</span></span>
<span class="line"><span>      case2 = this.Statement();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    return {</span></span>
<span class="line"><span>      type: &#39;IfStatement&#39;,</span></span>
<span class="line"><span>      condition,</span></span>
<span class="line"><span>      case1,</span></span>
<span class="line"><span>      case2,</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  WhileStatement(): WhileStatement {</span></span>
<span class="line"><span>    this.eat(&#39;while&#39;);</span></span>
<span class="line"><span>    this.eat(&#39;(&#39;);</span></span>
<span class="line"><span>    let condition = this.Expression();</span></span>
<span class="line"><span>    this.eat(&#39;)&#39;);</span></span>
<span class="line"><span>    let statement = this.Statement();</span></span>
<span class="line"><span>    return {</span></span>
<span class="line"><span>      type: &#39;WhileStatement&#39;,</span></span>
<span class="line"><span>      condition,</span></span>
<span class="line"><span>      statement,</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  ExpressionStatement(): ExpressionStatement {</span></span>
<span class="line"><span>    let expression = this.Expression();</span></span>
<span class="line"><span>    this.eat(&#39;;&#39;);</span></span>
<span class="line"><span>    return {</span></span>
<span class="line"><span>      type: &#39;ExpressionStatement&#39;,</span></span>
<span class="line"><span>      expression,</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  IdentifierDeclarationsStatement(): IdentifierDeclarationsStatement {</span></span>
<span class="line"><span>    this.eat(&#39;def&#39;);</span></span>
<span class="line"><span>    let declarations = [this.VariableOrFunctionDeclaration()];</span></span>
<span class="line"><span>    while (this.curToken?.type == &#39;,&#39;) {</span></span>
<span class="line"><span>      this.eat(&#39;,&#39;);</span></span>
<span class="line"><span>      declarations.push(this.VariableOrFunctionDeclaration());</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    this.eat(&#39;;&#39;);</span></span>
<span class="line"><span>    return {</span></span>
<span class="line"><span>      type: &#39;IdentifierDeclarationsStatement&#39;,</span></span>
<span class="line"><span>      declarations,</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  VariableOrFunctionDeclaration(): VariableOrFunctionDeclaration {</span></span>
<span class="line"><span>    let identifier = this.eat(&#39;Identifier&#39;).value;</span></span>
<span class="line"><span>    switch (this.curToken?.type) {</span></span>
<span class="line"><span>      case &#39;(&#39;:</span></span>
<span class="line"><span>        return this.FunctionDeclaration(identifier);</span></span>
<span class="line"><span>      default:</span></span>
<span class="line"><span>        return this.VariableDeclaration(identifier);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  VariableDeclaration(variableName: string): VariableDeclaration {</span></span>
<span class="line"><span>    return {</span></span>
<span class="line"><span>      type: &#39;VariableDeclaration&#39;,</span></span>
<span class="line"><span>      name: variableName,</span></span>
<span class="line"><span>      value: this.VariableDeclarationInit(),</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  VariableDeclarationInit(): VariableDeclarationInit {</span></span>
<span class="line"><span>    if (this.curToken?.type == &#39;AssignOpSimple&#39;) {</span></span>
<span class="line"><span>      this.eat(&#39;AssignOpSimple&#39;);</span></span>
<span class="line"><span>      return this.LogicalOrExpression();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    return undefined;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  FunctionDeclaration(functionName: string): FunctionDeclaration {</span></span>
<span class="line"><span>    return {</span></span>
<span class="line"><span>      type: &#39;FunctionDeclaration&#39;,</span></span>
<span class="line"><span>      name: functionName,</span></span>
<span class="line"><span>      FormedArguments: this.FormedArguments(),</span></span>
<span class="line"><span>      statements: this.BlockStatement(),</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  FormedArguments(): FormedArguments {</span></span>
<span class="line"><span>    this.eat(&#39;(&#39;);</span></span>
<span class="line"><span>    let args: VariableOrFunctionDeclaration[] = [];</span></span>
<span class="line"><span>    while (this.curToken?.type == &#39;def&#39;) {</span></span>
<span class="line"><span>      this.eat(&#39;def&#39;);</span></span>
<span class="line"><span>      args.push(this.VariableOrFunctionDeclaration());</span></span>
<span class="line"><span>      // @ts-ignore</span></span>
<span class="line"><span>      if (this.curToken.type == &#39;,&#39;) this.eat(&#39;,&#39;);</span></span>
<span class="line"><span>      else break;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    this.eat(&#39;)&#39;);</span></span>
<span class="line"><span>    return args;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  Expression(): Expression {</span></span>
<span class="line"><span>    return this.CommaExpression();</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  CommaExpression(): CommaExpression {</span></span>
<span class="line"><span>    let exp = this.AssignExpression();</span></span>
<span class="line"><span>    if (this.curToken?.type == &#39;,&#39;) {</span></span>
<span class="line"><span>      let exps = [exp];</span></span>
<span class="line"><span>      while (this.curToken?.type == &#39;,&#39;) {</span></span>
<span class="line"><span>        this.eat(&#39;,&#39;);</span></span>
<span class="line"><span>        exps.push(this.AssignExpression());</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>      return {</span></span>
<span class="line"><span>        type: &#39;CommaExpression&#39;,</span></span>
<span class="line"><span>        expressions: exps,</span></span>
<span class="line"><span>      };</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    return exp;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  AssignExpression(): AssignExpression {</span></span>
<span class="line"><span>    let left: AssignExpression = this.TernaryExpression();</span></span>
<span class="line"><span>    while (</span></span>
<span class="line"><span>      (left.type == &#39;MumberAccessExpression&#39; || left.type == &#39;Identifier&#39;) &amp;&amp;</span></span>
<span class="line"><span>      (this.curToken?.type == &#39;AssignOpSimple&#39; ||</span></span>
<span class="line"><span>        this.curToken?.type == &#39;AssignOpComplex&#39;)</span></span>
<span class="line"><span>    ) {</span></span>
<span class="line"><span>      let operator = this.eat(this.curToken.type).value;</span></span>
<span class="line"><span>      let right = this.AssignExpression();</span></span>
<span class="line"><span>      left = {</span></span>
<span class="line"><span>        type: &#39;AssignExpression&#39;,</span></span>
<span class="line"><span>        operator,</span></span>
<span class="line"><span>        left,</span></span>
<span class="line"><span>        right,</span></span>
<span class="line"><span>      };</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    return left;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  TernaryExpression(): TernaryExpression {</span></span>
<span class="line"><span>    let condition: TernaryExpression = this.LogicalOrExpression();</span></span>
<span class="line"><span>    if (this.curToken?.type == &#39;TernaryOp?&#39;) {</span></span>
<span class="line"><span>      this.eat(&#39;TernaryOp?&#39;);</span></span>
<span class="line"><span>      let case1 = this.TernaryExpression();</span></span>
<span class="line"><span>      this.eat(&#39;TernaryOp:&#39;);</span></span>
<span class="line"><span>      let case2 = this.TernaryExpression();</span></span>
<span class="line"><span>      return {</span></span>
<span class="line"><span>        type: &#39;TernaryExpression&#39;,</span></span>
<span class="line"><span>        condition,</span></span>
<span class="line"><span>        case1,</span></span>
<span class="line"><span>        case2,</span></span>
<span class="line"><span>      };</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    return condition;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  LogicalOrExpression(): LogicalOrExpression {</span></span>
<span class="line"><span>    return this.BineryExpression(this.LogicalAndExpression, &#39;LogicalOr&#39;);</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  LogicalAndExpression(): LogicalAndExpression {</span></span>
<span class="line"><span>    return this.BineryExpression(this.EqualityExpression, &#39;LogicalAnd&#39;);</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  EqualityExpression(): EqualityExpression {</span></span>
<span class="line"><span>    return this.BineryExpression(this.RelationalExpression, &#39;EqualityOp&#39;);</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  RelationalExpression(): RelationalExpression {</span></span>
<span class="line"><span>    return this.BineryExpression(this.AdditiveExpression, &#39;RelationalOp&#39;);</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  AdditiveExpression(): AdditiveExpression {</span></span>
<span class="line"><span>    return this.BineryExpression(this.MultiplicativeExpression, &#39;AddOp&#39;);</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  MultiplicativeExpression(): MultiplicativeExpression {</span></span>
<span class="line"><span>    return this.BineryExpression(this.PrimaryExpression, &#39;MutOp&#39;);</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  PrimaryExpression(): PrimaryExpression {</span></span>
<span class="line"><span>    switch (this.curToken?.type) {</span></span>
<span class="line"><span>      case &#39;Identifier&#39;:</span></span>
<span class="line"><span>      case &#39;this&#39;:</span></span>
<span class="line"><span>      case &#39;super&#39;:</span></span>
<span class="line"><span>        return this.MumberAccessExpressionOrFunctionCallExpression();</span></span>
<span class="line"><span>      case &#39;(&#39;:</span></span>
<span class="line"><span>        return this.BracketedExpression();</span></span>
<span class="line"><span>      default:</span></span>
<span class="line"><span>        return this.Literal();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  MumberAccessExpressionOrFunctionCallExpression(): MumberAccessExpressionOrFunctionCallExpression {</span></span>
<span class="line"><span>    let mumberExp = this.MumberAccessExpression();</span></span>
<span class="line"><span>    if (this.curToken?.type == &#39;(&#39;) {</span></span>
<span class="line"><span>      return {</span></span>
<span class="line"><span>        type: &#39;FunctionCall&#39;,</span></span>
<span class="line"><span>        calee: mumberExp,</span></span>
<span class="line"><span>        args: this.Arguments(),</span></span>
<span class="line"><span>      };</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    return mumberExp;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  MumberAccessExpression(): MumberAccessExpression {</span></span>
<span class="line"><span>    let object!: MumberAccessExpression;</span></span>
<span class="line"><span>    switch (this.curToken?.type) {</span></span>
<span class="line"><span>      case &#39;this&#39;:</span></span>
<span class="line"><span>        object = this.This();</span></span>
<span class="line"><span>        break;</span></span>
<span class="line"><span>      case &#39;super&#39;:</span></span>
<span class="line"><span>        object = this.Super();</span></span>
<span class="line"><span>        break;</span></span>
<span class="line"><span>      case &#39;Identifier&#39;:</span></span>
<span class="line"><span>        object = this.Identifier();</span></span>
<span class="line"><span>        break;</span></span>
<span class="line"><span>      default:</span></span>
<span class="line"><span>        throw new SyntaxError(`unexpectted token:${this.curToken?.value}`);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    // @ts-ignore</span></span>
<span class="line"><span>    while (this.curToken?.type == &#39;.&#39; || this.curToken.type == &#39;[&#39;) {</span></span>
<span class="line"><span>      let property!: Identifier | Expression;</span></span>
<span class="line"><span>      let isIndex = false;</span></span>
<span class="line"><span>      if (this.curToken.type == &#39;.&#39;) {</span></span>
<span class="line"><span>        this.eat(&#39;.&#39;);</span></span>
<span class="line"><span>        property = this.Identifier();</span></span>
<span class="line"><span>        isIndex = false;</span></span>
<span class="line"><span>      } else if (this.curToken.type == &#39;[&#39;) {</span></span>
<span class="line"><span>        this.eat(&#39;[&#39;);</span></span>
<span class="line"><span>        property = this.Expression();</span></span>
<span class="line"><span>        this.eat(&#39;]&#39;);</span></span>
<span class="line"><span>        isIndex = true;</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>      object = {</span></span>
<span class="line"><span>        type: &#39;MumberAccessExpression&#39;,</span></span>
<span class="line"><span>        object: object,</span></span>
<span class="line"><span>        property: property,</span></span>
<span class="line"><span>        isIndex,</span></span>
<span class="line"><span>      };</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    return object;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  This(): This {</span></span>
<span class="line"><span>    let ts = this.eat(&#39;this&#39;).value;</span></span>
<span class="line"><span>    return {</span></span>
<span class="line"><span>      type: &#39;this&#39;,</span></span>
<span class="line"><span>      name: ts,</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  Super(): Super {</span></span>
<span class="line"><span>    let sp = this.eat(&#39;super&#39;).value;</span></span>
<span class="line"><span>    return {</span></span>
<span class="line"><span>      type: &#39;super&#39;,</span></span>
<span class="line"><span>      name: sp,</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  Identifier(): Identifier {</span></span>
<span class="line"><span>    let id = this.eat(&#39;Identifier&#39;).value;</span></span>
<span class="line"><span>    return {</span></span>
<span class="line"><span>      type: &#39;Identifier&#39;,</span></span>
<span class="line"><span>      name: id,</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  Arguments(): Arguments {</span></span>
<span class="line"><span>    this.eat(&#39;(&#39;);</span></span>
<span class="line"><span>    let args: Array&lt;AssignExpression&gt; = [];</span></span>
<span class="line"><span>    if (this.curToken?.type == &#39;)&#39;) {</span></span>
<span class="line"><span>      this.eat(&#39;)&#39;);</span></span>
<span class="line"><span>      return args;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    args.push(this.AssignExpression());</span></span>
<span class="line"><span>    if (this.curToken?.type == &#39;,&#39;) {</span></span>
<span class="line"><span>      this.eat(&#39;,&#39;);</span></span>
<span class="line"><span>      args.push(this.AssignExpression());</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    this.eat(&#39;)&#39;);</span></span>
<span class="line"><span>    return args;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  BracketedExpression(): BracketedExpression {</span></span>
<span class="line"><span>    this.eat(&#39;(&#39;);</span></span>
<span class="line"><span>    let expression = this.Expression();</span></span>
<span class="line"><span>    this.eat(&#39;)&#39;);</span></span>
<span class="line"><span>    return {</span></span>
<span class="line"><span>      type: &#39;BracketedExpression&#39;,</span></span>
<span class="line"><span>      expression,</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  Literal(): Literal {</span></span>
<span class="line"><span>    switch (this.curToken?.type) {</span></span>
<span class="line"><span>      case &#39;Number&#39;:</span></span>
<span class="line"><span>        return this.NumberLiteral();</span></span>
<span class="line"><span>      case &#39;String&#39;:</span></span>
<span class="line"><span>        return this.StringLiteral();</span></span>
<span class="line"><span>      case &#39;null&#39;:</span></span>
<span class="line"><span>        return this.NullLiteral();</span></span>
<span class="line"><span>      case &#39;Boolean&#39;:</span></span>
<span class="line"><span>        return this.BooleanLiteral();</span></span>
<span class="line"><span>      default:</span></span>
<span class="line"><span>        throw new SyntaxError(`unknow Literal: ${this.curToken?.value}`);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  NumberLiteral(): NumberLiteral {</span></span>
<span class="line"><span>    let val = this.eat(&#39;Number&#39;).value;</span></span>
<span class="line"><span>    return {</span></span>
<span class="line"><span>      type: &#39;NumberLiteral&#39;,</span></span>
<span class="line"><span>      value: val,</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  BooleanLiteral(): BooleanLiteral {</span></span>
<span class="line"><span>    let val = this.eat(&#39;Boolean&#39;).value;</span></span>
<span class="line"><span>    return {</span></span>
<span class="line"><span>      type: &#39;BooleanLiteral&#39;,</span></span>
<span class="line"><span>      value: val,</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  StringLiteral(): StringLiteral {</span></span>
<span class="line"><span>    let val = this.eat(&#39;String&#39;).value;</span></span>
<span class="line"><span>    return {</span></span>
<span class="line"><span>      type: &#39;StringLiteral&#39;,</span></span>
<span class="line"><span>      value: val,</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  NullLiteral(): NullLiteral {</span></span>
<span class="line"><span>    let val = this.eat(&#39;null&#39;).value;</span></span>
<span class="line"><span>    return {</span></span>
<span class="line"><span>      type: &#39;NullLiteral&#39;,</span></span>
<span class="line"><span>      value: val,</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  BineryExpression&lt;ChildNode, operatorType extends TokenType&gt;(</span></span>
<span class="line"><span>    childBuilder: () =&gt; ChildNode,</span></span>
<span class="line"><span>    operatorType: operatorType</span></span>
<span class="line"><span>  ): ChildNode | BineryExpression&lt;ChildNode, operatorType&gt; {</span></span>
<span class="line"><span>    let left: ChildNode | BineryExpression&lt;ChildNode, operatorType&gt; =</span></span>
<span class="line"><span>      childBuilder.apply(this);</span></span>
<span class="line"><span>    while (this.curToken?.type == operatorType) {</span></span>
<span class="line"><span>      let operator = this.eat(operatorType).value;</span></span>
<span class="line"><span>      let right = childBuilder.apply(this);</span></span>
<span class="line"><span>      left = {</span></span>
<span class="line"><span>        type: &#39;BineryExpression&#39;,</span></span>
<span class="line"><span>        operator,</span></span>
<span class="line"><span>        left,</span></span>
<span class="line"><span>        right,</span></span>
<span class="line"><span>      } as BineryExpression&lt;ChildNode, operatorType&gt;;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    return left;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  eat(tkt: TokenType) {</span></span>
<span class="line"><span>    if (this.curToken?.type != tkt) {</span></span>
<span class="line"><span>      throw new SyntaxError(</span></span>
<span class="line"><span>        `expected:&#39;${tkt}&#39;;but actually get:&#39;${this.curToken?.value}&#39;`</span></span>
<span class="line"><span>      );</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    let token = this.tokens[this.tk_idx];</span></span>
<span class="line"><span>    this.curToken =</span></span>
<span class="line"><span>      this.tk_idx + 1 &lt; this.tokens.length ? this.tokens[++this.tk_idx] : null;</span></span>
<span class="line"><span>    return token;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è§£é‡Šå™¨çš„å®ç°" tabindex="-1"><a class="header-anchor" href="#è§£é‡Šå™¨çš„å®ç°"><span>è§£é‡Šå™¨çš„å®ç°</span></a></h2><p><code>Interpreater.ts</code></p><div class="language-ts line-numbers-mode" data-highlighter="shiki" data-ext="ts" data-title="ts" style="--shiki-light:#e1e4e8;--shiki-dark:#E6E6E6;--shiki-light-bg:#24292e;--shiki-dark-bg:#222222;"><pre class="shiki shiki-themes github-dark slack-dark vp-code"><code><span class="line"><span>import { AST_NODE } from &#39;./ast&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export class Interpreater {</span></span>
<span class="line"><span>  /**</span></span>
<span class="line"><span>   * æš‚æ—¶çš„æƒ³æ³•æ˜¯ï¼Œè¿›å…¥ä¸€ä¸ªå—ä½œç”¨åŸŸï¼Œå°±åˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå‹å…¥æ ˆé¡¶ï¼Œ</span></span>
<span class="line"><span>   * å½“è¦åœ¨è¯¥ä½œç”¨åŸŸå®šä¹‰å˜é‡æ—¶ï¼ŒæŠŠå˜é‡å­˜å‚¨åˆ°æ ˆé¡¶çš„ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­ã€‚</span></span>
<span class="line"><span>   * å½“è¦å¯»æ‰¾ä¸€ä¸ªå˜é‡çš„å€¼æ—¶ï¼Œåˆ™ä»æ ˆé¡¶å¾€æ ˆåº•éå†ã€‚</span></span>
<span class="line"><span>   * å½“ç¦»å¼€ä¸€ä¸ªä½œç”¨åŸŸæ—¶ï¼Œå¼¹å‡ºæ ˆé¡¶ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå¹¶å°†å…¶é”€æ¯</span></span>
<span class="line"><span>   */</span></span>
<span class="line"><span>  ctxIdx = 0; // ä¸Šä¸‹æ–‡æ ˆæŒ‡é’ˆï¼Œç¬¬0ä¸ªæ ˆä¸ºç³»ç»Ÿæ ˆ</span></span>
<span class="line"><span>  ctxStack: Array&lt;Map&lt;string, any&gt;&gt; = [new Map()]; // ä¸Šä¸‹æ–‡å¯¹è±¡æ ˆ</span></span>
<span class="line"><span>  constructor() {}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  exec(node?: AST_NODE): any {</span></span>
<span class="line"><span>    if (!node) return undefined;</span></span>
<span class="line"><span>    switch (node.type) {</span></span>
<span class="line"><span>      case &#39;Program&#39;:</span></span>
<span class="line"><span>      case &#39;BlockStatement&#39;:</span></span>
<span class="line"><span>        // æ‰§è¡Œä»£ç å—ï¼Œè¿”å›æœ€åä¸€æ¡è¯­å¥çš„å€¼</span></span>
<span class="line"><span>        this.ctxIdx++;</span></span>
<span class="line"><span>        let res = node.statements.map((stm) =&gt; this.exec(stm)).pop();</span></span>
<span class="line"><span>        this.ctxIdx--;</span></span>
<span class="line"><span>        return res;</span></span>
<span class="line"><span>      case &#39;EmptyStatement&#39;:</span></span>
<span class="line"><span>        return undefined;</span></span>
<span class="line"><span>      case &#39;IfStatement&#39;:</span></span>
<span class="line"><span>        // TODO: éœ€è¦è€ƒè™‘ return å’Œ break</span></span>
<span class="line"><span>        if (this.exec(node.condition)) this.exec(node.case1);</span></span>
<span class="line"><span>        else if (node.case2) this.exec(node.case2);</span></span>
<span class="line"><span>        return undefined;</span></span>
<span class="line"><span>      case &#39;WhileStatement&#39;:</span></span>
<span class="line"><span>        // TODO: éœ€è¦è€ƒè™‘return å’Œ break</span></span>
<span class="line"><span>        while (this.exec(node.condition)) this.exec(node.statement);</span></span>
<span class="line"><span>        // è¿”å›æœ€åæ‰§è¡Œçš„ä¸€æ¡è¯­å¥</span></span>
<span class="line"><span>        return undefined;</span></span>
<span class="line"><span>      case &#39;IdentifierDeclarationsStatement&#39;:</span></span>
<span class="line"><span>        // è¿”å›æ ‡è¯†ç¬¦åˆ—è¡¨</span></span>
<span class="line"><span>        return node.declarations.map((dec) =&gt; this.exec(dec));</span></span>
<span class="line"><span>      case &#39;VariableDeclaration&#39;:</span></span>
<span class="line"><span>        // å˜é‡å£°æ˜ä»¥åŠåˆå§‹åŒ–</span></span>
<span class="line"><span>        return this.declear(node.name, this.exec(node.value));</span></span>
<span class="line"><span>      case &#39;FunctionDeclaration&#39;:</span></span>
<span class="line"><span>        // è¿”å›å‡½æ•°å</span></span>
<span class="line"><span>        return this.declear(node.name, node);</span></span>
<span class="line"><span>      case &#39;ExpressionStatement&#39;:</span></span>
<span class="line"><span>        this.exec(node.expression);</span></span>
<span class="line"><span>        return undefined;</span></span>
<span class="line"><span>      case &#39;CommaExpression&#39;:</span></span>
<span class="line"><span>        // è®¡ç®—å¹¶è¿”å›é€—å·è¡¨è¾¾å¼çš„æœ€åä¸€ä¸ªå€¼</span></span>
<span class="line"><span>        return node.expressions.map((exp) =&gt; this.exec(exp)).pop();</span></span>
<span class="line"><span>      case &#39;AssignExpression&#39;:</span></span>
<span class="line"><span>        switch (node.left.type) {</span></span>
<span class="line"><span>          case &#39;Identifier&#39;:</span></span>
<span class="line"><span>            return this.assign(</span></span>
<span class="line"><span>              node.left.name,</span></span>
<span class="line"><span>              node.operator,</span></span>
<span class="line"><span>              this.exec(node.right)</span></span>
<span class="line"><span>            );</span></span>
<span class="line"><span>          default:</span></span>
<span class="line"><span>            throw new SyntaxError(&#39;unimplement functions.&#39;);</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>      case &#39;TernaryExpression&#39;:</span></span>
<span class="line"><span>        return this.exec(node.condition)</span></span>
<span class="line"><span>          ? this.exec(node.case1)</span></span>
<span class="line"><span>          : this.exec(node.case2);</span></span>
<span class="line"><span>      case &#39;BineryExpression&#39;:</span></span>
<span class="line"><span>        switch (node.operator) {</span></span>
<span class="line"><span>          case &#39;||&#39;:</span></span>
<span class="line"><span>            return this.exec(node.left) || this.exec(node.right);</span></span>
<span class="line"><span>          case &#39;&amp;&amp;&#39;:</span></span>
<span class="line"><span>            return this.exec(node.left) &amp;&amp; this.exec(node.right);</span></span>
<span class="line"><span>          case &#39;==&#39;:</span></span>
<span class="line"><span>            return this.exec(node.left) == this.exec(node.right);</span></span>
<span class="line"><span>          case &#39;!=&#39;:</span></span>
<span class="line"><span>            return this.exec(node.left) != this.exec(node.right);</span></span>
<span class="line"><span>          case &#39;&lt;&#39;:</span></span>
<span class="line"><span>            return this.exec(node.left) &lt; this.exec(node.right);</span></span>
<span class="line"><span>          case &#39;&gt;&#39;:</span></span>
<span class="line"><span>            return this.exec(node.left) &gt; this.exec(node.right);</span></span>
<span class="line"><span>          case &#39;&lt;=&#39;:</span></span>
<span class="line"><span>            return this.exec(node.left) &lt;= this.exec(node.right);</span></span>
<span class="line"><span>          case &#39;&gt;=&#39;:</span></span>
<span class="line"><span>            return this.exec(node.left) &gt;= this.exec(node.right);</span></span>
<span class="line"><span>          case &#39;+&#39;:</span></span>
<span class="line"><span>            return this.exec(node.left) + this.exec(node.right);</span></span>
<span class="line"><span>          case &#39;-&#39;:</span></span>
<span class="line"><span>            return this.exec(node.left) - this.exec(node.right);</span></span>
<span class="line"><span>          case &#39;*&#39;:</span></span>
<span class="line"><span>            return this.exec(node.left) * this.exec(node.right);</span></span>
<span class="line"><span>          case &#39;/&#39;:</span></span>
<span class="line"><span>            return this.exec(node.left) / this.exec(node.right);</span></span>
<span class="line"><span>          case &#39;%&#39;:</span></span>
<span class="line"><span>            return this.exec(node.left) % this.exec(node.right);</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        throw new SyntaxError(`unknow operator:${node.operator}`);</span></span>
<span class="line"><span>      case &#39;FunctionCall&#39;:</span></span>
<span class="line"><span>        switch (node.calee.type) {</span></span>
<span class="line"><span>          case &#39;Identifier&#39;:</span></span>
<span class="line"><span>            let symbol = node.calee.name;</span></span>
<span class="line"><span>            let fun: Function | AST_NODE = this.getVal(symbol);</span></span>
<span class="line"><span>            if (fun) {</span></span>
<span class="line"><span>              if (fun instanceof Function) {</span></span>
<span class="line"><span>                let args = node.args.map((arg) =&gt; this.exec(arg));</span></span>
<span class="line"><span>                return fun(args);</span></span>
<span class="line"><span>              } else if (fun.type == &#39;FunctionDeclaration&#39;) {</span></span>
<span class="line"><span>                // è®¡ç®—å®å‚</span></span>
<span class="line"><span>                let argValus = node.args.map((arg) =&gt; this.exec(arg));</span></span>
<span class="line"><span>                // è¿›å…¥å‡½æ•°è°ƒç”¨</span></span>
<span class="line"><span>                this.ctxIdx++;</span></span>
<span class="line"><span>                // å£°æ˜åˆå§‹åŒ–å½¢å¼å‚æ•°</span></span>
<span class="line"><span>                let argNames = fun.FormedArguments.map((arg) =&gt; this.exec(arg));</span></span>
<span class="line"><span>                // æŠŠå®å‚ä¼ ç»™å½¢å¼å‚æ•°</span></span>
<span class="line"><span>                argNames.forEach((name, idx) =&gt;</span></span>
<span class="line"><span>                  this.assign(name, &#39;=&#39;, argValus[idx])</span></span>
<span class="line"><span>                );</span></span>
<span class="line"><span>                let result = this.exec(fun.statements);</span></span>
<span class="line"><span>                this.ctxIdx--;</span></span>
<span class="line"><span>                return result;</span></span>
<span class="line"><span>              }</span></span>
<span class="line"><span>            } else {</span></span>
<span class="line"><span>              throw new SyntaxError(`unimplement function ${symbol}.`);</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          default:</span></span>
<span class="line"><span>            throw new SyntaxError(&#39;unimplement functions.&#39;);</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>      case &#39;BracketedExpression&#39;:</span></span>
<span class="line"><span>        return this.exec(node.expression);</span></span>
<span class="line"><span>      case &#39;Identifier&#39;:</span></span>
<span class="line"><span>        return this.getVal(node.name);</span></span>
<span class="line"><span>      case &#39;NumberLiteral&#39;:</span></span>
<span class="line"><span>        return Number(node.value);</span></span>
<span class="line"><span>      case &#39;BooleanLiteral&#39;:</span></span>
<span class="line"><span>        return node.value == &#39;true&#39; ? true : false;</span></span>
<span class="line"><span>      case &#39;StringLiteral&#39;:</span></span>
<span class="line"><span>        return node.value;</span></span>
<span class="line"><span>      case &#39;NullLiteral&#39;:</span></span>
<span class="line"><span>        return null;</span></span>
<span class="line"><span>      case &#39;MumberAccessExpression&#39;:</span></span>
<span class="line"><span>      case &#39;super&#39;:</span></span>
<span class="line"><span>      case &#39;this&#39;:</span></span>
<span class="line"><span>        throw new SyntaxError(&#39;unimplement functions.&#39;);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  /**</span></span>
<span class="line"><span>   * è·å–å½“å‰ä½œç”¨åŸŸçš„ä¸Šä¸‹æ–‡å¯¹è±¡</span></span>
<span class="line"><span>   * å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¦è´Ÿè´£åˆ›å»ºå®ƒ</span></span>
<span class="line"><span>   */</span></span>
<span class="line"><span>  getCurrentContext() {</span></span>
<span class="line"><span>    this.ctxStack.length = this.ctxIdx + 1;</span></span>
<span class="line"><span>    let ctx = this.ctxStack[this.ctxIdx];</span></span>
<span class="line"><span>    if (!ctx) {</span></span>
<span class="line"><span>      ctx = this.ctxStack[this.ctxIdx] = new Map&lt;string, any&gt;();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    return ctx;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  /**</span></span>
<span class="line"><span>   * è‡ªä¸Šè€Œä¸‹çš„åˆ°ä¸Šä¸‹æ–‡å¯¹è±¡æ ˆä¸­å»å¯»æ‰¾å®šä¹‰äº†æŸä¸ªç¬¦å·çš„ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚</span></span>
<span class="line"><span>   */</span></span>
<span class="line"><span>  findContextWithSymbol(symbol: string) {</span></span>
<span class="line"><span>    this.ctxStack.length = this.ctxIdx + 1;</span></span>
<span class="line"><span>    let stack = this.ctxStack;</span></span>
<span class="line"><span>    for (let idx = this.ctxIdx; 0 &lt;= idx; idx--) {</span></span>
<span class="line"><span>      const ctx = stack[idx];</span></span>
<span class="line"><span>      if (ctx &amp;&amp; ctx.has(symbol)) return ctx;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    return null;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  registerFun(funName: string, fun: Function) {</span></span>
<span class="line"><span>    // æŠŠé¢„å®šä¹‰å‡½æ•°å®šä¹‰åœ¨ç³»ç»Ÿæ ˆä¸­</span></span>
<span class="line"><span>    this.ctxStack[0].set(funName, fun);</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  /**</span></span>
<span class="line"><span>   * åœ¨å½“å‰çš„ä½œç”¨åŸŸä¸­å£°æ˜å˜é‡</span></span>
<span class="line"><span>   */</span></span>
<span class="line"><span>  declear(symbol: string, val: any | undefined) {</span></span>
<span class="line"><span>    let ctx = this.getCurrentContext();</span></span>
<span class="line"><span>    if (ctx.has(symbol)) throw new SyntaxError(`redefined symbol: ${symbol}`);</span></span>
<span class="line"><span>    ctx.set(symbol, val);</span></span>
<span class="line"><span>    return symbol;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  /**</span></span>
<span class="line"><span>   * å¯¹ä¸€ä¸ªå·²ç»å®šä¹‰çš„å˜é‡èµ‹å€¼</span></span>
<span class="line"><span>   */</span></span>
<span class="line"><span>  assign(symbol: string, operator: string, val: number) {</span></span>
<span class="line"><span>    let ctx = this.findContextWithSymbol(symbol);</span></span>
<span class="line"><span>    if (!ctx) throw new SyntaxError(`undefined symbol: ${symbol}`);</span></span>
<span class="line"><span>    let newVal = ctx.get(symbol);</span></span>
<span class="line"><span>    switch (operator) {</span></span>
<span class="line"><span>      case &#39;=&#39;:</span></span>
<span class="line"><span>        newVal = val;</span></span>
<span class="line"><span>        break;</span></span>
<span class="line"><span>      case &#39;+=&#39;:</span></span>
<span class="line"><span>        newVal += val;</span></span>
<span class="line"><span>        break;</span></span>
<span class="line"><span>      case &#39;-=&#39;:</span></span>
<span class="line"><span>        newVal -= val;</span></span>
<span class="line"><span>        break;</span></span>
<span class="line"><span>      case &#39;*=&#39;:</span></span>
<span class="line"><span>        newVal *= val;</span></span>
<span class="line"><span>        break;</span></span>
<span class="line"><span>      case &#39;/=&#39;:</span></span>
<span class="line"><span>        newVal /= val;</span></span>
<span class="line"><span>        break;</span></span>
<span class="line"><span>      case &#39;%=&#39;:</span></span>
<span class="line"><span>        newVal %= val;</span></span>
<span class="line"><span>        break;</span></span>
<span class="line"><span>      default:</span></span>
<span class="line"><span>        throw new SyntaxError(`unknow operator:${operator}`);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    ctx.set(symbol, newVal);</span></span>
<span class="line"><span>    return newVal;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  /**</span></span>
<span class="line"><span>   * è·å–ä¸€ä¸ªå·²ç»å®šä¹‰çš„å˜é‡çš„å€¼</span></span>
<span class="line"><span>   */</span></span>
<span class="line"><span>  getVal(symbol: string) {</span></span>
<span class="line"><span>    let ctx = this.findContextWithSymbol(symbol);</span></span>
<span class="line"><span>    if (!ctx) throw new SyntaxError(`undefined symbol: ${symbol}`);</span></span>
<span class="line"><span>    return ctx.get(symbol);</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 2449695354@qq.com">YiguiDing</span><!--]--><!--]--></div></div></footer><!----><div id="vp-comment" class="giscus-wrapper input-top" style="display:block;"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" preserveAspectRatio="xMidYMid" viewBox="0 0 100 100"><circle cx="28" cy="75" r="11" fill="currentColor"><animate attributeName="fill-opacity" begin="0s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></circle><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 47a28 28 0 0 1 28 28"><animate attributeName="stroke-opacity" begin="0.1s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 25a50 50 0 0 1 50 50"><animate attributeName="stroke-opacity" begin="0.2s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path></svg></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">MIT Licensed | Copyright Â© 2019-present Yigui-Ding</div></footer></div><!--]--><!--[--><!----><!----><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-B8JFERy0.js" defer></script>
  </body>
</html>
